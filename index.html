<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Focus on Infrastructure">
<meta property="og:type" content="website">
<meta property="og:title" content="ByteCoding">
<meta property="og:url" content="https://blog.zhongmingmao.top/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="Focus on Infrastructure">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png">
<meta property="article:author" content="zhongmingmao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ByteCoding',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-06-04 18:18:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">407</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">121</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">63</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2022/10/16/13/53/early-morning-7525151_1280.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ByteCoding</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/12/01/cloud-native-foundation-k8s-architectural-principles/" title="Kubernetes - Architectural principles"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/BLOG-Kubernets-1024x536.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Architectural principles"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/12/01/cloud-native-foundation-k8s-architectural-principles/" title="Kubernetes - Architectural principles">Kubernetes - Architectural principles</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-30T16:06:25.000Z" title="Created 2022-12-01 00:06:25">2022-12-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">主要功能



基于容器的应用部署、维护和滚动升级
服务发现和负载均衡
跨机器和跨地区的集群调度
自动伸缩
无状态服务和有状态服务
插件机制保证扩展性

命令式 vs 声明式
YAML


命令式关注：如何做
声明式关注：做什么

核心对象
Kubernetes 的所有管理能力是构建在对象抽象的基础上




对象
描述



Node
计算节点的抽象


Namespace
资源隔离的基本单位


Pod
用来描述应用实例，最为核心的对象


Service
如何将应用发布为服务，本质上是负载均衡和域名服务的声明


核心架构
核心组件
Scheduler关注没有与 Node 绑定的 Pod，完成调度后，会将信息写入 etcd，而 kubelet 会监听到


Master


组件
描述



API Server
API 网关


Cluster Data Store
etcd：分布式 kv 存储，K8S 将所有 API 对象持久存储在 etcd


Controller Manager
处理集群日常任务的控制器：节点控制器、副本控制器等


Scheduler
监控新建的 Pods 并将其分配给 No ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/18/cloud-computing-object-storage/" title="Cloud Computing - Object storage"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/image-20230602173229918.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - Object storage"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/18/cloud-computing-object-storage/" title="Cloud Computing - Object storage">Cloud Computing - Object storage</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-17T16:06:25.000Z" title="Created 2022-10-18 00:06:25">2022-10-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-computing/">Cloud Computing</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-computing/paas/">PaaS</a></span></div><div class="content">概述
对象：任意二进制文件，包括结构化和非结构化的数据，可随时执行：上传、下载、修改、删除



对象存储 vs 云硬盘
访问接口和形式


云硬盘是挂载到虚拟机的虚拟硬盘，是通过实现 OS 的底层接口，作为虚拟机的块存储设备而存在
必须连接到相关的虚拟机，才能访问到云硬盘里面的数据


对象存储，本质上是一个网络化的服务，调用方主要通过高层的 API 或者 SDK 来和它进行交互
提供类似 HTTP 的网络接口来实现，独立性很强
S3FS 和 OSSFS 等工具可以通过模拟磁盘（基于对象存储的 API ）并挂载到虚拟机
并没有改变对象存储是网络化服务的本质




云硬盘位于 IaaS 层，而对象存储位于 PaaS 层


KV 系统  vs 文件系统


Key 为存储对象的路径，Value 为存储对象的二进制文件
文件系统保存了更多的元数据（如：实现目录结构和目录操作），KV 系统的目录是通过共享前缀路径来模拟的
KV 系统的优劣
简化了对象存储的逻辑和设计，云厂商可以更聚焦于对象存储的分布式架构和服务高可用上
但对象存储中的&quot;目录&quot;操作的代价变高了
目录删除&#x2F;重命名：需要 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/17/cloud-computing-paas/" title="Cloud Computing - PaaS"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/PAAS-cover-min.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - PaaS"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/17/cloud-computing-paas/" title="Cloud Computing - PaaS">Cloud Computing - PaaS</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-16T16:06:25.000Z" title="Created 2022-10-17 00:06:25">2022-10-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-computing/">Cloud Computing</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-computing/paas/">PaaS</a></span></div><div class="content">概述
PaaS 在 IaaS 的基础上，构建了很多关键抽象和可复用的单元，让用户更聚焦业务



优势
PaaS 更符合云的初衷，代表了一种完全托管的理想主义，代表对研发生产力的极致追求
核心优势：生产力（搭建 + 运维）

维度
PaaS 服务是否带有内生的运行环境（Web 服务带有编程语言运行时、数据库服务带有 SQL 执行引擎）
PaaS 存在的位置和范围，以及开放给用户的控制粒度 – Region &#x2F; Availability zone &#x2F; VPC
PaaS 服务是否有状态（数据属性）
PaaS 服务的虚拟机是否对外暴露
暴露虚拟机的 PaaS 服务，拥有更高的开放程度，与 IaaS 的结合也更加紧密，成本更低
不暴露虚拟机的 PaaS 服务，拥有更好的独立性和封装性 – 数据库服务



权衡
PaaS 的核心理念在于封装：封装提升了效率，但牺牲了灵活性

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/16/cloud-native-foundation-docker/" title="Cloud Native Foundation - Docker"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/docker/Docker-build.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Native Foundation - Docker"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/16/cloud-native-foundation-docker/" title="Cloud Native Foundation - Docker">Cloud Native Foundation - Docker</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-15T16:06:25.000Z" title="Created 2022-10-16 00:06:25">2022-10-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/docker/">Docker</a></span></div><div class="content">历史
基于 Linux 的 Namespace 、Cgroup和 Union FS，对进程进行封装隔离，属于 OS 层的虚拟化技术
Docker 最初的实现是基于 LXC
从 0.7 以后开始移除 LXC，而使用自研的 Libcontainer
从 1.11 开始，使用 runC 和 Containerd


Docker 在容器的基础上，进行进一步的封装，极大地简化容器的创建和维护



Docker vs VM



特性
Docker
VM



启动
秒级
分钟级


磁盘
MB
GB


性能
接近原生
弱于


数量
单机上千个容器
几十个


容器标准
OCI - Open Container Initiative




Key
Value



Image Specification
如何打包


Runtime Specification
如何解压应用包并运行


Distribution Specification
如何分发镜像


主要特性
隔离性（Namespace）、可配额（CGroup）、便携性（Union FS）、安全性

Namespace
Linux Namespace 是 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/15/cloud-computing-auto-scaling/" title="Cloud Computing - Auto scaling"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/AutoScalingGraphic.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - Auto scaling"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/15/cloud-computing-auto-scaling/" title="Cloud Computing - Auto scaling">Cloud Computing - Auto scaling</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-14T16:06:25.000Z" title="Created 2022-10-15 00:06:25">2022-10-15</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-computing/">Cloud Computing</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-computing/iaas/">IaaS</a></span></div><div class="content">Design for Failure
核心思路：冗余 + 快速切换


宿主机
保证多个虚拟机不在同一个宿主机上，甚至不处于同一个机架上
提供物理分散分布的能力：AWS（Placement Group）、Azure（Availability Set）、阿里云（部署集）


可用区 - IDC
多可用区的实例部署（VPC 支持跨可用区）


区域
多区架构层面的相关预案
互联网业务：通过 DNS 导流，将域名解析到另一个区域的备用服务，底层数据依赖日常的跨区域的实时同步


多云 - 避免厂商锁定



Auto scaling
应对工作负载洪峰 + 在低谷期显著降低成本

虚拟机编组
将功能相同的多个虚拟机，作为一个单位来创建、管理和伸缩


弹性伸缩服务
根据指定的数量和扩缩容的规则，动态地创建和销毁虚拟机实例，协调虚拟机的生命周期


负载均衡器 - SLB
将流量均匀地、或者按照一定权重或规则，分发到多台虚拟机上




弹性伸缩服务 + 负载均衡器：适合处理无状态类的计算需求

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/14/cloud-computing-virtual-network/" title="Cloud Computing - Virtual network"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/aws-vpc.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - Virtual network"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/14/cloud-computing-virtual-network/" title="Cloud Computing - Virtual network">Cloud Computing - Virtual network</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-13T16:06:25.000Z" title="Created 2022-10-14 00:06:25">2022-10-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-computing/">Cloud Computing</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-computing/iaas/">IaaS</a></span></div><div class="content">VPC
Virtual Private Cloud：构建在云上，相互隔离，用户可以自主控制的私有网络环境




概念
描述



网段
私有网络的内部 IP 区段，通常采用 CIDR 表达


子网
私有网络的下级网络结构，一个私有网络可以划分出多个子网，阿里云将子网称为交换机


路由表
定义私有网络内流量的路由规则，每个子网都必须有一张关联的路由表（自动创建默认路由表）


网关
是对进出私有网络的流量进行把守和分发的重要节点


安全组
私有网络内虚拟机进出流量的通行或拦截规则，相当于虚拟机外层的网络防火墙





VPC 属于局域网，VPC 创建成功后，网段无法修改，至少要创建一个子网（交换机）（网段也不能变更）


可以建立跨可用区的私有网络高可用：让主力集群在一个可用区工作，备用集群在另一个可用区随时待命，按需切换


关键：提前规划 VPC 和各子网的网段在没有 VPC 的情况下创建虚拟机，一般会自动生成 VPC – 生产慎用！

VM
VM 通过弹性网卡（Elastic network interface，ENI）来与 VPC 连接ENI 一方面与 VM 绑定，另一方面则嵌入到某个 VPC ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/13/cloud-computing-cloud-disk/" title="Cloud Computing - Cloud disk"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/940e9395-cloud-storage.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - Cloud disk"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/13/cloud-computing-cloud-disk/" title="Cloud Computing - Cloud disk">Cloud Computing - Cloud disk</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-12T16:06:25.000Z" title="Created 2022-10-13 00:06:25">2022-10-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-computing/">Cloud Computing</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-computing/iaas/">IaaS</a></span></div><div class="content">概念
云硬盘：云虚拟机可以挂载和使用的硬盘（系统盘 + 数据盘）
将云端磁盘服务称为块存储（Block Storage），与 Linux 中的块设备相对应，可以格式化并施加文件系统
数据持久化 （非易失性存储）：最少三副本，高可用，极少发生数据丢失
但不能完全依赖云硬盘的可靠性，应该进行额外的备份


云硬盘和传统硬盘的核心差异：绝大多数的云硬盘都是远程的 – 计算存储分离
在云端，虚拟机的硬盘大概率不在宿主机上，而是在专用的磁盘服务器阵列中
通过云数据中心内部的特有 IO 线路进行连接
IO 优化实例
对云虚拟机和云硬盘之间的网络传输，进行了软硬件层面的优化，进而充分发挥所挂载磁盘的性能







性能
性能指标：IOPS、吞吐量、访问延时等


最终性能受存储介质和容量大小共同影响

等级
存储介质

基于 HDD
性能一般，最高 IOPS 大概在数百左右，但成本低

基于 SSD / HDD
IOPS 在数千左右，通常为默认选项，综合发挥 SSD 的性能优势和 HDD 的容量优势

基于 SSD
IOPS 能够上万，有非常稳定的 IO 能力，用来承载关键业务或者数据库等 IO 密集型应用

基于 高 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/12/cloud-computing-vm/" title="Cloud Computing - Virtual machine"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/c2jc06l6fp3zzg52fl01.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - Virtual machine"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/12/cloud-computing-vm/" title="Cloud Computing - Virtual machine">Cloud Computing - Virtual machine</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-11T16:06:25.000Z" title="Created 2022-10-12 00:06:25">2022-10-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-computing/">Cloud Computing</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-computing/iaas/">IaaS</a></span></div><div class="content">体系结构
计算存储分离


传统虚拟化
对单一物理机器资源的纵向分割，计算、存储、网络等能力都是一台物理机的子集，可伸缩性有较大局限


云虚拟机
云端有大规模的专属硬件和高速的内部网络
除了核心的 CPU 和内存仍属于同一台宿主机外，硬盘和网络等可以享受云端的基础设施
在可扩展性（硬盘、网卡、公网 IP）和故障隔离方面，有很大优势
名称
阿里云：ECS - Elastic Compute Service
AWS：EC2 - Elastic Compute Cloud
Azure：Virtual Machines
腾讯云：CVM - Cloud Virtual Machine








网络安全组
Network Security Group


网络安全组：一层覆盖在虚拟机之外的网络防火墙，能够控制虚拟机入站流量和出站流量
网络安全组并不工作在 OS 层，是额外的一层防护，非法流量不会到达 OS 的网络堆栈，不会影响 VM 的性能
网络安全组是一种可复用的配置，可以同时应用于多个虚拟机，软件定义网络
网络安全组非常灵活，规则会动态生效

类型规格类型
具有同一类设计目的或者性能特点的虚拟机类别：通用均 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/11/cloud-native-foundation-go-io/" title="Cloud Native Foundation - Go IO"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/go/d3a039afd1ba2d00298f26b62c2a3624.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Native Foundation - Go IO"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/11/cloud-native-foundation-go-io/" title="Cloud Native Foundation - Go IO">Cloud Native Foundation - Go IO</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-10T16:06:25.000Z" title="Created 2022-10-11 00:06:25">2022-10-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/go/">Go</a></span></div><div class="content">阻塞 IO
阻塞：等待数据就绪


阻塞 + 同步




非阻塞 IO
非阻塞：等待数据就绪


轮询：效率不高


非阻塞 + 同步


IO 多路复用
（集中线程）阻塞 + 同步


当数据就绪后，集中线程会唤醒其他线程，阻塞的仅仅只是一个线程


select &#x2F; poll
通过传参的形式来轮询 fd 列表，长度有上限（1024）

epoll
通过 mmap 将用户态的内存和内核态的内存进行共享，不再需要传参，解决了 fd 长度受限的问题


基于事件侦听，而非轮询wq: wait queue, rdlist: ready list, rbr: red black tree



Go HTTP：goroutine 与 fd 绑定


异步 IO
非阻塞 + 异步


异步：拷贝数据（Socket 缓冲区 -&gt; 应用缓冲区）的过程也是由 Kernel 来完成


</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/10/cloud-native-foundation-go-gc/" title="Cloud Native Foundation - Go GC"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/go/v2-7ed5d9802d90c6b65cb02a212bb65068_720w.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Native Foundation - Go GC"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/10/cloud-native-foundation-go-gc/" title="Cloud Native Foundation - Go GC">Cloud Native Foundation - Go GC</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-09T16:06:25.000Z" title="Created 2022-10-10 00:06:25">2022-10-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/go/">Go</a></span></div><div class="content">Heap 管理

Allocator （向 OS 申请）初始化连续内存块作为 Heap
Mutator 申请内存，Allocator 从 Heap 中未分配的区域中分割小的内存块
用链表将已分配内存连接起来
内存块元数据：大小、是否使用、下一个内存块的地址
Collector 会扫描 Heap，将不再被使用的内存设置为 unused




内存分配TCMalloc
TC &#x3D; Thread Caching



page：内存页，大小为 8k，Go 与 OS 之间的内存申请和内存释放，都是以 page 为单位的
span：内存块，一个或者多个连续的 page 组成一个 span
sizeclass：空间规格，每个 span 都带有一个 sizeclass，标记着该 span 中的 page 该如何使用
sizeclass - 8，16，32，48，64，80 …


object：对象，用来存储一个变量数据的内存空间
span 在初始化时，会被切割成一堆等大的 object
如果 object 的大小为 16B，Span list 1 中的 span 为 8k，该 span 中的 page 会被初始 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/41/#content-inner">41</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">407</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">121</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">63</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/12/01/cloud-native-foundation-k8s-architectural-principles/" title="Kubernetes - Architectural principles"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/BLOG-Kubernets-1024x536.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Architectural principles"/></a><div class="content"><a class="title" href="/2022/12/01/cloud-native-foundation-k8s-architectural-principles/" title="Kubernetes - Architectural principles">Kubernetes - Architectural principles</a><time datetime="2022-11-30T16:06:25.000Z" title="Created 2022-12-01 00:06:25">2022-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/18/cloud-computing-object-storage/" title="Cloud Computing - Object storage"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/image-20230602173229918.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - Object storage"/></a><div class="content"><a class="title" href="/2022/10/18/cloud-computing-object-storage/" title="Cloud Computing - Object storage">Cloud Computing - Object storage</a><time datetime="2022-10-17T16:06:25.000Z" title="Created 2022-10-18 00:06:25">2022-10-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/17/cloud-computing-paas/" title="Cloud Computing - PaaS"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/PAAS-cover-min.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - PaaS"/></a><div class="content"><a class="title" href="/2022/10/17/cloud-computing-paas/" title="Cloud Computing - PaaS">Cloud Computing - PaaS</a><time datetime="2022-10-16T16:06:25.000Z" title="Created 2022-10-17 00:06:25">2022-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/16/cloud-native-foundation-docker/" title="Cloud Native Foundation - Docker"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/docker/Docker-build.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Native Foundation - Docker"/></a><div class="content"><a class="title" href="/2022/10/16/cloud-native-foundation-docker/" title="Cloud Native Foundation - Docker">Cloud Native Foundation - Docker</a><time datetime="2022-10-15T16:06:25.000Z" title="Created 2022-10-16 00:06:25">2022-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/15/cloud-computing-auto-scaling/" title="Cloud Computing - Auto scaling"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/AutoScalingGraphic.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - Auto scaling"/></a><div class="content"><a class="title" href="/2022/10/15/cloud-computing-auto-scaling/" title="Cloud Computing - Auto scaling">Cloud Computing - Auto scaling</a><time datetime="2022-10-14T16:06:25.000Z" title="Created 2022-10-15 00:06:25">2022-10-15</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/career/"><span class="card-category-list-name">Career</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/"><span class="card-category-list-name">Cloud Computing</span><span class="card-category-list-count">7</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/iaas/"><span class="card-category-list-name">IaaS</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/paas/"><span class="card-category-list-name">PaaS</span><span class="card-category-list-count">2</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/"><span class="card-category-list-name">Cloud Native</span><span class="card-category-list-count">80</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/"><span class="card-category-list-name">Cloud Native Foundation</span><span class="card-category-list-count">54</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/"><span class="card-category-list-name">Container</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">2</span></a></li></ul></li></ul></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/cloud-computing/" style="font-size: 1.22em; color: rgb(31, 41, 0)">Cloud Computing</a><a href="/tags/iaas/" style="font-size: 1.2em; color: rgb(28, 72, 74)">IaaS</a><a href="/tags/paas/" style="font-size: 1.16em; color: rgb(6, 29, 131)">PaaS</a><a href="/tags/cloud-native/" style="font-size: 1.44em; color: rgb(54, 121, 12)">Cloud Native</a><a href="/tags/container/" style="font-size: 1.29em; color: rgb(44, 100, 16)">Container</a><a href="/tags/docker/" style="font-size: 1.31em; color: rgb(199, 8, 3)">Docker</a><a href="/tags/go-core/" style="font-size: 1.17em; color: rgb(38, 109, 17)">Go Core</a><a href="/tags/go/" style="font-size: 1.35em; color: rgb(162, 81, 32)">Go</a><a href="/tags/go-engineering/" style="font-size: 1.32em; color: rgb(180, 74, 9)">Go Engineering</a><a href="/tags/rpc/" style="font-size: 1.16em; color: rgb(68, 104, 47)">RPC</a><a href="/tags/grpc/" style="font-size: 1.15em; color: rgb(172, 118, 16)">gRPC</a><a href="/tags/network/" style="font-size: 1.16em; color: rgb(134, 167, 109)">Network</a><a href="/tags/kubernetes/" style="font-size: 1.38em; color: rgb(129, 200, 14)">Kubernetes</a><a href="/tags/dockerfile/" style="font-size: 1.17em; color: rgb(27, 10, 52)">Dockerfile</a><a href="/tags/microservices/" style="font-size: 1.31em; color: rgb(186, 9, 51)">Microservices</a><a href="/tags/spring-cloud/" style="font-size: 1.22em; color: rgb(159, 104, 183)">Spring Cloud</a><a href="/tags/spring/" style="font-size: 1.26em; color: rgb(25, 49, 37)">Spring</a><a href="/tags/java/" style="font-size: 1.45em; color: rgb(49, 120, 45)">Java</a><a href="/tags/service-governance/" style="font-size: 1.17em; color: rgb(137, 176, 161)">Service Governance</a><a href="/tags/alibaba/" style="font-size: 1.24em; color: rgb(76, 130, 17)">Alibaba</a><a href="/tags/security/" style="font-size: 1.3em; color: rgb(48, 15, 100)">Security</a><a href="/tags/compliance/" style="font-size: 1.17em; color: rgb(78, 71, 23)">Compliance</a><a href="/tags/opa/" style="font-size: 1.17em; color: rgb(48, 158, 97)">OPA</a><a href="/tags/computer-basics/" style="font-size: 1.36em; color: rgb(161, 139, 114)">Computer Basics</a><a href="/tags/computer-organization/" style="font-size: 1.36em; color: rgb(98, 53, 56)">Computer Organization</a><a href="/tags/knowledge-map/" style="font-size: 1.15em; color: rgb(138, 61, 109)">Knowledge Map</a><a href="/tags/architecture/" style="font-size: 1.3em; color: rgb(125, 17, 29)">Architecture</a><a href="/tags/devops/" style="font-size: 1.15em; color: rgb(71, 143, 131)">DevOps</a><a href="/tags/tool/" style="font-size: 1.25em; color: rgb(90, 127, 45)">Tool</a><a href="/tags/git/" style="font-size: 1.25em; color: rgb(45, 7, 164)">Git</a><a href="/tags/infrastructure/" style="font-size: 1.29em; color: rgb(73, 63, 48)">Infrastructure</a><a href="/tags/authentication/" style="font-size: 1.17em; color: rgb(87, 19, 94)">Authentication</a><a href="/tags/ldap/" style="font-size: 1.15em; color: rgb(199, 108, 174)">LDAP</a><a href="/tags/oauth-2-0/" style="font-size: 1.22em; color: rgb(26, 80, 173)">OAuth 2.0</a><a href="/tags/storage/" style="font-size: 1.41em; color: rgb(100, 45, 94)">Storage</a><a href="/tags/mysql/" style="font-size: 1.42em; color: rgb(11, 197, 109)">MySQL</a><a href="/tags/innodb/" style="font-size: 1.21em; color: rgb(190, 20, 21)">InnoDB</a><a href="/tags/java-concurrent/" style="font-size: 1.39em; color: rgb(9, 89, 127)">Java Concurrent</a><a href="/tags/actor/" style="font-size: 1.15em; color: rgb(105, 12, 38)">Actor</a><a href="/tags/akka/" style="font-size: 1.15em; color: rgb(170, 65, 39)">Akka</a><a href="/tags/coroutine/" style="font-size: 1.16em; color: rgb(193, 24, 61)">Coroutine</a><a href="/tags/csp/" style="font-size: 1.15em; color: rgb(63, 53, 120)">CSP</a><a href="/tags/disruptor/" style="font-size: 1.15em; color: rgb(101, 72, 36)">Disruptor</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(90, 151, 134)">Netty</a><a href="/tags/stm/" style="font-size: 1.15em; color: rgb(147, 130, 19)">STM</a><a href="/tags/mvcc/" style="font-size: 1.15em; color: rgb(19, 179, 172)">MVCC</a><a href="/tags/java-core/" style="font-size: 1.22em; color: rgb(121, 38, 120)">Java Core</a><a href="/tags/java-performance/" style="font-size: 1.34em; color: rgb(124, 145, 104)">Java Performance</a><a href="/tags/cas/" style="font-size: 1.15em; color: rgb(114, 192, 145)">CAS</a><a href="/tags/hashtable/" style="font-size: 1.15em; color: rgb(39, 49, 95)">HashTable</a><a href="/tags/concurrenthashmap/" style="font-size: 1.15em; color: rgb(171, 12, 156)">ConcurrentHashMap</a><a href="/tags/concurrentskiplistmap/" style="font-size: 1.15em; color: rgb(32, 44, 88)">ConcurrentSkipListMap</a><a href="/tags/design-pattern/" style="font-size: 1.19em; color: rgb(5, 170, 51)">Design Pattern</a><a href="/tags/consistency/" style="font-size: 1.15em; color: rgb(72, 51, 109)">Consistency</a><a href="/tags/hashmap/" style="font-size: 1.15em; color: rgb(45, 21, 79)">HashMap</a><a href="/tags/io/" style="font-size: 1.15em; color: rgb(122, 101, 17)">IO</a><a href="/tags/nio/" style="font-size: 1.16em; color: rgb(35, 154, 192)">NIO</a><a href="/tags/aio/" style="font-size: 1.16em; color: rgb(177, 58, 191)">AIO</a><a href="/tags/epoll/" style="font-size: 1.16em; color: rgb(125, 34, 99)">Epoll</a><a href="/tags/jvm/" style="font-size: 1.38em; color: rgb(152, 150, 5)">JVM</a><a href="/tags/gc/" style="font-size: 1.16em; color: rgb(198, 161, 77)">GC</a><a href="/tags/synchronized/" style="font-size: 1.16em; color: rgb(35, 171, 155)">synchronized</a><a href="/tags/lock/" style="font-size: 1.15em; color: rgb(53, 23, 159)">Lock</a><a href="/tags/reentrantreadwritelock/" style="font-size: 1.15em; color: rgb(58, 127, 65)">ReentrantReadWriteLock</a><a href="/tags/stampedlock/" style="font-size: 1.15em; color: rgb(132, 156, 49)">StampedLock</a><a href="/tags/jit/" style="font-size: 1.15em; color: rgb(146, 131, 174)">JIT</a><a href="/tags/serialization/" style="font-size: 1.15em; color: rgb(148, 161, 54)">Serialization</a><a href="/tags/protobuf/" style="font-size: 1.15em; color: rgb(64, 59, 74)">ProtoBuf</a><a href="/tags/java-stream/" style="font-size: 1.15em; color: rgb(73, 30, 148)">Java Stream</a><a href="/tags/mark-word/" style="font-size: 1.15em; color: rgb(145, 97, 40)">Mark Word</a><a href="/tags/monitor/" style="font-size: 1.15em; color: rgb(51, 23, 59)">Monitor</a><a href="/tags/context-switch/" style="font-size: 1.15em; color: rgb(168, 187, 75)">Context Switch</a><a href="/tags/thread-pool/" style="font-size: 1.15em; color: rgb(83, 76, 43)">Thread Pool</a><a href="/tags/lambda/" style="font-size: 1.15em; color: rgb(118, 113, 193)">Lambda</a><a href="/tags/bytecode-manipulation/" style="font-size: 1.17em; color: rgb(157, 118, 147)">Bytecode Manipulation</a><a href="/tags/asm/" style="font-size: 1.15em; color: rgb(161, 35, 35)">ASM</a><a href="/tags/jol/" style="font-size: 1.17em; color: rgb(165, 131, 88)">JOL</a><a href="/tags/middleware/" style="font-size: 1.4em; color: rgb(83, 51, 78)">Middleware</a><a href="/tags/mq/" style="font-size: 1.4em; color: rgb(91, 169, 64)">MQ</a><a href="/tags/kafka/" style="font-size: 1.4em; color: rgb(37, 142, 37)">Kafka</a><a href="/tags/stream/" style="font-size: 1.4em; color: rgb(26, 116, 126)">Stream</a><a href="/tags/avro/" style="font-size: 1.19em; color: rgb(32, 50, 30)">Avro</a><a href="/tags/rebalance/" style="font-size: 1.17em; color: rgb(124, 80, 35)">Rebalance</a><a href="/tags/compression/" style="font-size: 1.15em; color: rgb(69, 124, 136)">Compression</a><a href="/tags/tcp/" style="font-size: 1.16em; color: rgb(101, 166, 0)">TCP</a><a href="/tags/consumer-group/" style="font-size: 1.15em; color: rgb(154, 171, 0)">Consumer Group</a><a href="/tags/idempotence/" style="font-size: 1.15em; color: rgb(49, 190, 36)">Idempotence</a><a href="/tags/producer/" style="font-size: 1.15em; color: rgb(6, 113, 197)">Producer</a><a href="/tags/load-balance/" style="font-size: 1.15em; color: rgb(108, 166, 197)">Load Balance</a><a href="/tags/distributed-architecture/" style="font-size: 1.15em; color: rgb(67, 122, 0)">Distributed Architecture</a><a href="/tags/distributed-design-pattern/" style="font-size: 1.17em; color: rgb(77, 145, 88)">Distributed Design Pattern</a><a href="/tags/career/" style="font-size: 1.15em; color: rgb(186, 30, 190)">Career</a><a href="/tags/linux/" style="font-size: 1.3em; color: rgb(15, 133, 54)">Linux</a><a href="/tags/linux-performance/" style="font-size: 1.17em; color: rgb(182, 84, 101)">Linux Performance</a><a href="/tags/linux-practice/" style="font-size: 1.27em; color: rgb(73, 78, 170)">Linux Practice</a><a href="/tags/ext4/" style="font-size: 1.15em; color: rgb(133, 32, 195)">ext4</a><a href="/tags/file-system/" style="font-size: 1.15em; color: rgb(32, 4, 149)">File System</a><a href="/tags/math/" style="font-size: 1.16em; color: rgb(187, 45, 112)">Math</a><a href="/tags/microservices-governance/" style="font-size: 1.24em; color: rgb(112, 120, 115)">Microservices Governance</a><a href="/tags/config/" style="font-size: 1.17em; color: rgb(192, 49, 98)">Config</a><a href="/tags/configuration-center/" style="font-size: 1.17em; color: rgb(76, 43, 199)">Configuration Center</a><a href="/tags/apollo/" style="font-size: 1.17em; color: rgb(194, 126, 42)">Apollo</a><a href="/tags/oauth2/" style="font-size: 1.21em; color: rgb(28, 59, 191)">Oauth2</a><a href="/tags/spring-security/" style="font-size: 1.2em; color: rgb(68, 79, 174)">Spring Security</a><a href="/tags/spring-security-oauth2/" style="font-size: 1.2em; color: rgb(149, 31, 105)">Spring Security OAuth2</a><a href="/tags/vim/" style="font-size: 1.21em; color: rgb(72, 121, 75)">Vim</a><a href="/tags/web/" style="font-size: 1.22em; color: rgb(117, 139, 109)">Web</a><a href="/tags/javascript/" style="font-size: 1.2em; color: rgb(109, 108, 82)">JavaScript</a><a href="/tags/zookeeper/" style="font-size: 1.16em; color: rgb(60, 123, 100)">Zookeeper</a><a href="/tags/distributed-lock/" style="font-size: 1.15em; color: rgb(66, 29, 117)">Distributed Lock</a><a href="/tags/jwt/" style="font-size: 1.15em; color: rgb(140, 156, 177)">JWT</a><a href="/tags/bio/" style="font-size: 1.15em; color: rgb(126, 28, 144)">BIO</a><a href="/tags/tomcat/" style="font-size: 1.15em; color: rgb(59, 81, 181)">Tomcat</a><a href="/tags/select/" style="font-size: 1.15em; color: rgb(195, 66, 134)">Select</a><a href="/tags/poll/" style="font-size: 1.15em; color: rgb(45, 192, 43)">Poll</a><a href="/tags/zero-copy/" style="font-size: 1.15em; color: rgb(48, 38, 44)">Zero Copy</a><a href="/tags/mmap/" style="font-size: 1.15em; color: rgb(181, 159, 153)">mmap</a><a href="/tags/reactor/" style="font-size: 1.15em; color: rgb(49, 107, 66)">Reactor</a><a href="/tags/zab/" style="font-size: 1.15em; color: rgb(40, 109, 106)">ZAB</a><a href="/tags/cloud-native-foundation/" style="font-size: 1.16em; color: rgb(20, 20, 26)">Cloud Native Foundation</a><a href="/tags/performance-tuning/" style="font-size: 1.15em; color: rgb(64, 24, 79)">Performance Tuning</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">December 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">October 2022</span><span class="card-archive-list-count">18</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">September 2022</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">July 2022</span><span class="card-archive-list-count">18</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">May 2022</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">April 2022</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">March 2022</span><span class="card-archive-list-count">13</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">February 2022</span><span class="card-archive-list-count">8</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">407</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2015-06-30T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">611.7k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-06-04T10:18:40.332Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2023 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Stay hungry, stay foolish."])
  } else {
    document.getElementById("subtitle").innerHTML = 'Stay hungry, stay foolish.'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>