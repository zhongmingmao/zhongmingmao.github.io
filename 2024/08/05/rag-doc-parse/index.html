<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>RAG - Document Parsing | ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="文档解析 文档解析的本质 - 将格式各异、版本多样、元素多种的文档数据，转化为阅读顺序正确的字符串信息 Quality in, Quality out 是 LLM 的典型特征 高质量的文档解析能够从各种复杂格式的非结构化数据中提取出高精度信息 对 RAG 系统的最终效果起到决定性作用   RAG 系统的应用场景主要集中在专业领域和企业场景 除了数据库，更多的数据以 PDF、Word 等多种格式存储">
<meta property="og:type" content="article">
<meta property="og:title" content="RAG - Document Parsing">
<meta property="og:url" content="https://blog.zhongmingmao.top/2024/08/05/rag-doc-parse/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="文档解析 文档解析的本质 - 将格式各异、版本多样、元素多种的文档数据，转化为阅读顺序正确的字符串信息 Quality in, Quality out 是 LLM 的典型特征 高质量的文档解析能够从各种复杂格式的非结构化数据中提取出高精度信息 对 RAG 系统的最终效果起到决定性作用   RAG 系统的应用场景主要集中在专业领域和企业场景 除了数据库，更多的数据以 PDF、Word 等多种格式存储">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/image-20240830092249777.png">
<meta property="article:published_time" content="2024-08-04T16:06:25.000Z">
<meta property="article:modified_time" content="2024-08-30T08:51:37.864Z">
<meta property="article:author" content="zhongmingmao">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="LLM">
<meta property="article:tag" content="RAG">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/image-20240830092249777.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "RAG - Document Parsing",
  "url": "https://blog.zhongmingmao.top/2024/08/05/rag-doc-parse/",
  "image": "https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/image-20240830092249777.png",
  "datePublished": "2024-08-04T16:06:25.000Z",
  "dateModified": "2024-08-30T08:51:37.864Z",
  "author": [
    {
      "@type": "Person",
      "name": "zhongmingmao",
      "url": "https://blog.zhongmingmao.top"
    }
  ]
}</script><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/2024/08/05/rag-doc-parse/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'RAG - Document Parsing',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg" style="background-image: url(/url(https:/cdn.pixabay.com/photo/2021/07/20/03/39/fisherman-6479663_1280.jpg));"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">640</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">191</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">83</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/image-20240830092249777.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">ByteCoding</span></a><a class="nav-page-title" href="/"><span class="site-name">RAG - Document Parsing</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">RAG - Document Parsing</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">Created</span><time datetime="2024-08-04T16:06:25.000Z" title="Created 2024-08-05 00:06:25">2024-08-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ai/">AI</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ai/rag/">RAG</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">1.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>6mins</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:512,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2024-08-30 16:51:37&quot;}" hidden></div><h1 id="文档解析"><a href="#文档解析" class="headerlink" title="文档解析"></a>文档解析</h1><ol>
<li>文档解析的本质 - 将<strong>格式各异</strong>、<strong>版本多样</strong>、<strong>元素多种</strong>的文档数据，转化为<strong>阅读顺序正确</strong>的<strong>字符串</strong>信息</li>
<li><strong>Quality in, Quality out</strong> 是 LLM 的典型特征<ul>
<li><strong>高质量</strong>的文档解析能够从各种<strong>复杂格式</strong>的<strong>非结构化</strong>数据中提取出<strong>高精度信息</strong></li>
<li>对 RAG 系统的<strong>最终效果</strong>起到<strong>决定性</strong>作用</li>
</ul>
</li>
<li>RAG 系统的应用场景主要集中在<strong>专业领域</strong>和<strong>企业场景</strong><ul>
<li>除了<strong>数据库</strong>，更多的数据以 PDF、Word 等<strong>多种格式</strong>存储</li>
<li><strong>PDF</strong> 文件有统一的排版和多样化的结构形式，是<strong>最为常见</strong>的文档数据格式和交换格式</li>
</ul>
</li>
</ol>
<span id="more"></span>

<blockquote>
<p>Quality in, Quality out</p>
</blockquote>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/image-20240830100414954.png" alt="image-20240830100414954"></p>
<h1 id="LangChain"><a href="#LangChain" class="headerlink" title="LangChain"></a>LangChain</h1><h2 id="Document-Loaders"><a href="#Document-Loaders" class="headerlink" title="Document Loaders"></a>Document Loaders</h2><ol>
<li>LangChain 提供了一套功能强大的<strong>文档加载器</strong>（Document Loaders）</li>
<li>LangChain 定义了 BaseLoader 类和 Document 类<ul>
<li>BaseLoader - 定义如何从不同<strong>数据源</strong>加载文档</li>
<li>Document - 统一描述不同文档类型的<strong>元数据</strong></li>
</ul>
</li>
<li>开发者可以基于 BaseLoader 为特定数据源创建自定义加载器，将其内容加载为 Document 对象</li>
<li>Document Loader 模块是封装好的各种文档解析库<strong>集成 SDK</strong>，需要<strong>安装</strong>对应的<strong>文档解析库</strong></li>
<li>在实际研发场景中，需要根据具体的业务需求编写自定义的文档<strong>后处理</strong>逻辑</li>
</ol>
<table>
<thead>
<tr>
<th>Type</th>
<th>Document Loader</th>
<th>Library</th>
<th>App</th>
</tr>
</thead>
<tbody><tr>
<td>.pdf</td>
<td>PDFPlumberLoader</td>
<td>pdfplumber</td>
<td></td>
</tr>
<tr>
<td>.txt</td>
<td>TextLoader</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>.doc</td>
<td>UnstructuredWordDocumentLoader</td>
<td>unstructured python-docx</td>
<td>libreoffice</td>
</tr>
<tr>
<td>.docx</td>
<td>UnstructuredWordDocumentLoader</td>
<td>unstructured python-docx</td>
<td></td>
</tr>
<tr>
<td>.ppt</td>
<td>UnstructuredPowerPointLoader</td>
<td>unstructured python-pptx</td>
<td></td>
</tr>
<tr>
<td>.pptx</td>
<td>UnstructuredPowerPointLoader</td>
<td>unstructured python-pptx</td>
<td></td>
</tr>
<tr>
<td>.xlsx</td>
<td>UnstructuredExcelLoader</td>
<td>unstructured openpyx</td>
<td></td>
</tr>
<tr>
<td>.csv</td>
<td>CSVLoader</td>
<td>pandas</td>
<td></td>
</tr>
<tr>
<td>.md</td>
<td>UnstructuredMarkdownLoader</td>
<td>unstructured markdown</td>
<td></td>
</tr>
<tr>
<td>.xml</td>
<td>UnstructuredXMLLoader</td>
<td>unstructured Ixml</td>
<td></td>
</tr>
<tr>
<td>.html</td>
<td>UnstructuredHTMLLoader</td>
<td>unstructured Ixml</td>
<td></td>
</tr>
</tbody></table>
<blockquote>
<p>Library</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install unstructured pdfplumber python-docx python-pptx markdown openpyxl pandas</span><br></pre></td></tr></table></figure>

<blockquote>
<p>App</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install libreoffice</span><br><span class="line">$ brew install libreoffice</span><br></pre></td></tr></table></figure>

<h2 id="LangChain-Community"><a href="#LangChain-Community" class="headerlink" title="LangChain Community"></a>LangChain Community</h2><ol>
<li>LangChain Community 是 LangChain 与常用第三方库集成的拓展库</li>
<li>langchain_community.document_loaders<ul>
<li>各类开源库和企业库基于 BaseLoader 扩展了<strong>不同文档类型</strong>的加载器</li>
<li>覆盖了本地文件、云端文件、数据库、互联网平台、Web 服务等多种数据源</li>
</ul>
</li>
</ol>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/2a85d51a7cf45dedf05fafc4488bb712.png.webp" alt="2a85d51a7cf45dedf05fafc4488bb712.png"></p>
<h1 id="加载文档"><a href="#加载文档" class="headerlink" title="加载文档"></a>加载文档</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> (</span><br><span class="line">    PDFPlumberLoader,</span><br><span class="line">    TextLoader,</span><br><span class="line">    UnstructuredWordDocumentLoader,</span><br><span class="line">    UnstructuredPowerPointLoader,</span><br><span class="line">    UnstructuredExcelLoader,</span><br><span class="line">    CSVLoader,</span><br><span class="line">    UnstructuredMarkdownLoader,</span><br><span class="line">    UnstructuredXMLLoader,</span><br><span class="line">    UnstructuredHTMLLoader,</span><br><span class="line">)  <span class="comment"># 从 langchain_community.document_loaders 模块中导入各种文档加载器类</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义文档解析加载器字典，根据文档类型选择对应的文档解析加载器类和输入参数</span></span><br><span class="line">DOCUMENT_LOADER_MAPPING = &#123;</span><br><span class="line">    <span class="string">&quot;.pdf&quot;</span>: (PDFPlumberLoader, &#123;&#125;),</span><br><span class="line">    <span class="string">&quot;.txt&quot;</span>: (TextLoader, &#123;<span class="string">&quot;encoding&quot;</span>: <span class="string">&quot;utf8&quot;</span>&#125;),</span><br><span class="line">    <span class="string">&quot;.doc&quot;</span>: (UnstructuredWordDocumentLoader, &#123;&#125;),</span><br><span class="line">    <span class="string">&quot;.docx&quot;</span>: (UnstructuredWordDocumentLoader, &#123;&#125;),</span><br><span class="line">    <span class="string">&quot;.ppt&quot;</span>: (UnstructuredPowerPointLoader, &#123;&#125;),</span><br><span class="line">    <span class="string">&quot;.pptx&quot;</span>: (UnstructuredPowerPointLoader, &#123;&#125;),</span><br><span class="line">    <span class="string">&quot;.xlsx&quot;</span>: (UnstructuredExcelLoader, &#123;&#125;),</span><br><span class="line">    <span class="string">&quot;.csv&quot;</span>: (CSVLoader, &#123;&#125;),</span><br><span class="line">    <span class="string">&quot;.md&quot;</span>: (UnstructuredMarkdownLoader, &#123;&#125;),</span><br><span class="line">    <span class="string">&quot;.xml&quot;</span>: (UnstructuredXMLLoader, &#123;&#125;),</span><br><span class="line">    <span class="string">&quot;.html&quot;</span>: (UnstructuredHTMLLoader, &#123;&#125;),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_document</span>(<span class="params">file_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    解析多种文档格式的文件，返回文档内容字符串</span></span><br><span class="line"><span class="string">    :param file_path: 文档文件路径</span></span><br><span class="line"><span class="string">    :return: 返回文档内容的字符串</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    ext = os.path.splitext(file_path)[<span class="number">1</span>]  <span class="comment"># 获取文件扩展名，确定文档类型</span></span><br><span class="line">    loader_tuple = DOCUMENT_LOADER_MAPPING.get(ext)  <span class="comment"># 获取文档对应的文档解析加载器类和参数元组</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> loader_tuple:  <span class="comment"># 判断文档格式是否在加载器支持范围</span></span><br><span class="line">        loader_class, loader_args = loader_tuple  <span class="comment"># 解包元组，获取文档解析加载器类和参数</span></span><br><span class="line">        loader = loader_class(file_path, **loader_args)  <span class="comment"># 创建文档解析加载器实例，并传入文档文件路径</span></span><br><span class="line">        documents = loader.load()  <span class="comment"># 加载文档</span></span><br><span class="line">        content = <span class="string">&quot;\n&quot;</span>.join([doc.page_content <span class="keyword">for</span> doc <span class="keyword">in</span> documents])  <span class="comment"># 多页文档内容组合为字符串</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;文档 <span class="subst">&#123;file_path&#125;</span> 的部分内容为: <span class="subst">&#123;content[:<span class="number">100</span>]&#125;</span>...&quot;</span>)  <span class="comment"># 仅用来展示文档内容前100个字符</span></span><br><span class="line">        <span class="keyword">return</span> content  <span class="comment"># 返回文档内容的字符串</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(file_path + <span class="string">f&quot;，不支持的文档类型: &#x27;<span class="subst">&#123;ext&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>解析多种文档格式并返回文档内容的字符串</li>
<li>检查文件的扩展名 ext，并<strong>动态选择</strong>合适的 Document Loader<ul>
<li><strong>实例化</strong>对应的 Document Loader，并调用对应<strong>文档解析库</strong>读取文档内容</li>
</ul>
</li>
<li>将文档内容加载为<strong>字符串</strong> - 合并多页文档</li>
</ol>
<h1 id="PDF"><a href="#PDF" class="headerlink" title="PDF"></a>PDF</h1><h2 id="PDF-vs-MarkDown"><a href="#PDF-vs-MarkDown" class="headerlink" title="PDF vs MarkDown"></a>PDF vs MarkDown</h2><ol>
<li>PDF<ul>
<li>显示效果不受设备、软件和系统的影响</li>
<li>一系列<strong>显示打印指令</strong>的集合，<strong>非数据结构化</strong>格式，存储的信息无法被计算机直接理解</li>
<li>在 <strong>LLM</strong> 的<strong>训练数据</strong>中<strong>不包含</strong>直接的 PDF 文件，<strong>无法直接理解</strong></li>
</ul>
</li>
<li>MarkDown<ul>
<li>关注<strong>内容</strong>而非打印格式，能够表示多种<strong>文档元素</strong></li>
<li>PDF 转换为 MarkDown 最为合适，能够被 LLM 理解</li>
</ul>
</li>
</ol>
<h2 id="电子版-vs-扫描版"><a href="#电子版-vs-扫描版" class="headerlink" title="电子版 vs 扫描版"></a>电子版 vs 扫描版</h2><blockquote>
<p>电子版</p>
</blockquote>
<ol>
<li>电子版可以通过<strong>规则</strong>解析 - 提取出<strong>文本</strong>、<strong>表格</strong>等文档元素</li>
<li>开源库 - pyPDF2 &#x2F; PyMuPDF &#x2F; <strong>pdfminer</strong> &#x2F; <strong>pdfplumber</strong> &#x2F; papermage &#x2F; …<ul>
<li><strong>pdfplumber</strong> - 对<strong>中文</strong>支持<strong>良好</strong>，但<strong>表格</strong>解析效果<strong>较弱</strong></li>
<li><strong>pyPDF2</strong> - 对<strong>英文</strong>支持<strong>较好</strong>，但<strong>中文</strong>支持<strong>较差</strong></li>
<li><strong>papermage</strong> - 集成了 <strong>pdfminer</strong> 和其它工具，适合于处理<strong>论文</strong>场景</li>
</ul>
</li>
</ol>
<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/2ce37e8a03fa9170abd06f7673d3878f.png" alt="2ce37e8a03fa9170abd06f7673d3878f"></p>
<blockquote>
<p>扫描版</p>
</blockquote>
<ol>
<li>需要经过<strong>文本识别</strong>和<strong>表格识别</strong>，才能提取出文档中各类元素</li>
</ol>
<h2 id="文档解析-1"><a href="#文档解析-1" class="headerlink" title="文档解析"></a>文档解析</h2><h3 id="Deep-Learning"><a href="#Deep-Learning" class="headerlink" title="Deep Learning"></a>Deep Learning</h3><ol>
<li>要实现<strong>真正</strong>的文档解析，还需要进行<strong>版面分析</strong>和<strong>还原阅读顺序</strong></li>
<li>将内容解析为一个<strong>包含所有文档元素</strong>并具有<strong>正确阅读顺序</strong>的 MarkDown 文件</li>
<li>只依赖<strong>规则</strong>解析无法实现这一点 - 基于<strong>深度学习</strong>的开源库<ul>
<li>Layout-parser &#x2F; PP-StructureV2 &#x2F; PDF-Extract-Kit &#x2F; pix2text &#x2F; MinerU &#x2F; marker &#x2F; Gptpdf &#x2F;…</li>
<li>由于<strong>深度学习模型</strong>的<strong>部署复杂性</strong>以及<strong>算力要求</strong>，尚未集成在 LangChain Community 中 - 独立部署</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th>Model</th>
<th>Desc</th>
<th>Starts</th>
<th>Link</th>
</tr>
</thead>
<tbody><tr>
<td>LayoutParser</td>
<td>版面分析工具包<br />布局检测、OCR 识别、布局分析</td>
<td>4.7K</td>
<td><a target="_blank" rel="noopener" href="https://github.com/Layout-Parser/layout-parser">https://github.com/Layout-Parser/layout-parser</a></td>
</tr>
<tr>
<td>PP-StructureV2</td>
<td>百度开源项目<br />文字识别、表格识别、版面还原</td>
<td>42.2K</td>
<td><a target="_blank" rel="noopener" href="https://github.com/PaddlePaddle/PaddleOCR">https://github.com/PaddlePaddle/PaddleOCR</a></td>
</tr>
<tr>
<td>PDF-Extract-Kit</td>
<td>LayoutLMv3 - 布局检测<br />YOLOv8 - 公式检测<br />UniMERNet - 公式识别<br />PaddleOCR - 文字识别</td>
<td>4.5K</td>
<td><a target="_blank" rel="noopener" href="https://github.com/opendatalab/PDF-Extract-Kit">https://github.com/opendatalab/PDF-Extract-Kit</a></td>
</tr>
<tr>
<td>pix2text</td>
<td>数学公式检测能力很突出，Mathpix 平替</td>
<td>1.7K</td>
<td><a target="_blank" rel="noopener" href="https://github.com/breezedeus/Pix2Text">https://github.com/breezedeus/Pix2Text</a></td>
</tr>
<tr>
<td>MinerU</td>
<td>上海人工智能实验室<br />支持多格式、高精度解析、支持多种语言</td>
<td>10.3K</td>
<td><a target="_blank" rel="noopener" href="https://github.com/opendatalab/MinerU">https://github.com/opendatalab/MinerU</a></td>
</tr>
<tr>
<td>marker</td>
<td>对书籍和科学论文进行了优化</td>
<td>16K</td>
<td><a target="_blank" rel="noopener" href="https://github.com/VikParuchuri/marker">https://github.com/VikParuchuri/marker</a></td>
</tr>
<tr>
<td>Gptpdf</td>
<td>基于 GPT-4o，每页解析成本为 $0.013</td>
<td>2.7K</td>
<td><a target="_blank" rel="noopener" href="https://github.com/CosmosShadow/gptpdf">https://github.com/CosmosShadow/gptpdf</a></td>
</tr>
</tbody></table>
<h3 id="Paid"><a href="#Paid" class="headerlink" title="Paid"></a>Paid</h3><blockquote>
<p>风险 - 信息泄露</p>
</blockquote>
<ol>
<li>由于 PDF 文档解析流程用到了多个 <strong>Deep Learning 模型组合</strong>，在生产场景中会遇到<strong>效率</strong>问题</li>
<li>商业闭源库部署在云端，可以做到<strong>并行处理</strong>和<strong>工程效率优化</strong>，在<strong>精度</strong>和<strong>效率</strong>上可以做到<strong>生产级别</strong><ul>
<li><a target="_blank" rel="noopener" href="https://www.textin.com/">https://www.textin.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://doc2x.noedgeai.com/">https://doc2x.noedgeai.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://mathpix.com/">https://mathpix.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://pdflux.com/">https://pdflux.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/documentocr">https://cloud.tencent.com/product/documentocr</a></li>
</ul>
</li>
</ol>
<h2 id="多模态"><a href="#多模态" class="headerlink" title="多模态"></a>多模态</h2><ol>
<li>需要进一步探索 PDF 中的<strong>图像内容理解</strong></li>
<li>不仅限于<strong>文字</strong>模态，还包括对图片中<strong>非文字</strong>内容的解析，也可能包含重要内容<ul>
<li>将这些内容转换为<strong>文字</strong>形式并嵌入到 <strong>MarkDown</strong> 文件中</li>
<li>通常依赖于<strong>端到端</strong>的<strong>多模态 LLM</strong> - <strong>GPT-4o &#x2F; Gemini</strong> - <strong>成本 &#x2F; 效率</strong></li>
</ul>
</li>
</ol>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css"></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://blog.zhongmingmao.top">zhongmingmao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://blog.zhongmingmao.top/2024/08/05/rag-doc-parse/">https://blog.zhongmingmao.top/2024/08/05/rag-doc-parse/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ai/">AI</a><a class="post-meta__tags" href="/tags/llm/">LLM</a><a class="post-meta__tags" href="/tags/rag/">RAG</a></div><div class="post-share"><div class="social-share" data-image="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/image-20240830092249777.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/08/06/rag-methodology/" title="RAG - Methodology"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/rag-value.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">RAG - Methodology</div></div><div class="info-2"><div class="info-item-1">场景识别 分析业务流程，找出业务中依赖大量知识和信息处理的环节   复杂决策环节 在需要多维度信息综合分析与判断的业务流程中，RAG 可以为决策者提供实时的信息支持 使用 LLM 从各种来源的信息提炼出关键点，加权求和 - 压缩和整理非格式化信息   重复性内容生成 企业中有大量重复且标准化的内容生成任务 可以用程序去归纳流程，用 LLM 和 RAG 去填充每个环节   用户交互场景 增加自然语言交互       识别问题，找出流程痛点，并识别 LLM 和 RAG 能发挥的作用   信息碎片化 + 难以系统化输出 使用 LLM 和 RAG 能够通过自动化整合固定信息源，定期获取信息 统一整理（或生成）到统一的知识库，将分散的知识转化为结构化输出   人工处理效率低下 通过 LLM 自动化任务，可以更专注于更有创造力的工作     小步快跑 + 快速迭代 - LLM 技术变化极快   MVP Minimum viable product   数据驱动的迭代优化 持续收集用户行为数据和反馈，通过 A&#x2F;B 测试等方法，不断优化系统表现    </div></div></div></a><a class="pagination-related" href="/2024/08/04/rag-langchain/" title="RAG - LangChain"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/rag-agent.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">RAG - LangChain</div></div><div class="info-2"><div class="info-item-1">Practice   LangChain RAG https://github.com/langchain-ai/rag-from-scratch   RAG 如何随着长期 LLM 而改变 Is RAG Really Dead? https://www.youtube.com/watch?v=SsHUNfhF32s     自适应 RAG 根据复杂程度动态地将查询路由到不同的 RAG 方法 - Command-R @ LangGraph Adaptive RAG https://www.youtube.com/watch?v=04ighIjMcAI   Code https://github.com/langchain-ai/langgraph/blob/main/examples/rag/langgraph_adaptive_rag_cohere.ipynb   Paper https://arxiv.org/abs/2403.14403     Adaptive RAG 在循环单元测试中自我纠正检索错误，以确定文档相关性并返回到网络搜索 在 LangGraph 中实现 Mistral 7B + Ol...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/09/09/rag-vector-qdrant/" title="RAG - Qdrant"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/qdrant.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-09</div><div class="info-item-2">RAG - Qdrant</div></div><div class="info-2"><div class="info-item-1">Features   Getting StartedIntroduction Vector databases are a relatively new way for interacting with abstract data representations derived from opaque machine learning models such as deep learning architectures. These representations are often called vectors or embeddings and they are a compressed version of the data used to train a machine learning model to accomplish a task like sentiment analysis, speech recognition, object detection, and many others.  What is Qdrant? Qdrant “is a vector similarity s...</div></div></div></a><a class="pagination-related" href="/2024/08/17/rag-graphrag/" title="RAG - GraphRAG"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/graphrag-9781829.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-17</div><div class="info-item-2">RAG - GraphRAG</div></div><div class="info-2"><div class="info-item-1">向量检索 信息片段之间的连接能力有限   RAG 在跨越多个信息片段以获取综合见解时表现不足 当要回答一个复杂问题时，必须要通过共享属性在不同信息之间建立联系 RAG 无法有效捕捉这些关系 限制了 RAG 在处理需要多跳推理或整合多源数据的复杂查询时的能力       归纳总结能力不足   在处理大型数据集或长文档时，RAG 难以有效地归纳和总结复杂的语义概念 RAG 在需要全面理解和总结复杂语义信息的场景中表现不佳  GraphRAG 利用 LLM 生成的知识图谱来改进 RAG 的检索部分   GraphRAG 利用结构化的实体和关系信息，使得检索过程更加精准和全面 GraphRAG 在处理多跳问题和复杂文档分析时表现出色 GraphRAG 在处理复杂信息处理任务时，显著提升问答性能，提供比 RAG 更为准确和全面的答案 GraphRAG 通过知识图谱有效地连接不同的信息片段 不仅能够提供准确答案，还能展示答案之间的内在联系，提供更丰富和有价值的结果     GraphRAG 先利用知识图谱，关联查询的实体和关系从与知识图谱实体直接相关的文档中检索片段，提供一个更全面、指标化、高信息密度的总结   主...</div></div></div></a><a class="pagination-related" href="/2024/08/16/rag-evolution/" title="RAG - Evolution"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/rag-evolution.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-16</div><div class="info-item-2">RAG - Evolution</div></div><div class="info-2"><div class="info-item-1">演进    Naive RAG -&gt; Advanced RAG -&gt; Modular RAG 三个范式之间具有继承与发展的关系 Advanced RAG 是 Modular RAG 的一种特例形式 Naive RAG 是 Advanced RAG 的基础特例   RAG 技术不断演进，以适应更复杂的任务和场景需求  Naive RAG Naive RAG 是最基础的形式，依赖核心的索引和检索策略来增强生成模型的输出 Naive RAG 适用于一些基础任务和产品 MVP 阶段  Advanced RAG 通过增加检索前、检索中以及检索后的优化策略，提高检索的准确性和生成的关联性 - 适用于复杂任务    Advanced RAG 通过优化检索前、检索中、检索后的各个环节 在索引质量、检索效果以及生成内容的上下文相关性方面都取得显著提升  检索前 通过索引、分块、查询优化和内容向量化等技术手段，提高检索内容的精确性和生成内容的相关性  滑动窗口 overlap   经典的 Chunking 技术，通过在相邻的 Chunk 之间创建重叠区域，确保关键信息不会因简单的 Chunking 而丢失 在 ...</div></div></div></a><a class="pagination-related" href="/2024/08/15/rag-optimization-evaluation/" title="RAG - Optimization + Evaluation"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/rag-evaluation.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-15</div><div class="info-item-2">RAG - Optimization + Evaluation</div></div><div class="info-2"><div class="info-item-1">RAG   检索优化数据清洗和预处理 在 RAG 索引流程中，文档解析之后，文档切块之前，进行数据清洗和预处理 减少脏数据和噪音，提升文本的整体质量和信息密度   手段：清除冗余信息、统一格式、处理异常字符等 处理冗余的模板内容 消除文档中的额外空白和格式不一致 去除文档脚注、页眉页脚、版权信息    查询扩写 在 RAG 系统的检索步骤中，用户的查询会转换为向量后进行检索 单个向量查询只能覆盖向量空间中一个有限区域 如果查询中的嵌入向量未能包含所有关键信息，则可能检索到不相关的 Chunk 单点查询的局限性 - 限制系统在庞大文档库中的搜索范围，导致错失与查询语义相关的内容   查询扩写 通过 LLM 从原始查询语句生成多个语义相关的查询，可以覆盖向量空间中的不同区域 提高检索的全面性和准确性 扩写后的查询在被嵌入后，能够击中不同的语义区域 确保系统能够从更广泛的文档中检索到与用户需求相关的有用信息     通过查询扩写，原始问题被分解为多个子查询 每个子查询独立检索相关文档并生成相应的结果 系统将所有子查询的检索结果进行合并和重新排序   能够有效扩展用户的查询意图，确保在复杂信息库中进行更全面的文...</div></div></div></a><a class="pagination-related" href="/2024/08/14/rag-llm-prompt-engineering/" title="RAG - LLM + Prompt Engineering"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/llm-prompting.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-14</div><div class="info-item-2">RAG - LLM + Prompt Engineering</div></div><div class="info-2"><div class="info-item-1">RAG 生成流程    经过 RAG 索引流程（外部知识的解析和向量化）和 RAG 检索流程（语义相似性的匹配及混合检索），进入到 RAG 生成流程 在 RAG 生成流程中，需要组合指令，即携带查询问题及检索到的相关信息输入的 LLM，由 LLM 理解并生成最终的回复 RAG 的本质是通过 LLM 提供外部知识来增强其理解和回答领域问题的能力 LLM 在 RAG 系统中起到了大脑的作用 在面对复杂且多样化的 RAG 任务时，LLM 的性能直接决定了系统的整体效果   提示词工程是生成流程中的另一个关键环节 通过有效的指令的设计和组合，可以帮助 LLM 更好地理解输入内容，从而生成更加精确和相关的回答 精心设计的问题提示词，往往能提升生成效果    LLM发展  RAG 目前更关注通用大模型   原理 Google 于 2017 年发布论文 Attention Is All You Need，引入了 Transformer 模型 Transformer 模型是深度学习领域的一个突破性架构，LLM 的成功得益于对 Transformer 模型的应用 与传统的 RNN（循环神经网络） 相比，Transform...</div></div></div></a><a class="pagination-related" href="/2024/08/13/rag-hybrid-retrieval-rerank/" title="RAG - Hybrid retrieval + Rerank"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/rag-rerank-9097303.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-13</div><div class="info-item-2">RAG - Hybrid retrieval + Rerank</div></div><div class="info-2"><div class="info-item-1">向量检索 当前主流的 RAG 检索方式主要采用向量检索，通过语义相似度来匹配 Chunk 向量检索并非万能，在某些场景下无法替代传统关键词检索的优势 当需要精准搜索的时候，向量检索的准确性就往往不如关键词检索 当用户输入的问题非常简短，语义匹配的效果可能不尽理想   关键词检索的适用场景 精确匹配 少量字符的匹配 - 不适合用向量检索 低频词汇的匹配       混合检索 结合关键词检索和语义匹配的优势   在 RAG 检索场景中，首要目标是确保最相关的结果能够出现在候选列表中 向量检索和关键词检索各具优势，混合检索通过结合多种检索技术，弥补各自不足，提供一种更加全面的搜索方案 重排序技术在检索系统中扮演着至关重要的角色 即使检索算法已经能够捕捉到所有相关的结果，重排序过程依然不可或缺 确保最符合用户意图和查询语义的结果优先展示，提升用户的搜索体验和结果的准确性     在多个数据集和多个检索任务中，混合检索和重排序的组合均取得了最佳表现     融合检索 &#x2F; 多路召回    https://python.langchain.com/v0.2/api_reference/community/r...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">zhongmingmao</div><div class="author-info-description">Focus on Infrastructure.</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">640</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">191</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">83</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%E8%A7%A3%E6%9E%90"><span class="toc-number">1.</span> <span class="toc-text">文档解析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#LangChain"><span class="toc-number">2.</span> <span class="toc-text">LangChain</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Document-Loaders"><span class="toc-number">2.1.</span> <span class="toc-text">Document Loaders</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LangChain-Community"><span class="toc-number">2.2.</span> <span class="toc-text">LangChain Community</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E6%96%87%E6%A1%A3"><span class="toc-number">3.</span> <span class="toc-text">加载文档</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PDF"><span class="toc-number">4.</span> <span class="toc-text">PDF</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#PDF-vs-MarkDown"><span class="toc-number">4.1.</span> <span class="toc-text">PDF vs MarkDown</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E7%89%88-vs-%E6%89%AB%E6%8F%8F%E7%89%88"><span class="toc-number">4.2.</span> <span class="toc-text">电子版 vs 扫描版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%E8%A7%A3%E6%9E%90-1"><span class="toc-number">4.3.</span> <span class="toc-text">文档解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Deep-Learning"><span class="toc-number">4.3.1.</span> <span class="toc-text">Deep Learning</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Paid"><span class="toc-number">4.3.2.</span> <span class="toc-text">Paid</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E6%A8%A1%E6%80%81"><span class="toc-number">4.4.</span> <span class="toc-text">多模态</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/01/22/cloud-native-observability-prometheus-introduction/" title="Observability - Prometheus Introduction"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/prometheus.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - Prometheus Introduction"/></a><div class="content"><a class="title" href="/2025/01/22/cloud-native-observability-prometheus-introduction/" title="Observability - Prometheus Introduction">Observability - Prometheus Introduction</a><time datetime="2025-01-21T16:06:25.000Z" title="Created 2025-01-22 00:06:25">2025-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/21/cloud-native-observability-opentelemetry-java-zero-code/" title="Observability - OpenTelemetry Java Zero Code"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/otel-java-agent.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - OpenTelemetry Java Zero Code"/></a><div class="content"><a class="title" href="/2025/01/21/cloud-native-observability-opentelemetry-java-zero-code/" title="Observability - OpenTelemetry Java Zero Code">Observability - OpenTelemetry Java Zero Code</a><time datetime="2025-01-20T16:06:25.000Z" title="Created 2025-01-21 00:06:25">2025-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/20/cloud-native-observability-opentelemetry-java/" title="Observability - OpenTelemetry Java"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/otel-java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - OpenTelemetry Java"/></a><div class="content"><a class="title" href="/2025/01/20/cloud-native-observability-opentelemetry-java/" title="Observability - OpenTelemetry Java">Observability - OpenTelemetry Java</a><time datetime="2025-01-19T16:06:25.000Z" title="Created 2025-01-20 00:06:25">2025-01-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/19/ai-agent-overview-mcp/" title="AI Agent - MCP Overview"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ai-agent-1253868755.cos.ap-guangzhou.myqcloud.com/mcp.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI Agent - MCP Overview"/></a><div class="content"><a class="title" href="/2025/01/19/ai-agent-overview-mcp/" title="AI Agent - MCP Overview">AI Agent - MCP Overview</a><time datetime="2025-01-18T16:06:25.000Z" title="Created 2025-01-19 00:06:25">2025-01-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/18/ai-agent-overview/" title="AI Agent - Overview"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ai-agent-1253868755.cos.ap-guangzhou.myqcloud.com/ai-agent.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI Agent - Overview"/></a><div class="content"><a class="title" href="/2025/01/18/ai-agent-overview/" title="AI Agent - Overview">AI Agent - Overview</a><time datetime="2025-01-17T16:06:25.000Z" title="Created 2025-01-18 00:06:25">2025-01-18</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2015 - 2025 By zhongmingmao</span></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional and Simplified Chinese">繁</button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div></body></html>