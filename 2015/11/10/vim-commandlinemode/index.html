<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Vim -- 命令行模式 | ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="本文将介绍Vim中的命令行模式">
<meta property="og:type" content="article">
<meta property="og:title" content="Vim -- 命令行模式">
<meta property="og:url" content="https://blog.zhongmingmao.top/2015/11/10/vim-commandlinemode/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="本文将介绍Vim中的命令行模式">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-12.png">
<meta property="article:published_time" content="2015-11-09T16:06:25.000Z">
<meta property="article:modified_time" content="2023-04-03T10:04:59.604Z">
<meta property="article:author" content="zhongmingmao">
<meta property="article:tag" content="Vim">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-12.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Vim -- 命令行模式",
  "url": "https://blog.zhongmingmao.top/2015/11/10/vim-commandlinemode/",
  "image": "https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-12.png",
  "datePublished": "2015-11-09T16:06:25.000Z",
  "dateModified": "2023-04-03T10:04:59.604Z",
  "author": [
    {
      "@type": "Person",
      "name": "zhongmingmao",
      "url": "https://blog.zhongmingmao.top"
    }
  ]
}</script><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/2015/11/10/vim-commandlinemode/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vim -- 命令行模式',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg" style="background-image: url(/url(https:/cdn.pixabay.com/photo/2021/07/20/03/39/fisherman-6479663_1280.jpg));"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">642</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">191</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">83</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-12.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">ByteCoding</span></a><a class="nav-page-title" href="/"><span class="site-name">Vim -- 命令行模式</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Vim -- 命令行模式</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">Created</span><time datetime="2015-11-09T16:06:25.000Z" title="Created 2015-11-10 00:06:25">2015-11-10</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/tool/">Tool</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/tool/vim/">Vim</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">1.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>5mins</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:512,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2023-04-03 18:04:59&quot;}" hidden></div><blockquote>
<p>本文将介绍<code>Vim</code>中的<code>命令行模式</code></p>
</blockquote>
<span id="more"></span>

<h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="8种模式"><a href="#8种模式" class="headerlink" title="8种模式"></a>8种模式</h2><ol>
<li>普通模式：Vim的自然放松状态，也是Vim的默认模式；操作符和动作命令结合在一起；操作 &#x3D; 操作符 + 动作命令</li>
<li>插入模式：与Sublime Text默认模式类似</li>
<li>插入-普通模式：这是普通模式的一个特例，让我们从插入模式执行一次普通模式命令，然后回归插入模式，按键为<code>&lt;C-o&gt;</code></li>
<li>替换模式：与插入模式的区别：在替换模式中输入会替换文档中的已有文本</li>
<li>虚拟替换模式（推荐）：制表符当成一组空格进行处理，假设制表符列宽为8，输入的前7个字符时，每个字符会被插入到制表符之前，当输入第8个字符时，该字符会替换制表符</li>
<li>可视模式：允许我们选中一块文本区域并在其上进行操作；面向字符（v）、面向行（<code>SHIFT+v</code>）、面向列（<code>&lt;C-v&gt;</code>）</li>
<li>选择模式：与Word和Sublime Text的操作模式类似，当选中一段文本后，再输入任何可见字符，选择的文本会被删除</li>
<li>命令行模式：行编辑器ex是vi的先祖，vim支持Ex命令</li>
</ol>
<h2 id="模式切换"><a href="#模式切换" class="headerlink" title="模式切换"></a>模式切换</h2><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vim-1253868755.cos.ap-guangzhou.myqcloud.com/practical/vim_mode_switch.png" width="500">

<h2 id="常用Ex命令"><a href="#常用Ex命令" class="headerlink" title="常用Ex命令"></a>常用Ex命令</h2><p>操作缓冲区文本的常用Ex命令（完整列表:h ex-cmd-index）<br>[range]：连续的行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 行号：&#123;start&#125;,&#123;end&#125;&#123;command&#125;</span><br><span class="line">:1p ➔ 打印第一行</span><br><span class="line">:2,5p ➔ 打印第2-5行</span><br><span class="line">:$p ➔ 打印最后一行</span><br><span class="line">:1,$p ➔ 打印全部</span><br><span class="line">:.,$p ➔ 打印当前行到最后一行</span><br><span class="line">:%p ➔ 打印全部</span><br><span class="line"></span><br><span class="line"># 位置标记</span><br><span class="line">&#x27;m ➔ 包含位置标记m的行</span><br><span class="line">&#x27;&lt; ➔ 高亮选区首行</span><br><span class="line">&#x27;&gt; ➔ 高亮选区最后一行</span><br><span class="line">:&#x27;&lt;,&#x27;&gt; ➔ 高亮选区的范围</span><br><span class="line"></span><br><span class="line"># 查找模式</span><br><span class="line">:/&lt;html&gt;/,/&lt;\/html&gt;/p ➔ 打印第一个&lt;html&gt;标签和第一个&lt;/html&gt;标签之间的内容</span><br><span class="line"></span><br><span class="line"># 位置偏移</span><br><span class="line">&#123;address&#125;+n ➔ &#123;address&#125;可以为行号，位置标记，查找模式</span><br></pre></td></tr></table></figure>
<p>global：可以是[range]范围内非连续的行</p>
<table>
<thead>
<tr>
<th>Ex命令</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>:[range]delete [x]</td>
<td>删除指定范围内的行[到寄存器 x 中]</td>
</tr>
<tr>
<td>:[range]yank [x]</td>
<td>复制指定范围的行[到寄存器 x 中]</td>
</tr>
<tr>
<td>:[line]put [x]</td>
<td>在指定行后粘贴寄存器 x 中的内容</td>
</tr>
<tr>
<td>:[range]copy {address}</td>
<td>把指定范围内的行拷贝到 {address} 所指定的行之下</td>
</tr>
<tr>
<td>:[range]move {address}</td>
<td>把指定范围内的行移动到 {address} 所指定的行之下</td>
</tr>
<tr>
<td>:[range]join</td>
<td>连接指定范围内的行</td>
</tr>
<tr>
<td>:[range]normal {commands}</td>
<td>对指定范围内的每一行执行普通模式命令 {commands}</td>
</tr>
<tr>
<td>:[range]substitute&#x2F;{pattern}&#x2F; {string}&#x2F;[flags]</td>
<td>把指定范围内出现{pattern}的地方替换为{string}</td>
</tr>
<tr>
<td>:[range]global&#x2F;{pattern}&#x2F;[cmd]</td>
<td>对指定范围内匹配{pattern}的所有行,在其上执行 Ex 命令{cmd}</td>
</tr>
</tbody></table>
<h2 id="Ex命令-vs-普通模式"><a href="#Ex命令-vs-普通模式" class="headerlink" title="Ex命令 vs 普通模式"></a>Ex命令 vs 普通模式</h2><p>普通模式一般操作当前字符或当前行，适合”本地”操作<br>EX命令，可以在任意位置执行，拥有在多行上同时执行的能力，可以远距离操作</p>
<h1 id="使用样例"><a href="#使用样例" class="headerlink" title="使用样例"></a>使用样例</h1><h2 id="复制（-co-py-t）和移动-m-ove-行"><a href="#复制（-co-py-t）和移动-m-ove-行" class="headerlink" title="复制（:co[py]&#x3D;&#x3D;:t）和移动(:m[ove])行"></a>复制（:co[py]&#x3D;&#x3D;:t）和移动(:m[ove])行</h2><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vim-1253868755.cos.ap-guangzhou.myqcloud.com/practical/command_mode_copy&move.gif" width="500">

<h2 id="normal-代码行尾添加分号-和-注释代码"><a href="#normal-代码行尾添加分号-和-注释代码" class="headerlink" title=":normal - 代码行尾添加分号 和 注释代码"></a>:normal - 代码行尾添加分号 和 注释代码</h2><p>在普通模式时介绍过，可以使用<code>命令.</code>重复修改，但不适用于有很多行的代码<br><code>:nomal</code>：将<code>强大表现力的Vim普通模式命令</code>和<code>具有大范围影响力的Ex命令</code>结合在一起<br><code>Ex命令</code>结合<code>命令.</code>能节省很多按键操作<br>注释代码（<code>:%normal i//</code>）：在执行指定的普通模式命令之前，Vim 会先把光标移动到该行的行首<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vim-1253868755.cos.ap-guangzhou.myqcloud.com/practical/command_mode_;comment.gif" width="500"></p>
<h2 id="遍历缓冲区列表"><a href="#遍历缓冲区列表" class="headerlink" title="遍历缓冲区列表"></a>遍历缓冲区列表</h2><p>同时打开多个文件，会形成缓冲区列表，<code>bn[ext]</code>打开下一个缓冲文件，<code>bp[revious]</code>打开上一个缓冲文件。<br><code>@:</code>：重复执行上次Ex命令；<br><code>@@</code>：重复执行<code>@:</code><br><code>&lt;C-o&gt;</code>：回退到上一个缓冲文件<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vim-1253868755.cos.ap-guangzhou.myqcloud.com/practical/command_mode_@@_bn_bp.gif" width="500"></p>
<h2 id="Ex命令自动补全"><a href="#Ex命令自动补全" class="headerlink" title="Ex命令自动补全"></a>Ex命令自动补全</h2><p>针对zsh的vim配置：<code>set wildmenu</code> <code>set wildmode=full</code><br>正向查找：<code>&lt;Tab&gt;</code>，<code>&lt;Right&gt;</code>，<code>&lt;C-n&gt;</code><br>反向查找：<code>&lt;S-Tab&gt;</code>，<code>&lt;Left&gt;</code>，<code>&lt;C-p&gt;</code><br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vim-1253868755.cos.ap-guangzhou.myqcloud.com/practical/command_mode_auto_complete.gif" width="500"></p>
<h2 id="替换单词"><a href="#替换单词" class="headerlink" title="替换单词"></a>替换单词</h2><p><code>&lt;C-r&gt;&lt;C-w&gt;</code>：复制光标下的单词并把它插入到命令行中<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vim-1253868755.cos.ap-guangzhou.myqcloud.com/practical/command_mode_CrCw.gif" width="500"></p>
<h2 id="命令行窗口"><a href="#命令行窗口" class="headerlink" title="命令行窗口"></a>命令行窗口</h2><p>命令行模式适用于从头开始构建命令，但在命令行模式中编辑命令的能力有限，而且不能利用历史命令（Ex命令或查找命令），命令行窗口能弥补这两个短处<br>命令行窗口就像一个常规的Vim缓冲区，只不过内容是命令历史，允许我们使用Vim完整的区分模式的编辑能力来修改历史命令，并可以在活动窗口的上下文中执行命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">q: ➔ 打开Ex命令历史的命令行窗口</span><br><span class="line">q/ ➔ 打开查找命令历史的命令行窗口</span><br><span class="line">&lt;C-f&gt; ➔ 从命令行模式切换到命令行窗口，保存原先输入</span><br><span class="line">:q ➔ 退出命令行窗口</span><br><span class="line">&lt;CR&gt; ➔ 在活动窗口上下文执行命令并退出命令行窗口</span><br></pre></td></tr></table></figure>

<p>演示例子中，将:w，:%p，:!python3 %在命令行窗口中合成一个命令并执行<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vim-1253868755.cos.ap-guangzhou.myqcloud.com/practical/command_mode_cmdwin.gif" width="500"></p>
<h2 id="运行Shell命令"><a href="#运行Shell命令" class="headerlink" title="运行Shell命令"></a>运行Shell命令</h2><p><code>%</code>：代表当前文件<br>调用外部命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:shell ➔ 启动一个shell（输入exit返回Vim）</span><br><span class="line">!&#123;cmd&#125; ➔ 在shell中执行&#123;cmd&#125;</span><br><span class="line">:read !&#123;cmd&#125; ➔ 在shell中执行&#123;cmd&#125;，并把其标准输出插入到光标下方</span><br><span class="line">:[range]write !&#123;cmd&#125; ➔ 在shell中执行&#123;cmd&#125;，以[range]作为其标准输入</span><br><span class="line">:[range]!&#123;filter&#125; ➔ 使用外部程序&#123;filter&#125;过滤执行的[range]</span><br><span class="line">    [range]所指定的内容会传递给&#123;cmd&#125;作为标准输入，然后又会用&#123;cmd&#125;的输出覆盖[range]内原本的内容</span><br></pre></td></tr></table></figure>

<p>把缓冲区内容作为标准输入和标准输出<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vim-1253868755.cos.ap-guangzhou.myqcloud.com/practical/command_mode_shell_in_out.gif" width="500"></p>
<p>过滤缓冲区内容（依据第<code>2</code>个字段进行排序）<br><code>:2,$!sort -t &#39;,&#39; -k2</code><br><code>!&#123;motion&#125;</code> ➔ 切换到<code>命令行</code>模式，命令行上预设为<code>.,&#123;motion&#125;!</code>，即当前行移动<code>&#123;motion&#125;</code>的区域<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vim-1253868755.cos.ap-guangzhou.myqcloud.com/practical/command_mode_shell_filter.gif" width="500"></p>
<!-- indicate-the-source -->
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css"></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://blog.zhongmingmao.top">zhongmingmao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://blog.zhongmingmao.top/2015/11/10/vim-commandlinemode/">https://blog.zhongmingmao.top/2015/11/10/vim-commandlinemode/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vim/">Vim</a></div><div class="post-share"><div class="social-share" data-image="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-12.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2015/11/12/vim-file/" title="Vim -- 文件"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-21.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Vim -- 文件</div></div><div class="info-2"><div class="info-item-1"> 本文将介绍Vim中的文件    基础文件、缓冲区和编辑会话文件：存储在磁盘上缓冲区：存在于内存中编辑会话：执行一次vim命令，默认显示第一个文件的缓冲区，其他文件的缓冲区为后台缓冲区 缓冲区列表一次编辑会话可以在多个缓冲区上工作，这多个缓冲区就是缓冲区列表 123456789101112131415161718192021222324252627# 展示缓冲区列表:ls：列出所有被载入到内存中的缓冲区列表    -：非活动的缓冲区    a：激活的缓冲区    h：隐藏的缓冲区    =：只读的缓冲区    +：已经修改但尚未写入磁盘的缓冲区    #：轮换缓冲区，通过&lt;C-^&gt;切换成当前缓冲区    %：当前缓冲区，通过&lt;C-^&gt;把当前缓冲区切换成轮换缓冲区    &lt;C-^&gt;：#与%切换# 遍历缓冲区列表bp[rev]：上一个缓冲区bn[ext]：下一个缓冲区bf[irst]：第一个缓冲区bl[ast]：最后一个缓冲区b[uffer] &#123;N&#125;：直接跳转到第&#123;N&#125;个缓冲区，例如:b 3b[uffer] &#123;buffer...</div></div></div></a><a class="pagination-related" href="/2015/11/07/vim-visualmode/" title="Vim -- 可视模式"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-22.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Vim -- 可视模式</div></div><div class="info-2"><div class="info-item-1"> 本文将介绍Vim中的可视模式    基础可视模式Vim的可视模式允许我们选中一块文本区域并在其上进行操作 语法规则与普通模式的语法规则次序颠倒普通模式的语法规则：&#123;operator&#125;&#123;motion&#125;可视模式的语法规则：先选中选区，再触发可视命令；类似于典型文本编辑器的操作模式 选择模式典型文本编辑器的操作模式：当选中一段文本后，再输入任何可见字符，选择的文本会被删除可视模式和选择模式相互切换：&lt;C-g&gt; 123456:help Select-mode8. Select mode                                          *Select* *Select-mode*Select mode looks like Visual mode, but the commands accepted are quite different.  This resembles the selection mode in Microsoft Windows.When the &#x27;showmode&#x27; option i...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2015/11/12/vim-file/" title="Vim -- 文件"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-21.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2015-11-12</div><div class="info-item-2">Vim -- 文件</div></div><div class="info-2"><div class="info-item-1"> 本文将介绍Vim中的文件    基础文件、缓冲区和编辑会话文件：存储在磁盘上缓冲区：存在于内存中编辑会话：执行一次vim命令，默认显示第一个文件的缓冲区，其他文件的缓冲区为后台缓冲区 缓冲区列表一次编辑会话可以在多个缓冲区上工作，这多个缓冲区就是缓冲区列表 123456789101112131415161718192021222324252627# 展示缓冲区列表:ls：列出所有被载入到内存中的缓冲区列表    -：非活动的缓冲区    a：激活的缓冲区    h：隐藏的缓冲区    =：只读的缓冲区    +：已经修改但尚未写入磁盘的缓冲区    #：轮换缓冲区，通过&lt;C-^&gt;切换成当前缓冲区    %：当前缓冲区，通过&lt;C-^&gt;把当前缓冲区切换成轮换缓冲区    &lt;C-^&gt;：#与%切换# 遍历缓冲区列表bp[rev]：上一个缓冲区bn[ext]：下一个缓冲区bf[irst]：第一个缓冲区bl[ast]：最后一个缓冲区b[uffer] &#123;N&#125;：直接跳转到第&#123;N&#125;个缓冲区，例如:b 3b[uffer] &#123;buffer...</div></div></div></a><a class="pagination-related" href="/2015/11/07/vim-visualmode/" title="Vim -- 可视模式"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-22.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2015-11-07</div><div class="info-item-2">Vim -- 可视模式</div></div><div class="info-2"><div class="info-item-1"> 本文将介绍Vim中的可视模式    基础可视模式Vim的可视模式允许我们选中一块文本区域并在其上进行操作 语法规则与普通模式的语法规则次序颠倒普通模式的语法规则：&#123;operator&#125;&#123;motion&#125;可视模式的语法规则：先选中选区，再触发可视命令；类似于典型文本编辑器的操作模式 选择模式典型文本编辑器的操作模式：当选中一段文本后，再输入任何可见字符，选择的文本会被删除可视模式和选择模式相互切换：&lt;C-g&gt; 123456:help Select-mode8. Select mode                                          *Select* *Select-mode*Select mode looks like Visual mode, but the commands accepted are quite different.  This resembles the selection mode in Microsoft Windows.When the &#x27;showmode&#x27; option i...</div></div></div></a><a class="pagination-related" href="/2015/11/05/vim-insertmode/" title="Vim -- 插入模式"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-18.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2015-11-05</div><div class="info-item-2">Vim -- 插入模式</div></div><div class="info-2"><div class="info-item-1"> 本文将介绍Vim中的插入模式    基础插入模式i：在当前字符的左边插入I：在当前行首插入a：在当前字符的右边插入A：在当前行尾插入o：在当前行下面插入一个新行O：在当前行上面插入一个新行c&#123;motion&#125;：删除 motion 命令跨过的字符，并且进入插入模式    c$：删除从光标位置到行尾的字符并且进入插入模式    ct!：删除从光标位置到下一个叹号（但不包括）cc：剪切当前行并且进入插入模式C：等同于c$s：删除光标处字符，并进入插入模式S：删除当前行并进入插入模式，等同于cc 插入-普通模式这是普通模式的一个特例，让我们从插入模式执行一次普通模式命令，然后回归插入模式，按键为&lt;C-o&gt; 替换模式与插入模式的区别：在替换模式中输入会替换文档中的已有文本触发命令：r，R 虚拟替换模式（推荐）把制表符当成一组空格进行处理假设制表符列宽为8，输入的前7个字符时，每个字符会被插入到制表符之前，当输入第8个字符时，该字符会替换制表符触发命令：gr，gR 使用样例插入模式中撤销修改&lt;C-h&gt;：删除前一个字符&lt;C-w&gt;：删除前一个单词&lt;C-u&g...</div></div></div></a><a class="pagination-related" href="/2015/11/04/vim-commonmode/" title="Vim -- 普通模式"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-1.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2015-11-04</div><div class="info-item-2">Vim -- 普通模式</div></div><div class="info-2"><div class="info-item-1"> 本文将介绍Vim中的普通模式    基础概念普通模式（normal mode）是Vim的自然放松状态，也是Vim的默认模式其他文本编辑器大部分时间都处于类似Vim插入模式的状态中普通模式之所以强大，主要由于它可以把操作符和动作命令结合在一起：**操作 = 操作符 + 动作命令** 12345:h operatorThe motion commands can be used after an operator command,to have the command operate on the text that was moved over.That is the text between the cursor position before and after the motion.Operators are generally used to delete or change text.  语法规则&#123;operator&#125;&#123;motion&#125;&#123;operator&#125;&#123;operator&#125;（motion默认为当前行） 操作符待决模式...</div></div></div></a><a class="pagination-related" href="/2015/11/02/vim-commandpoint/" title="Vim -- 命令."><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-20.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2015-11-02</div><div class="info-item-2">Vim -- 命令.</div></div><div class="info-2"><div class="info-item-1"> 本文将介绍Vim中的命令.    基础Vim启动命令12# 不加载配置文件，且不启用vi兼容模式$ vim -u NONE -N  Vim手册1234567$ man vim-u &#123;vimrc&#125;      Use the commands in the file &#123;vimrc&#125; for initializations.                  All the other initializations are skipped.  Use this to edit a special  kind  of  files.                It can also be used to skip all initializations by giving the name &quot;NONE&quot;.                See &quot;:help initialization&quot; within vim for more details.-N              No-compatible mode.  Rese...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">zhongmingmao</div><div class="author-info-description">Focus on Infrastructure.</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">642</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">191</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">83</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E7%A7%8D%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text">8种模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%88%87%E6%8D%A2"><span class="toc-number">1.2.</span> <span class="toc-text">模式切换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8Ex%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.</span> <span class="toc-text">常用Ex命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ex%E5%91%BD%E4%BB%A4-vs-%E6%99%AE%E9%80%9A%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">Ex命令 vs 普通模式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%A0%B7%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text">使用样例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%EF%BC%88-co-py-t%EF%BC%89%E5%92%8C%E7%A7%BB%E5%8A%A8-m-ove-%E8%A1%8C"><span class="toc-number">2.1.</span> <span class="toc-text">复制（:co[py]&#x3D;&#x3D;:t）和移动(:m[ove])行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#normal-%E4%BB%A3%E7%A0%81%E8%A1%8C%E5%B0%BE%E6%B7%BB%E5%8A%A0%E5%88%86%E5%8F%B7-%E5%92%8C-%E6%B3%A8%E9%87%8A%E4%BB%A3%E7%A0%81"><span class="toc-number">2.2.</span> <span class="toc-text">:normal - 代码行尾添加分号 和 注释代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E7%BC%93%E5%86%B2%E5%8C%BA%E5%88%97%E8%A1%A8"><span class="toc-number">2.3.</span> <span class="toc-text">遍历缓冲区列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ex%E5%91%BD%E4%BB%A4%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8"><span class="toc-number">2.4.</span> <span class="toc-text">Ex命令自动补全</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E5%8D%95%E8%AF%8D"><span class="toc-number">2.5.</span> <span class="toc-text">替换单词</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3"><span class="toc-number">2.6.</span> <span class="toc-text">命令行窗口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8CShell%E5%91%BD%E4%BB%A4"><span class="toc-number">2.7.</span> <span class="toc-text">运行Shell命令</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/01/24/cloud-native-observability-prometheus-server-v1/" title="Observability - Prometheus Server V1"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/prometheus-server.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - Prometheus Server V1"/></a><div class="content"><a class="title" href="/2025/01/24/cloud-native-observability-prometheus-server-v1/" title="Observability - Prometheus Server V1">Observability - Prometheus Server V1</a><time datetime="2025-01-23T16:06:25.000Z" title="Created 2025-01-24 00:06:25">2025-01-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/23/cloud-native-observability-prometheus-concepts/" title="Observability - Prometheus Concepts"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/prometheus-concepts.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - Prometheus Concepts"/></a><div class="content"><a class="title" href="/2025/01/23/cloud-native-observability-prometheus-concepts/" title="Observability - Prometheus Concepts">Observability - Prometheus Concepts</a><time datetime="2025-01-22T16:06:25.000Z" title="Created 2025-01-23 00:06:25">2025-01-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/22/cloud-native-observability-prometheus-introduction/" title="Observability - Prometheus Introduction"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/prometheus.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - Prometheus Introduction"/></a><div class="content"><a class="title" href="/2025/01/22/cloud-native-observability-prometheus-introduction/" title="Observability - Prometheus Introduction">Observability - Prometheus Introduction</a><time datetime="2025-01-21T16:06:25.000Z" title="Created 2025-01-22 00:06:25">2025-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/21/cloud-native-observability-opentelemetry-java-zero-code/" title="Observability - OpenTelemetry Java Zero Code"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/otel-java-agent.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - OpenTelemetry Java Zero Code"/></a><div class="content"><a class="title" href="/2025/01/21/cloud-native-observability-opentelemetry-java-zero-code/" title="Observability - OpenTelemetry Java Zero Code">Observability - OpenTelemetry Java Zero Code</a><time datetime="2025-01-20T16:06:25.000Z" title="Created 2025-01-21 00:06:25">2025-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/20/cloud-native-observability-opentelemetry-java/" title="Observability - OpenTelemetry Java"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/otel-java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - OpenTelemetry Java"/></a><div class="content"><a class="title" href="/2025/01/20/cloud-native-observability-opentelemetry-java/" title="Observability - OpenTelemetry Java">Observability - OpenTelemetry Java</a><time datetime="2025-01-19T16:06:25.000Z" title="Created 2025-01-20 00:06:25">2025-01-20</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2015 - 2025 By zhongmingmao</span></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional and Simplified Chinese">繁</button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div></body></html>