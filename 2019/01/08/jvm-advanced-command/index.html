<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>JVM进阶 -- JDK命令 | ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="jpsLists the instrumented Java Virtual Machines (JVMs) on the target system.如果Java进程关闭了默认开启的UsePerfData参数（**-XX:-UsePerfData），那么jps&#x2F;jstat将无法探知**到该Java进程 123$ jps1408 Jps19 LiveCoverMain    参数 备注">
<meta property="og:type" content="article">
<meta property="og:title" content="JVM进阶 -- JDK命令">
<meta property="og:url" content="https://blog.zhongmingmao.top/2019/01/08/jvm-advanced-command/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="jpsLists the instrumented Java Virtual Machines (JVMs) on the target system.如果Java进程关闭了默认开启的UsePerfData参数（**-XX:-UsePerfData），那么jps&#x2F;jstat将无法探知**到该Java进程 123$ jps1408 Jps19 LiveCoverMain    参数 备注">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-18.png">
<meta property="article:published_time" content="2019-01-08T12:54:58.000Z">
<meta property="article:modified_time" content="2023-04-03T10:04:59.585Z">
<meta property="article:author" content="zhongmingmao">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="JVM">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-18.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "JVM进阶 -- JDK命令",
  "url": "https://blog.zhongmingmao.top/2019/01/08/jvm-advanced-command/",
  "image": "https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-18.png",
  "datePublished": "2019-01-08T12:54:58.000Z",
  "dateModified": "2023-04-03T10:04:59.585Z",
  "author": [
    {
      "@type": "Person",
      "name": "zhongmingmao",
      "url": "https://blog.zhongmingmao.top"
    }
  ]
}</script><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/2019/01/08/jvm-advanced-command/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JVM进阶 -- JDK命令',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg" style="background-image: url(/url(https:/cdn.pixabay.com/photo/2021/07/20/03/39/fisherman-6479663_1280.jpg));"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">639</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">191</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">83</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-18.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">ByteCoding</span></a><a class="nav-page-title" href="/"><span class="site-name">JVM进阶 -- JDK命令</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">JVM进阶 -- JDK命令</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">Created</span><time datetime="2019-01-08T12:54:58.000Z" title="Created 2019-01-08 20:54:58">2019-01-08</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/">Java</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">3.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>21mins</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:512,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2023-04-03 18:04:59&quot;}" hidden></div><h2 id="jps"><a href="#jps" class="headerlink" title="jps"></a>jps</h2><p>Lists the instrumented Java Virtual Machines (JVMs) on the target system.<br>如果Java进程关闭了默认开启的UsePerfData参数（**-XX:-UsePerfData<strong>），那么</strong>jps&#x2F;jstat<strong>将</strong>无法探知**到该Java进程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jps</span><br><span class="line">1408 Jps</span><br><span class="line">19 LiveCoverMain</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>m</td>
<td>Displays the arguments passed to the <strong>main method</strong>. The output may be null for embedded JVMs.</td>
</tr>
<tr>
<td>l</td>
<td>Displays the <strong>full package name</strong> for the application’s main class or the <strong>full path name</strong> to the application’s JAR file.</td>
</tr>
<tr>
<td>v</td>
<td>Displays the arguments passed to the <strong>JVM</strong>.</td>
</tr>
</tbody></table>
<span id="more"></span>

<h2 id="jstat"><a href="#jstat" class="headerlink" title="jstat"></a>jstat</h2><p>Monitors Java Virtual Machine (JVM) statistics.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ jstat -options</span><br><span class="line">-class</span><br><span class="line">-compiler</span><br><span class="line">-gc</span><br><span class="line">-gccapacity</span><br><span class="line">-gccause</span><br><span class="line">-gcmetacapacity</span><br><span class="line">-gcnew</span><br><span class="line">-gcnewcapacity</span><br><span class="line">-gcold</span><br><span class="line">-gcoldcapacity</span><br><span class="line">-gcutil</span><br><span class="line">-printcompilation</span><br></pre></td></tr></table></figure>

<h3 id="class"><a href="#class" class="headerlink" title="class"></a>class</h3><p>Displays statistics about the behavior of the <strong>class loader</strong>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -class 19</span><br><span class="line">Loaded  Bytes  Unloaded  Bytes     Time   </span><br><span class="line"> 15375 27526.8       54    74.3      68.95</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>Loaded</td>
<td>Number of classes loaded.</td>
</tr>
<tr>
<td>Bytes</td>
<td>Number of <strong>kBs</strong> loaded.</td>
</tr>
<tr>
<td>Unloaded</td>
<td>Number of classes unloaded.</td>
</tr>
<tr>
<td>Bytes</td>
<td>Number of <strong>Kbytes</strong> unloaded.</td>
</tr>
<tr>
<td>Time</td>
<td>Time spent performing class loading and unloading operations.</td>
</tr>
</tbody></table>
<h3 id="compiler"><a href="#compiler" class="headerlink" title="compiler"></a>compiler</h3><p>Displays statistics about the behavior of the Java HotSpot VM <strong>Just-in-Time</strong> compiler.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -compiler 19</span><br><span class="line">Compiled Failed Invalid   Time   FailedType FailedMethod</span><br><span class="line">   17421      1       0   122.19          1 org/apache/skywalking/apm/dependencies/net/bytebuddy/pool/TypePool$Default$WithLazyResolution doResolve</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>Compiled</td>
<td>Number of compilation tasks performed.</td>
</tr>
<tr>
<td>Failed</td>
<td>Number of compilations tasks failed.</td>
</tr>
<tr>
<td>Invalid</td>
<td>Number of compilation tasks that were invalidated.</td>
</tr>
<tr>
<td>Time</td>
<td>Time spent performing compilation tasks.</td>
</tr>
<tr>
<td>FailedType</td>
<td>Compile type of the <strong>last</strong> failed compilation.</td>
</tr>
<tr>
<td>FailedMethod</td>
<td>Class name and method of the <strong>last</strong> failed compilation.</td>
</tr>
</tbody></table>
<h3 id="printcompilation"><a href="#printcompilation" class="headerlink" title="printcompilation"></a>printcompilation</h3><p>Displays Java HotSpot VM <strong>compilation method</strong> statistics.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -printcompilation 19</span><br><span class="line">Compiled  Size  Type Method</span><br><span class="line">   17423    204    1 io/netty/util/internal/MpscLinkedQueue offer</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>Compiled</td>
<td>Number of compilation tasks performed by the <strong>most recently</strong> compiled method.</td>
</tr>
<tr>
<td>Size</td>
<td>Number of <strong>bytes of byte code</strong> of the <strong>most recently</strong> compiled method.</td>
</tr>
<tr>
<td>Type</td>
<td>Compilation type of the <strong>most recently</strong> compiled method.</td>
</tr>
<tr>
<td>Method</td>
<td>Class name and method name identifying the <strong>most recently</strong> compiled method.</td>
</tr>
</tbody></table>
<h3 id="gc"><a href="#gc" class="headerlink" title="gc"></a>gc</h3><p>Displays statistics about the behavior of the garbage collected heap.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jstat -gc 19</span><br><span class="line"> S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   </span><br><span class="line">43648.0 43648.0  0.0   356.5  43776.0  17636.4  1835008.0   407774.3  91668.0 82097.8 12108.0 10130.4  33313  553.212   6      0.128  553.340</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>S0C</td>
<td>Current survivor space 0 capacity (kB).</td>
</tr>
<tr>
<td>S1C</td>
<td>Current survivor space 1 capacity (kB).</td>
</tr>
<tr>
<td>S0U</td>
<td>Survivor space 0 utilization (kB).</td>
</tr>
<tr>
<td>S1U</td>
<td>Survivor space 1 utilization (kB).</td>
</tr>
<tr>
<td>EC</td>
<td>Current eden space capacity (kB).</td>
</tr>
<tr>
<td>EU</td>
<td>Eden space utilization (kB).</td>
</tr>
<tr>
<td>OC</td>
<td>Current old space capacity (kB).</td>
</tr>
<tr>
<td>OU</td>
<td>Old space utilization (kB).</td>
</tr>
<tr>
<td>MC</td>
<td>1. Metaspace capacity (kB).<br/>2. Klass Metaspace以及NoKlass Metaspace两者总共<strong>committed</strong>的内存大小</td>
</tr>
<tr>
<td>MU</td>
<td>1. Metacspace utilization (kB).<br/>2. Klass Metaspace以及NoKlass Metaspace两者已经使用了的内存大小</td>
</tr>
<tr>
<td>CCSC</td>
<td>1. Compressed class space capacity (kB).<br/>2. Klass Metaspace的已经committed的内存大小</td>
</tr>
<tr>
<td>CCSU</td>
<td>1. Compressed class space used (kB).<br/>2. Klass Metaspace的已经被使用的内存大小</td>
</tr>
<tr>
<td>YGC</td>
<td>Number of young generation garbage collection events.</td>
</tr>
<tr>
<td>YGCT</td>
<td>Young generation garbage collection time.</td>
</tr>
<tr>
<td>FGC</td>
<td>Number of full GC events.</td>
</tr>
<tr>
<td>FGCT</td>
<td>Full garbage collection time.</td>
</tr>
<tr>
<td>GCT</td>
<td>Total garbage collection time.</td>
</tr>
</tbody></table>
<p>Metaspace相关内容可参考：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/92a5fbb33764">JVM源码分析之Metaspace解密</a></p>
<h4 id="G1"><a href="#G1" class="headerlink" title="G1"></a>G1</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -gc -t 13903</span><br><span class="line">Timestamp        S0C    S1C    S0U    S1U      EC       EU        OC         OU       PC     PU    YGC     YGCT    FGC    FGCT     GCT</span><br><span class="line">       554652.2  0.0   8192.0  0.0   8192.0 5275648.0 4276224.0 3104768.0   755520.9  131072.0 61178.3   8219  169.021   0      0.000  169.021</span><br></pre></td></tr></table></figure>
<ol>
<li>S0C和S0U始终为0，这是因为使用G1 GC时，JVM不再设置Eden区、Survivor区和Old区的<strong>内存边界</strong>，而是将堆划分为若干个<strong>等长</strong>内存区域</li>
<li>每个内存区域都可以作为Eden区、Survivor区和Old区，并且可以在不同区域类型之间来回切换</li>
<li>因此，<strong>逻辑上只有一个Survivor区</strong>，当需要迁移Survivor区中的数据（Copying），只需要申请一个或多个内存区域，作为新的Survivor区</li>
<li>当发生垃圾回收时，JVM可能出现Survivor内存区域内的对象<strong>全被回收</strong>或者<strong>全被晋升</strong>的现象<ul>
<li>此时，JVM会将这块内存区域回收，并标记为<strong>可分配</strong></li>
<li>结果堆中可能<strong>完全没有Survivor内存区域</strong>，S1C和S1U均为0</li>
</ul>
</li>
<li>554652s &#x3D; 6.4day</li>
</ol>
<h3 id="gcnew"><a href="#gcnew" class="headerlink" title="gcnew"></a>gcnew</h3><p>Displays statistics of the behavior of the <strong>new generation</strong>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -gcnew 19</span><br><span class="line"> S0C    S1C    S0U    S1U   TT MTT  DSS      EC       EU     YGC     YGCT  </span><br><span class="line">43648.0 43648.0  315.7    0.0 15  15 21824.0  43776.0  16609.9  34072  566.323</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
<th>样例</th>
</tr>
</thead>
<tbody><tr>
<td>S0C</td>
<td>Current survivor space 0 capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>S1C</td>
<td>Current survivor space 1 capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>S0U</td>
<td>Survivor space 0 utilization (kB).</td>
<td></td>
</tr>
<tr>
<td>S1U</td>
<td>Survivor space 1 utilization (kB).</td>
<td></td>
</tr>
<tr>
<td>TT</td>
<td><strong>Tenuring threshold</strong>.</td>
<td>15</td>
</tr>
<tr>
<td>MTT</td>
<td><strong>Maximum tenuring threshold</strong>.</td>
<td>15</td>
</tr>
<tr>
<td>DSS</td>
<td>Desired survivor size (kB).</td>
<td>1. -XX:TargetSurvivorRatio&#x3D;50<br/>2. Desired percentage of survivor space used after scavenge.<br/>3. 21824KB &#x3D;&#x3D; 0.5 * S0C</td>
</tr>
<tr>
<td>EC</td>
<td>Current eden space capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>EU</td>
<td>Eden space utilization (kB).</td>
<td></td>
</tr>
<tr>
<td>YGC</td>
<td>Number of young generation GC events.</td>
<td></td>
</tr>
<tr>
<td>YGCT</td>
<td>Young generation garbage collection time.</td>
<td></td>
</tr>
</tbody></table>
<h3 id="gcold"><a href="#gcold" class="headerlink" title="gcold"></a>gcold</h3><p>Displays statistics about the behavior of the <strong>old generation</strong> and <strong>metaspace</strong> statistics.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -gcold 19</span><br><span class="line">   MC       MU      CCSC     CCSU       OC          OU       YGC    FGC    FGCT     GCT   </span><br><span class="line"> 92564.0  82773.0  12236.0  10223.6   1835008.0    423476.6  34693     6    0.128  575.369</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>MC</td>
<td>Metaspace capacity (kB).</td>
</tr>
<tr>
<td>MU</td>
<td>Metaspace utilization (kB).</td>
</tr>
<tr>
<td>CCSC</td>
<td>Compressed class space capacity (kB).</td>
</tr>
<tr>
<td>CCSU</td>
<td>Compressed class space used (kB).</td>
</tr>
<tr>
<td>OC</td>
<td>Current old space capacity (kB).</td>
</tr>
<tr>
<td>OU</td>
<td>Old space utilization (kB).</td>
</tr>
<tr>
<td>YGC</td>
<td>Number of young generation GC events.</td>
</tr>
<tr>
<td>FGC</td>
<td>Number of full GC events.</td>
</tr>
<tr>
<td>FGCT</td>
<td>Full garbage collection time.</td>
</tr>
<tr>
<td>GCT</td>
<td>Total garbage collection time.</td>
</tr>
</tbody></table>
<h3 id="gccapacity"><a href="#gccapacity" class="headerlink" title="gccapacity"></a>gccapacity</h3><p>Displays statistics about the capacities of the generations and their corresponding spaces.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -gccapacity 19</span><br><span class="line"> NGCMN    NGCMX     NGC     S0C   S1C       EC      OGCMN      OGCMX       OGC         OC       MCMN     MCMX      MC     CCSMN    CCSMX     CCSC    YGC    FGC</span><br><span class="line">131072.0 131072.0 131072.0 43648.0 43648.0  43776.0  1835008.0  1835008.0  1835008.0  1835008.0      0.0 1128448.0  91668.0      0.0 1048576.0  12108.0  33477     6</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
<th>样例</th>
</tr>
</thead>
<tbody><tr>
<td>NGCMN</td>
<td>Minimum new generation capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>NGCMX</td>
<td>Maximum new generation capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>NGC</td>
<td>Current new generation capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>S0C</td>
<td>Current survivor space 0 capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>S1C</td>
<td>Current survivor space 1 capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>EC</td>
<td>Current eden space capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>OGCMN</td>
<td>Minimum old generation capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>OGCMX</td>
<td>Maximum old generation capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>OGC</td>
<td>Current old generation capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>OC</td>
<td>Current old space capacity (kB).</td>
<td></td>
</tr>
<tr>
<td>MCMN</td>
<td>Minimum metaspace capacity (kB).</td>
<td>0</td>
</tr>
<tr>
<td>MCMX</td>
<td>Maximum metaspace capacity (kB).</td>
<td>1. Klass Metaspace以及NoKlass Metaspace两者总共的<strong>reserved</strong>的内存大小<br/>2. 默认情况下Klass Metaspace是通过<strong>CompressedClassSpaceSize</strong>这个参数来reserved 1G的内存<br/>3. NoKlass Metaspace默认reserved的内存大小是<strong>2*InitialBootClassLoaderMetaspaceSize</strong><br/>4. 1128448KB &#x3D;&#x3D; 1.076GB</td>
</tr>
<tr>
<td>MC</td>
<td>Metaspace capacity (kB).</td>
<td>1. Klass Metaspace以及NoKlass Metaspace两者总共<strong>committed</strong>的内存大小<br/>2. 91668KB &#x3D;&#x3D; 89.5MB</td>
</tr>
<tr>
<td>CCSMN</td>
<td>Compressed class space minimum capacity (kB).</td>
<td>0</td>
</tr>
<tr>
<td>CCSMX</td>
<td>Compressed class space maximum capacity (kB).</td>
<td>1. Klass Metaspace reserved的内存大小<br/>2. 1048576KB &#x3D;&#x3D; 1GB</td>
</tr>
<tr>
<td>CCSC</td>
<td>Compressed class space capacity (kB).</td>
<td>1. Klass Metaspace的已committed的内存大小<br/>2. 12108KB &#x3D;&#x3D; 11.8MB</td>
</tr>
<tr>
<td>YGC</td>
<td>Number of young generation GC events.</td>
<td></td>
</tr>
<tr>
<td>FGC</td>
<td>Number of full GC events.</td>
<td></td>
</tr>
</tbody></table>
<h3 id="gcnewcapacity"><a href="#gcnewcapacity" class="headerlink" title="gcnewcapacity"></a>gcnewcapacity</h3><p>Displays statistics about the sizes of the new generations and its corresponding spaces.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -gcnewcapacity 19</span><br><span class="line">  NGCMN      NGCMX       NGC      S0CMX     S0C     S1CMX     S1C       ECMX        EC      YGC   FGC</span><br><span class="line">  131072.0   131072.0   131072.0  43648.0  43648.0  43648.0  43648.0    43776.0    43776.0 34383     6</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>NGCMN</td>
<td>Minimum new generation capacity (kB).</td>
</tr>
<tr>
<td>NGCMX</td>
<td>Maximum new generation capacity (kB).</td>
</tr>
<tr>
<td>NGC</td>
<td>Current new generation capacity (kB).</td>
</tr>
<tr>
<td>S0CMX</td>
<td>Maximum survivor space 0 capacity (kB).</td>
</tr>
<tr>
<td>S0C</td>
<td>Current survivor space 0 capacity (kB).</td>
</tr>
<tr>
<td>S1CMX</td>
<td>Maximum survivor space 1 capacity (kB).</td>
</tr>
<tr>
<td>S1C</td>
<td>Current survivor space 1 capacity (kB).</td>
</tr>
<tr>
<td>ECMX</td>
<td>Maximum eden space capacity (kB).</td>
</tr>
<tr>
<td>EC</td>
<td>Current eden space capacity (kB).</td>
</tr>
<tr>
<td>YGC</td>
<td>Number of young generation GC events.</td>
</tr>
<tr>
<td>FGC</td>
<td>Number of full GC events.</td>
</tr>
</tbody></table>
<h3 id="gcoldcapacity"><a href="#gcoldcapacity" class="headerlink" title="gcoldcapacity"></a>gcoldcapacity</h3><p>Displays statistics about the sizes of the old generation.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -gcoldcapacity 19</span><br><span class="line">   OGCMN       OGCMX        OGC         OC       YGC   FGC    FGCT     GCT   </span><br><span class="line">  1835008.0   1835008.0   1835008.0   1835008.0 34478     6    0.128  572.454</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>OGCMN</td>
<td>Minimum old generation capacity (kB).</td>
</tr>
<tr>
<td>OGCMX</td>
<td>Maximum old generation capacity (kB).</td>
</tr>
<tr>
<td>OGC</td>
<td>Current old generation capacity (kB).</td>
</tr>
<tr>
<td>OC</td>
<td>Current old space capacity (kB).</td>
</tr>
<tr>
<td>YGC</td>
<td>Number of young generation GC events.</td>
</tr>
<tr>
<td>FGC</td>
<td>Number of full GC events.</td>
</tr>
<tr>
<td>FGCT</td>
<td>Full garbage collection time.</td>
</tr>
<tr>
<td>GCT</td>
<td>Total garbage collection time.</td>
</tr>
</tbody></table>
<h3 id="gcmetacapacity"><a href="#gcmetacapacity" class="headerlink" title="gcmetacapacity"></a>gcmetacapacity</h3><p>Displays statistics about the sizes of the metaspace.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -gcmetacapacity 19</span><br><span class="line">   MCMN       MCMX        MC       CCSMN      CCSMX       CCSC     YGC   FGC    FGCT     GCT   </span><br><span class="line">       0.0  1130496.0    92564.0        0.0  1048576.0    12236.0 34593     6    0.128  574.271</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>MCMN</td>
<td>Minimum metaspace capacity (kB).</td>
</tr>
<tr>
<td>MCMX</td>
<td>Maximum metaspace capacity (kB).</td>
</tr>
<tr>
<td>MC</td>
<td>Metaspace capacity (kB).</td>
</tr>
<tr>
<td>CCSMN</td>
<td>Compressed class space minimum capacity (kB).</td>
</tr>
<tr>
<td>CCSMX</td>
<td>Compressed class space maximum capacity (kB).</td>
</tr>
<tr>
<td>YGC</td>
<td>Number of young generation GC events.</td>
</tr>
<tr>
<td>FGC</td>
<td>Number of full GC events.</td>
</tr>
<tr>
<td>FGCT</td>
<td>Full garbage collection time.</td>
</tr>
<tr>
<td>GCT</td>
<td>Total garbage collection time.</td>
</tr>
</tbody></table>
<h3 id="gcutil"><a href="#gcutil" class="headerlink" title="gcutil"></a>gcutil</h3><p>Displays a summary about garbage collection statistics.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -gcutil 19</span><br><span class="line">  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT   </span><br><span class="line">  0.16   0.00  14.11  23.02  89.37  83.50  34596  574.184     6    0.128  574.312</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
<th>样例</th>
</tr>
</thead>
<tbody><tr>
<td>S0</td>
<td>Survivor space 0 utilization as a percentage of the space’s current capacity.</td>
<td></td>
</tr>
<tr>
<td>S1</td>
<td>Survivor space 1 utilization as a percentage of the space’s current capacity.</td>
<td></td>
</tr>
<tr>
<td>E</td>
<td>Eden space utilization as a percentage of the space’s current capacity.</td>
<td></td>
</tr>
<tr>
<td>O</td>
<td>Old space utilization as a percentage of the space’s current capacity.</td>
<td></td>
</tr>
<tr>
<td>M</td>
<td>Metaspace utilization as a percentage of the space’s current capacity.</td>
<td>1. Klass Metaspace以及NoKlass Metaspace两者总共的使用率<br/>2. MC&#x3D;92564.0, MU&#x3D;82773.0, CCSC&#x3D;12236.0, CCSU&#x3D;10223.6<br/>3. M &#x3D; MU&#x2F;MC &#x3D; 89.4<br/>4. 有时候M达到90%以上，不一定说明metaspace使用了很多，因为内存是慢慢commit的</td>
</tr>
<tr>
<td>CCS</td>
<td>Compressed class space utilization as a percentage.</td>
<td>1. NoKlass Metaspace的使用率<br/>2. MC&#x3D;92564.0, MU&#x3D;82773.0, CCSC&#x3D;12236.0, CCSU&#x3D;10223.6<br/>3. CCS &#x3D; CCSU&#x2F;CCSC &#x3D; 83.5</td>
</tr>
<tr>
<td>YGC</td>
<td>Number of young generation GC events.</td>
<td></td>
</tr>
<tr>
<td>YGCT</td>
<td>Young generation garbage collection time.</td>
<td></td>
</tr>
<tr>
<td>FGC</td>
<td>Number of full GC events.</td>
<td></td>
</tr>
<tr>
<td>FGCT</td>
<td>Full garbage collection time.</td>
<td></td>
</tr>
<tr>
<td>GCT</td>
<td>Total garbage collection time.</td>
<td></td>
</tr>
</tbody></table>
<h3 id="gccause"><a href="#gccause" class="headerlink" title="gccause"></a>gccause</h3><p>Displays a summary about garbage collection statistics (same as -gcutil), with the cause of the <strong>last</strong> and <strong>current</strong> (when<br>applicable) garbage collection events.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jstat -gccause 19</span><br><span class="line">  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT    LGCC                 GCC                 </span><br><span class="line">  0.00   0.83   2.23  22.60  89.67  84.02  33919  563.393     6    0.128  563.521 Allocation Failure   No GC</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>备注</th>
<th>样例</th>
</tr>
</thead>
<tbody><tr>
<td>LGCC</td>
<td>Cause of <strong>last</strong> garbage collection</td>
<td>Allocation Failure</td>
</tr>
<tr>
<td>GCC</td>
<td>Cause of <strong>current</strong> garbage collection</td>
<td>No GC</td>
</tr>
</tbody></table>
<h2 id="jmap"><a href="#jmap" class="headerlink" title="jmap"></a>jmap</h2><ol>
<li>Prints shared object memory maps or heap memory details for a process, core file, or remote debug server.</li>
<li>由于jmap将访问<strong>堆中的所有对象</strong>，为了保证次此过程不被应用线程干扰<ul>
<li>jmap需要借助<strong>安全点机制</strong>，让所有线程停留在不改变堆中数据的状态</li>
</ul>
</li>
<li>因此，<strong>jmap导出的堆快照必定是安全点位置的</strong>，可能导致基于该堆快照的分析结果存在<strong>偏差</strong><ul>
<li>例如编译生成的机器码中，某些对象的生命周期在两个安全点之间，那么:live选项将无法探知到这些对象</li>
</ul>
</li>
<li>如果某个线程长时间无法跑到安全点，jmap将一直等待下去<ul>
<li>垃圾回收器会主动将jstat所需要的摘要数据保存至<strong>固定位置</strong></li>
<li>因此jstat只需要直接读取即可</li>
</ul>
</li>
<li><strong>jps&#x2F;jmap&#x2F;jinfo&#x2F;jstack&#x2F;jcmd</strong>，均依赖于JVM的<strong>Attach API</strong>，因此<strong>只能监控本地Java进程</strong></li>
<li>如果开启<code>-XX:+DisableAttachMechanism</code>，那么基于<strong>Attach API</strong>的命令也将无法执行</li>
</ol>
<h3 id="clstats"><a href="#clstats" class="headerlink" title="clstats"></a>clstats</h3><p>Prints class loader wise statistics of Java heap. For each class loader, its name, how active it is, address, parent class loader, and the number and size of classes it has loaded are printed.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ jmap -clstats 19</span><br><span class="line">Attaching to process ID 19, please wait...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.131-b11</span><br><span class="line">finding class loader instances ..done.</span><br><span class="line">computing per loader stat ..done.</span><br><span class="line">please wait.. computing liveness.liveness analysis may be inaccurate ...</span><br><span class="line">class_loader    classes bytes   parent_loader   alive?  type</span><br><span class="line"></span><br><span class="line">&lt;bootstrap&gt;     2508    4508619   null          live    &lt;internal&gt;</span><br><span class="line">0x000000009388bb88      1       1473      null          dead    sun/reflect/DelegatingClassLoader@0x0000000100009df8</span><br><span class="line">0x0000000090bcccb8      1       1472    0x0000000090024a50      dead    sun/reflect/DelegatingClassLoader@0x0000000100009df8</span><br><span class="line">...</span><br><span class="line">total = 634     12693   20378456            N/A         alive=1, dead=633           N/A</span><br></pre></td></tr></table></figure>

<h3 id="finalizerinfo"><a href="#finalizerinfo" class="headerlink" title="finalizerinfo"></a>finalizerinfo</h3><p>Prints information about objects that are awaiting finalization.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ jmap -finalizerinfo 19</span><br><span class="line">Attaching to process ID 19, please wait...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.131-b11</span><br><span class="line">Number of objects pending for finalization: 0</span><br></pre></td></tr></table></figure>

<h3 id="heap"><a href="#heap" class="headerlink" title="heap"></a>heap</h3><p>Prints a heap summary of the garbage collection used, the head configuration, and generation-wise heap usage. In addition, the number and size of interned Strings are printed.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">$ jmap -heap 19</span><br><span class="line">Attaching to process ID 19, please wait...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.131-b11</span><br><span class="line"></span><br><span class="line">using parallel threads in the new generation.</span><br><span class="line">using thread-local object allocation.</span><br><span class="line">Concurrent Mark-Sweep GC</span><br><span class="line"></span><br><span class="line">Heap Configuration:</span><br><span class="line">   MinHeapFreeRatio         = 40</span><br><span class="line">   MaxHeapFreeRatio         = 70</span><br><span class="line">   MaxHeapSize              = 2013265920 (1920.0MB)</span><br><span class="line">   NewSize                  = 134217728 (128.0MB)</span><br><span class="line">   MaxNewSize               = 134217728 (128.0MB)</span><br><span class="line">   OldSize                  = 1879048192 (1792.0MB)</span><br><span class="line">   NewRatio                 = 2</span><br><span class="line">   SurvivorRatio            = 1</span><br><span class="line">   MetaspaceSize            = 21807104 (20.796875MB)</span><br><span class="line">   CompressedClassSpaceSize = 1073741824 (1024.0MB)</span><br><span class="line">   MaxMetaspaceSize         = 17592186044415 MB</span><br><span class="line">   G1HeapRegionSize         = 0 (0.0MB)</span><br><span class="line"></span><br><span class="line">Heap Usage:</span><br><span class="line">New Generation (Eden + 1 Survivor Space):</span><br><span class="line">   capacity = 89522176 (85.375MB)</span><br><span class="line">   used     = 32297224 (30.80103302001953MB)</span><br><span class="line">   free     = 57224952 (54.57396697998047MB)</span><br><span class="line">   36.07734467937866% used</span><br><span class="line">Eden Space:</span><br><span class="line">   capacity = 44826624 (42.75MB)</span><br><span class="line">   used     = 31529392 (30.068771362304688MB)</span><br><span class="line">   free     = 13297232 (12.681228637695312MB)</span><br><span class="line">   70.33630728024488% used</span><br><span class="line">From Space:</span><br><span class="line">   capacity = 44695552 (42.625MB)</span><br><span class="line">   used     = 767832 (0.7322616577148438MB)</span><br><span class="line">   free     = 43927720 (41.892738342285156MB)</span><br><span class="line">   1.7179159125274928% used</span><br><span class="line">To Space:</span><br><span class="line">   capacity = 44695552 (42.625MB)</span><br><span class="line">   used     = 0 (0.0MB)</span><br><span class="line">   free     = 44695552 (42.625MB)</span><br><span class="line">   0.0% used</span><br><span class="line">concurrent mark-sweep generation:</span><br><span class="line">   capacity = 1879048192 (1792.0MB)</span><br><span class="line">   used     = 33776136 (32.21143341064453MB)</span><br><span class="line">   free     = 1845272056 (1759.7885665893555MB)</span><br><span class="line">   1.7975130251475744% used</span><br><span class="line"></span><br><span class="line">21703 interned Strings occupying 2142592 bytes.</span><br></pre></td></tr></table></figure>

<h3 id="histo-live"><a href="#histo-live" class="headerlink" title="histo[:live]"></a>histo[:live]</h3><p>Prints a histogram of the heap. For each Java class, the number of objects, memory size in bytes, and the fully qualified class names are printed. The JVM internal class names are printed with an asterisk (*) prefix. If the live suboption is specified, then only active objects are counted.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ jmap -histo:live 19</span><br><span class="line">num     #instances         #bytes  class name</span><br><span class="line">----------------------------------------------</span><br><span class="line">   1:         72102        6440744  [C</span><br><span class="line">   2:          5996        4159456  [B</span><br><span class="line">   3:         19079        1783760  [Ljava.lang.Object;</span><br><span class="line">   4:         71213        1709112  java.lang.String</span><br><span class="line">...</span><br><span class="line">Total        529634       28005336</span><br></pre></td></tr></table></figure>
<h3 id="dump-live-format-b-file-filename"><a href="#dump-live-format-b-file-filename" class="headerlink" title="dump:[live,] format&#x3D;b, file&#x3D;filename"></a>dump:[live,] format&#x3D;b, file&#x3D;filename</h3><p>Dumps the Java heap in <strong>hprof</strong> binary format to filename. The live suboption is optional, but when specified, only the active objects in the heap are dumped.<br>相关的JVM参数：<code>-XX:+HeapDumpAfterFullGC</code>，<code>-XX:+HeapDumpOnOutOfMemoryError</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jmap -dump:live,format=b,file=/tmp/cover.hprof 19</span><br><span class="line">Dumping heap to /tmp/cover.hprof ...</span><br><span class="line">Heap dump file created</span><br></pre></td></tr></table></figure>

<h2 id="jinfo"><a href="#jinfo" class="headerlink" title="jinfo"></a>jinfo</h2><p>Generates configuration information</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ jinfo 19</span><br><span class="line">Attaching to process ID 19, please wait...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.131-b11</span><br><span class="line">Java System Properties:</span><br><span class="line"></span><br><span class="line">java.runtime.name = Java(TM) SE Runtime Environment</span><br><span class="line">java.vm.version = 25.131-b11</span><br><span class="line">...</span><br><span class="line">conf.key = lz_live_cover</span><br><span class="line">...</span><br><span class="line">VM Flags:</span><br><span class="line">Non-default VM flags: -XX:CICompilerCount=2 -XX:+CMSClassUnloadingEnabled</span><br><span class="line">....</span><br><span class="line">Command line:  -Dconf.key=lz_live_cover -Dconf.env=pre</span><br></pre></td></tr></table></figure>

<h3 id="sysprops"><a href="#sysprops" class="headerlink" title="sysprops"></a>sysprops</h3><p>Prints Java system properties as name-value pairs.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ jinfo -sysprops 19</span><br><span class="line">Attaching to process ID 19, please wait...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.131-b11</span><br><span class="line">java.runtime.name = Java(TM) SE Runtime Environment</span><br><span class="line">java.vm.version = 25.131-b11</span><br><span class="line">...</span><br><span class="line">java.vm.vendor = Oracle Corporation</span><br><span class="line">conf.key = lz_live_cover</span><br><span class="line">...</span><br><span class="line">java.vm.name = Java HotSpot(TM) 64-Bit Server VM</span><br><span class="line">sun.java.launcher = SUN_STANDARD</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="flags"><a href="#flags" class="headerlink" title="flags"></a>flags</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ jinfo -flags 19</span><br><span class="line">Attaching to process ID 19, please wait...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.131-b11</span><br><span class="line">Non-default VM flags: -XX:CICompilerCount=2 -XX:+CMSClassUnloadingEnabled</span><br><span class="line">...</span><br><span class="line">Command line:  -Dconf.key=lz_live_cover -Dconf.env=pre</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="manageable参数"><a href="#manageable参数" class="headerlink" title="manageable参数"></a>manageable参数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ java -XX:+PrintFlagsFinal -version | grep manageable</span><br><span class="line">     intx CMSAbortablePrecleanWaitMillis            = 100                                 &#123;manageable&#125;</span><br><span class="line">     intx CMSTriggerInterval                        = -1                                  &#123;manageable&#125;</span><br><span class="line">     intx CMSWaitDuration                           = 2000                                &#123;manageable&#125;</span><br><span class="line">     bool HeapDumpAfterFullGC                       = false                               &#123;manageable&#125;</span><br><span class="line">     bool HeapDumpBeforeFullGC                      = false                               &#123;manageable&#125;</span><br><span class="line">     bool HeapDumpOnOutOfMemoryError                = false                               &#123;manageable&#125;</span><br><span class="line">    ccstr HeapDumpPath                              =                                     &#123;manageable&#125;</span><br><span class="line">    uintx MaxHeapFreeRatio                          = 100                                 &#123;manageable&#125;</span><br><span class="line">    uintx MinHeapFreeRatio                          = 0                                   &#123;manageable&#125;</span><br><span class="line">     bool PrintClassHistogram                       = false                               &#123;manageable&#125;</span><br><span class="line">     bool PrintClassHistogramAfterFullGC            = false                               &#123;manageable&#125;</span><br><span class="line">     bool PrintClassHistogramBeforeFullGC           = false                               &#123;manageable&#125;</span><br><span class="line">     bool PrintConcurrentLocks                      = false                               &#123;manageable&#125;</span><br><span class="line">     bool PrintGC                                   = false                               &#123;manageable&#125;</span><br><span class="line">     bool PrintGCDateStamps                         = false                               &#123;manageable&#125;</span><br><span class="line">     bool PrintGCDetails                            = false                               &#123;manageable&#125;</span><br><span class="line">     bool PrintGCID                                 = false                               &#123;manageable&#125;</span><br><span class="line">     bool PrintGCTimeStamps                         = false                               &#123;manageable&#125;</span><br><span class="line">java version &quot;1.8.0_131&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_131-b11)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)</span><br></pre></td></tr></table></figure>

<h3 id="flag"><a href="#flag" class="headerlink" title="flag"></a>flag</h3><p>Prints the name and value of the specified command-line flag.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ jinfo -flag HeapDumpAfterFullGC 19</span><br><span class="line">-XX:-HeapDumpAfterFullGC</span><br></pre></td></tr></table></figure>

<h3 id="flag-name"><a href="#flag-name" class="headerlink" title="flag [+|-]name"></a>flag [+|-]name</h3><p>Enables or disables the specified Boolean command-line flag.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ jinfo -flag +HeapDumpAfterFullGC 19</span><br><span class="line"></span><br><span class="line">$ jinfo -flag HeapDumpAfterFullGC 19</span><br><span class="line">-XX:+HeapDumpAfterFullGC</span><br></pre></td></tr></table></figure>

<h3 id="flag-name-value"><a href="#flag-name-value" class="headerlink" title="flag name&#x3D;value"></a>flag name&#x3D;value</h3><p>Sets the specified command-line flag to the specified value.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ jinfo -flag CMSWaitDuration=1999 19</span><br><span class="line"></span><br><span class="line">$ jinfo -flag CMSWaitDuration 19</span><br><span class="line">-XX:CMSWaitDuration=1999</span><br></pre></td></tr></table></figure>

<h2 id="jstack"><a href="#jstack" class="headerlink" title="jstack"></a>jstack</h2><p>Prints Java thread stack traces for a Java process, core file, or remote debug server.<br>jstack的一个常用应用场景为<strong>死锁检测</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">$ jstack 19120</span><br><span class="line">2019-01-10 09:53:21</span><br><span class="line">Full thread dump Java HotSpot(TM) 64-Bit Server VM (25.181-b13 mixed mode):</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&quot;t3&quot; #12 prio=5 os_prio=31 tid=0x00007faa948b4800 nid=0xf07 waiting for monitor entry [0x00007000043c8000]</span><br><span class="line">   java.lang.Thread.State: BLOCKED (on object monitor)</span><br><span class="line">    at me.zhongmingmao.advanced.command.SyncThread.run(ThreadDeadlock.java:39)</span><br><span class="line">    - waiting to lock &lt;0x0000000795700530&gt; (a java.lang.Object)</span><br><span class="line">    - locked &lt;0x0000000795700550&gt; (a java.lang.Object)</span><br><span class="line">    at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"></span><br><span class="line">&quot;t2&quot; #11 prio=5 os_prio=31 tid=0x00007faa948b4000 nid=0x3c03 waiting for monitor entry [0x0000700005581000]</span><br><span class="line">   java.lang.Thread.State: BLOCKED (on object monitor)</span><br><span class="line">    at me.zhongmingmao.advanced.command.SyncThread.run(ThreadDeadlock.java:39)</span><br><span class="line">    - waiting to lock &lt;0x0000000795700550&gt; (a java.lang.Object)</span><br><span class="line">    - locked &lt;0x0000000795700540&gt; (a java.lang.Object)</span><br><span class="line">    at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"></span><br><span class="line">&quot;t1&quot; #10 prio=5 os_prio=31 tid=0x00007faa948b3000 nid=0x4203 waiting for monitor entry [0x000070000547e000]</span><br><span class="line">   java.lang.Thread.State: BLOCKED (on object monitor)</span><br><span class="line">    at me.zhongmingmao.advanced.command.SyncThread.run(ThreadDeadlock.java:39)</span><br><span class="line">    - waiting to lock &lt;0x0000000795700540&gt; (a java.lang.Object)</span><br><span class="line">    - locked &lt;0x0000000795700530&gt; (a java.lang.Object)</span><br><span class="line">    at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">Found one Java-level deadlock:</span><br><span class="line">=============================</span><br><span class="line">&quot;t3&quot;:</span><br><span class="line">  waiting to lock monitor 0x00007faa94811b58 (object 0x0000000795700530, a java.lang.Object),</span><br><span class="line">  which is held by &quot;t1&quot;</span><br><span class="line">&quot;t1&quot;:</span><br><span class="line">  waiting to lock monitor 0x00007faa9480da08 (object 0x0000000795700540, a java.lang.Object),</span><br><span class="line">  which is held by &quot;t2&quot;</span><br><span class="line">&quot;t2&quot;:</span><br><span class="line">  waiting to lock monitor 0x00007faa94811aa8 (object 0x0000000795700550, a java.lang.Object),</span><br><span class="line">  which is held by &quot;t3&quot;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">Found 1 deadlock.</span><br></pre></td></tr></table></figure>

<h2 id="jcmd"><a href="#jcmd" class="headerlink" title="jcmd"></a>jcmd</h2><p>Sends diagnostic command requests to a running Java Virtual Machine (JVM).<br><strong>jcmd可以替代上面除了jstat之外的所有命令，并没有保留jstat的输出格式</strong></p>
<h3 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jcmd -l</span><br><span class="line">19 fm.lizhi.live.cover.LiveCoverMain lz-live-cover-pre-deployment-5f45b6955d-f4xjj</span><br><span class="line">3241 sun.tools.jcmd.JCmd -l</span><br></pre></td></tr></table></figure>

<h3 id="查看性能统计"><a href="#查看性能统计" class="headerlink" title="查看性能统计"></a>查看性能统计</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ jcmd 19 PerfCounter.print</span><br><span class="line">java.ci.totalTime=445938928367</span><br><span class="line">java.cls.loadedClasses=20317</span><br><span class="line">...</span><br><span class="line">java.threads.daemon=121</span><br><span class="line">java.threads.live=124</span><br><span class="line">java.threads.livePeak=125</span><br><span class="line">java.threads.started=2458</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="可执行的操作"><a href="#可执行的操作" class="headerlink" title="可执行的操作"></a>可执行的操作</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$ jcmd 19 help</span><br><span class="line">19:</span><br><span class="line">The following commands are available:</span><br><span class="line">JFR.stop</span><br><span class="line">JFR.start</span><br><span class="line">JFR.dump</span><br><span class="line">JFR.check</span><br><span class="line">VM.native_memory</span><br><span class="line">VM.check_commercial_features</span><br><span class="line">VM.unlock_commercial_features</span><br><span class="line">ManagementAgent.stop</span><br><span class="line">ManagementAgent.start_local</span><br><span class="line">ManagementAgent.start</span><br><span class="line">GC.rotate_log</span><br><span class="line">Thread.print</span><br><span class="line">GC.class_stats</span><br><span class="line">GC.class_histogram</span><br><span class="line">GC.heap_dump</span><br><span class="line">GC.run_finalization</span><br><span class="line">GC.run</span><br><span class="line">VM.uptime</span><br><span class="line">VM.flags</span><br><span class="line">VM.system_properties</span><br><span class="line">VM.command_line</span><br><span class="line">VM.version</span><br><span class="line">help</span><br></pre></td></tr></table></figure>

<h4 id="VM-uptime"><a href="#VM-uptime" class="headerlink" title="VM.uptime"></a>VM.uptime</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jcmd 19 VM.uptime</span><br><span class="line">19:</span><br><span class="line">87089.850 s</span><br></pre></td></tr></table></figure>

<h4 id="GC-run"><a href="#GC-run" class="headerlink" title="GC.run"></a>GC.run</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jcmd 19 GC.run</span><br><span class="line">19:</span><br><span class="line">Command executed successfully</span><br></pre></td></tr></table></figure>

<h4 id="Thread-print"><a href="#Thread-print" class="headerlink" title="Thread.print"></a>Thread.print</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ jcmd 3721 Thread.print</span><br><span class="line">Found one Java-level deadlock:</span><br><span class="line">=============================</span><br><span class="line">&quot;t3&quot;:</span><br><span class="line">  waiting to lock monitor 0x00007fd53105ff58 (object 0x0000000795700530, a java.lang.Object),</span><br><span class="line">  which is held by &quot;t1&quot;</span><br><span class="line">&quot;t1&quot;:</span><br><span class="line">  waiting to lock monitor 0x00007fd53105be08 (object 0x0000000795700540, a java.lang.Object),</span><br><span class="line">  which is held by &quot;t2&quot;</span><br><span class="line">&quot;t2&quot;:</span><br><span class="line">  waiting to lock monitor 0x00007fd53105fea8 (object 0x0000000795700550, a java.lang.Object),</span><br><span class="line">  which is held by &quot;t3&quot;</span><br></pre></td></tr></table></figure>

<h4 id="JFR"><a href="#JFR" class="headerlink" title="JFR"></a>JFR</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ jcmd 3721 JFR.check</span><br><span class="line">3721:</span><br><span class="line">Java Flight Recorder not enabled.</span><br><span class="line">Use VM.unlock_commercial_features to enable.</span><br><span class="line"></span><br><span class="line">$ jcmd 3721 VM.unlock_commercial_features</span><br><span class="line">3721:</span><br><span class="line">Commercial Features now unlocked.</span><br><span class="line"></span><br><span class="line">$ jcmd 3721 JFR.check</span><br><span class="line">3721:</span><br><span class="line">No available recordings.</span><br><span class="line">Use JFR.start to start a recording.</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ jcmd 3721 JFR.start name=abc,duration=120s</span><br><span class="line">3721:</span><br><span class="line">Started recording 1. No limit (duration/maxsize/maxage) in use.</span><br><span class="line">Use JFR.dump name=abc,duration=120s filename=FILEPATH to copy recording data to file.</span><br><span class="line"></span><br><span class="line">$ jcmd 3721 JFR.check</span><br><span class="line">3721:</span><br><span class="line">Recording: recording=1 name=&quot;abc,duration=120s&quot; (running)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cmd 3721 JFR.dump name=abc,duration=120s filename=abc.jfr</span><br><span class="line">3721:</span><br><span class="line">Dumped recording &quot;abc,duration=120s&quot;, 391.4 kB written to:</span><br><span class="line">/Users/zhongmingmao/Documents/source_code/github/jvm_demo/abc.jfr</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jcmd 3721 JFR.stop name=abc,duration=120s</span><br><span class="line">3721:</span><br><span class="line">Stopped recording &quot;abc,duration=120s&quot;.</span><br></pre></td></tr></table></figure>

<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a target="_blank" rel="noopener" href="https://time.geekbang.org/column/intro/100010301">深入拆解Java虚拟机</a></p>
<!-- indicate-the-source -->
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css"></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://blog.zhongmingmao.top">zhongmingmao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://blog.zhongmingmao.top/2019/01/08/jvm-advanced-command/">https://blog.zhongmingmao.top/2019/01/08/jvm-advanced-command/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/">Java</a><a class="post-meta__tags" href="/tags/jvm/">JVM</a></div><div class="post-share"><div class="social-share" data-image="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-18.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2019/01/10/jvm-advanced-gui-mat/" title="JVM进阶 -- MAT"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-10.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">JVM进阶 -- MAT</div></div><div class="info-2"><div class="info-item-1">概念Shallow Heap + Retained HeapShallow HeapShallow heap is the memory consumed by one object. An object needs 32 or 64 bits (depending on the OS architecture) per reference, 4 bytes per Integer, 8 bytes per Long, etc. Depending on the heap dump format the size may be adjusted (e.g. aligned to 8, etc…) to model better the real consumption of the VM. Retained SetRetained set of X is the set of objects which would be removed by GC when X is garbage collected. Retained HeapRetained heap of X is the sum of sha...</div></div></div></a><a class="pagination-related" href="/2019/01/07/jvm-advanced-annotation-processor/" title="JVM进阶 -- 浅谈注解处理器"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-9.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">JVM进阶 -- 浅谈注解处理器</div></div><div class="info-2"><div class="info-item-1">注解与注解处理器 注解是Java 5引入，用来为类、方法、字段和参数等Java结构提供额外信息的机制 @Override仅对Java编译器有用，为Java编译器引用一条新的编译规则，编译完成后，它的使命也结束了 Java的注解机制允许开发人员自定义注解，这些自定义注解同样可以为Java编译器添加编译规则 这种功能需要由开发人员提供，并且以插件的形式接入Java编译器中，这些插件被称之为注解处理器   除了引入新的编译规则外，注解处理器还可以用于修改已有的Java源文件（不推荐）和生成新的Java源文件  123456789@Target(ElementType.METHOD)@Retention(RetentionPolicy.SOURCE)public @interface Override &#123;&#125;// 元注解@Target：用来限定目标注解所能标注的Java结构// 元注解@Retention：用来限定目标注解的生命周期//      SOURCE：源代码，一旦源代码被编译为字节码，注解便会被擦除//      CLASS：源代码+字节码//      RUNTIME：源代码+字节...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/02/22/jvm-bytecode-manipulation-asm-introduction/" title="ASM - Introduction"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-5.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-22</div><div class="info-item-2">ASM - Introduction</div></div><div class="info-2"><div class="info-item-1">Glance ASM is an all purpose Java bytecode manipulation and analysis framework. It can be used to modify existing classes or to dynamically generate classes, directly in binary form.   ASM provides some common bytecode transformations and analysis algorithms from which custom complex transformations and code analysis tools can be built. ASM offers similar functionality as other Java bytecode frameworks, but is focused on performance. Because it was designed and implemented to be as small and as fast as p...</div></div></div></a><a class="pagination-related" href="/2022/02/11/jvm-bytecode-manipulation-javassist/" title="Bytecode Manipulation - Javassist"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-17.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-11</div><div class="info-item-2">Bytecode Manipulation - Javassist</div></div><div class="info-2"><div class="info-item-1">概要 Unlike other similar bytecode editors, Javassist provides two levels of API: source level and bytecode level.  生成字节码1234567891011121314151617package me.zhongmingmao.javassist;public class Point &#123;  private int x;  private int y;  public Point(int x, int y) &#123;    this.x = x;    this.y = y;  &#125;  public void move(int x, int y) &#123;    this.x = x;    this.y = y;  &#125;&#125;  12$ javac me/zhongmingmao/javassist/Point.java$ javap -v me.zhongmingmao.javassist.Point    123456789101112131415161...</div></div></div></a><a class="pagination-related" href="/2022/02/10/jvm-bytecode-manipulation-java-agent-practice/" title="Bytecode Manipulation - Java Agent Practice"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-9.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-10</div><div class="info-item-2">Bytecode Manipulation - Java Agent Practice</div></div><div class="info-2"><div class="info-item-1">概念Instrument Instrument 是 JVM 提供的一个可以修改已加载类的类库，依赖于 JVMTI 的 Attach API 机制 要使用 Instrument 的类修改功能，需要实现 java.lang.instrument.ClassFileTransformer 接口 可以在 ClassFileTransformer#transform 中利用 ASM 或者 Byte Buddy 等工具对字节码进行操作   Instrument 通过与 Java Agent 结合来注入到 JVM 中  JVMTI &amp; Agent JPDA（Java Platform Debugger Architecture）是 JDK 标准，必须实现 如果 JVM 启动时开启了 JPDA，那么类是允许被重新加载的 已加载的旧版类信息被卸载，然后重新加载新版本的类   JVMTI 是 JVM 提供的一套对 JVM 进行操作的工具接口，Agent 是 JVMTI 的一种实现 Attach API 的作用：提供 JVM 进程间通信的能力 Attach 后，目标 JVM 在运行时走到 Agent 中定义的 age...</div></div></div></a><a class="pagination-related" href="/2019/09/13/java-performance-jvm-heap-allocation/" title="Java性能 -- JVM堆内存分配"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-5.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-09-13</div><div class="info-item-2">Java性能 -- JVM堆内存分配</div></div><div class="info-2"><div class="info-item-1">JVM内存分配性能问题 JVM内存分配不合理最直接的表现就是频繁的GC，这会导致上下文切换，从而降低系统的吞吐量，增加系统的响应时间  对象在堆中的生命周期 在JVM内存模型的堆中，堆被划分为新生代和老年代 新生代又被进一步划分为Eden区和Survivor区，Survivor区由From Survivor和To Survivor组成   当创建一个对象时，对象会被优先分配到新生代的Eden区 此时JVM会给对象定义一个对象年轻计数器（-XX:MaxTenuringThreshold）   当Eden空间不足时，JVM将执行新生代的垃圾回收（Minor GC） JVM会把存活的对象转移到Survivor中，并且对象年龄+1 对象在Survivor中同样也会经历Minor GC，每经历一次Minor GC，对象年龄都会+1   如果分配的对象超过了-XX:PetenureSizeThreshold，对象会直接被分配到老年代    查看JVM堆内存分配 在默认不配置JVM堆内存大小的情况下，JVM根据默认值来配置当前内存大小 在JDK 1.7中，默认情况下新生代和老年代的比例是1:2，可以通过–XX:New...</div></div></div></a><a class="pagination-related" href="/2019/09/11/java-performance-gc/" title="Java性能 -- GC"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-23.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-09-11</div><div class="info-item-2">Java性能 -- GC</div></div><div class="info-2"><div class="info-item-1">GC机制回收区域 JVM的内存区域中，程序计数器、虚拟机栈、本地方法栈是线程私有，随线程的创建而创建，销毁而销毁 栈中的栈帧随着方法的进入和退出进行入栈和出栈操作，每个栈帧分配多少内存基本是在类结构确定下来时就已知 因此，这三个区域的内存分配和回收都是具有确定性的   堆中的回收主要是对象回收，方法区的回收主要是废弃常量和无用类的回收    回收时机 当一个对象不再被引用，就代表该对象可以被回收 引用计数法：实现简单，判断效率高，但存在循环引用的问题 可达性分析算法：HotSpot VM     引用类型 功能特点    强引用（Strong Reference） 被强引用关联的对象，永远不会被垃圾回收器回收   软引用（Soft Reference） 被软引用关联的对象，只有当系统将要发生内存溢出时，才会去回收软引用关联的对象   弱引用（Weak Reference） 只被弱引用关联的对象，只要发生GC事件，就会被回收   虚引用（Phantom Reference） 被虚引用关联的对象，唯一作用是在这个对象被回收时收到一个系统通知   回收特性 自动性 Java提供了一个系统级的线程来跟踪每一块分...</div></div></div></a><a class="pagination-related" href="/2019/09/09/java-performance-jit/" title="Java性能 -- JIT"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-19.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-09-09</div><div class="info-item-2">Java性能 -- JIT</div></div><div class="info-2"><div class="info-item-1">编译 前端编译：即常见的**.java文件被编译成.class文件**的过程 运行时编译：机器无法直接运行Java生成的字节码，在运行时，JIT或者解释器会将字节码转换为机器码 类文件在运行时被进一步编译，可以变成高度优化的机器代码   C&#x2F;C++编译器的所有优化都是在编译期完成的，运行期的性能监控仅作为基础的优化措施是无法进行的 JIT编译器是JVM中运行时编译最重要的部分之一    编译 &#x2F; 加载 &#x2F; 执行  类编译 javac：将.java文件编译成.class文件 javap：反编译.class文件，重点关注常量池和方法表集合 常量池主要记录的是类文件中出现的字面量和符号引用 字面量：字符串常量、基本类型的常量 符号引用：类和接口的全限定名、类引用、方法引用、成员变量引用   方法表集合 方法的字节码、方法访问权限、方法名索引、描述符索引、JVM执行指令、属性集合等        类加载 当一个类被创建实例或者被其他对象引用时，JVM如果没有加载过该类，会通过类加载器将**.class文件加载到内存**中 不同的实现类由不同的类加载器加载 JDK中的本地方法类一般由...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">zhongmingmao</div><div class="author-info-description">Focus on Infrastructure.</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">639</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">191</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">83</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#jps"><span class="toc-number">1.</span> <span class="toc-text">jps</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jstat"><span class="toc-number">2.</span> <span class="toc-text">jstat</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#class"><span class="toc-number">2.1.</span> <span class="toc-text">class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compiler"><span class="toc-number">2.2.</span> <span class="toc-text">compiler</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#printcompilation"><span class="toc-number">2.3.</span> <span class="toc-text">printcompilation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gc"><span class="toc-number">2.4.</span> <span class="toc-text">gc</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#G1"><span class="toc-number">2.4.1.</span> <span class="toc-text">G1</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gcnew"><span class="toc-number">2.5.</span> <span class="toc-text">gcnew</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gcold"><span class="toc-number">2.6.</span> <span class="toc-text">gcold</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gccapacity"><span class="toc-number">2.7.</span> <span class="toc-text">gccapacity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gcnewcapacity"><span class="toc-number">2.8.</span> <span class="toc-text">gcnewcapacity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gcoldcapacity"><span class="toc-number">2.9.</span> <span class="toc-text">gcoldcapacity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gcmetacapacity"><span class="toc-number">2.10.</span> <span class="toc-text">gcmetacapacity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gcutil"><span class="toc-number">2.11.</span> <span class="toc-text">gcutil</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gccause"><span class="toc-number">2.12.</span> <span class="toc-text">gccause</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jmap"><span class="toc-number">3.</span> <span class="toc-text">jmap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#clstats"><span class="toc-number">3.1.</span> <span class="toc-text">clstats</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#finalizerinfo"><span class="toc-number">3.2.</span> <span class="toc-text">finalizerinfo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#heap"><span class="toc-number">3.3.</span> <span class="toc-text">heap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#histo-live"><span class="toc-number">3.4.</span> <span class="toc-text">histo[:live]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dump-live-format-b-file-filename"><span class="toc-number">3.5.</span> <span class="toc-text">dump:[live,] format&#x3D;b, file&#x3D;filename</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jinfo"><span class="toc-number">4.</span> <span class="toc-text">jinfo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sysprops"><span class="toc-number">4.1.</span> <span class="toc-text">sysprops</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flags"><span class="toc-number">4.2.</span> <span class="toc-text">flags</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#manageable%E5%8F%82%E6%95%B0"><span class="toc-number">4.3.</span> <span class="toc-text">manageable参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flag"><span class="toc-number">4.4.</span> <span class="toc-text">flag</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flag-name"><span class="toc-number">4.5.</span> <span class="toc-text">flag [+|-]name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flag-name-value"><span class="toc-number">4.6.</span> <span class="toc-text">flag name&#x3D;value</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jstack"><span class="toc-number">5.</span> <span class="toc-text">jstack</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jcmd"><span class="toc-number">6.</span> <span class="toc-text">jcmd</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B"><span class="toc-number">6.1.</span> <span class="toc-text">查看进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%80%A7%E8%83%BD%E7%BB%9F%E8%AE%A1"><span class="toc-number">6.2.</span> <span class="toc-text">查看性能统计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">6.3.</span> <span class="toc-text">可执行的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#VM-uptime"><span class="toc-number">6.3.1.</span> <span class="toc-text">VM.uptime</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GC-run"><span class="toc-number">6.3.2.</span> <span class="toc-text">GC.run</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Thread-print"><span class="toc-number">6.3.3.</span> <span class="toc-text">Thread.print</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JFR"><span class="toc-number">6.3.4.</span> <span class="toc-text">JFR</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">7.</span> <span class="toc-text">参考资料</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/01/21/cloud-native-observability-opentelemetry-java-zero-code/" title="Observability - OpenTelemetry Java Zero Code"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/otel-java-agent.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - OpenTelemetry Java Zero Code"/></a><div class="content"><a class="title" href="/2025/01/21/cloud-native-observability-opentelemetry-java-zero-code/" title="Observability - OpenTelemetry Java Zero Code">Observability - OpenTelemetry Java Zero Code</a><time datetime="2025-01-20T16:06:25.000Z" title="Created 2025-01-21 00:06:25">2025-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/20/cloud-native-observability-opentelemetry-java/" title="Observability - OpenTelemetry Java"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/otel-java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - OpenTelemetry Java"/></a><div class="content"><a class="title" href="/2025/01/20/cloud-native-observability-opentelemetry-java/" title="Observability - OpenTelemetry Java">Observability - OpenTelemetry Java</a><time datetime="2025-01-19T16:06:25.000Z" title="Created 2025-01-20 00:06:25">2025-01-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/19/ai-agent-overview-mcp/" title="AI Agent - MCP Overview"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ai-agent-1253868755.cos.ap-guangzhou.myqcloud.com/mcp.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI Agent - MCP Overview"/></a><div class="content"><a class="title" href="/2025/01/19/ai-agent-overview-mcp/" title="AI Agent - MCP Overview">AI Agent - MCP Overview</a><time datetime="2025-01-18T16:06:25.000Z" title="Created 2025-01-19 00:06:25">2025-01-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/18/ai-agent-overview/" title="AI Agent - Overview"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ai-agent-1253868755.cos.ap-guangzhou.myqcloud.com/ai-agent.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI Agent - Overview"/></a><div class="content"><a class="title" href="/2025/01/18/ai-agent-overview/" title="AI Agent - Overview">AI Agent - Overview</a><time datetime="2025-01-17T16:06:25.000Z" title="Created 2025-01-18 00:06:25">2025-01-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/17/new-java-feature-foreign-function-api/" title="New Java Feature - Foreign Function API"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://java-feature-1253868755.cos.ap-guangzhou.myqcloud.com/Java-Foreign-Function-API.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="New Java Feature - Foreign Function API"/></a><div class="content"><a class="title" href="/2025/01/17/new-java-feature-foreign-function-api/" title="New Java Feature - Foreign Function API">New Java Feature - Foreign Function API</a><time datetime="2025-01-16T16:06:25.000Z" title="Created 2025-01-17 00:06:25">2025-01-17</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2015 - 2025 By zhongmingmao</span></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional and Simplified Chinese">繁</button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div></body></html>