<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Go - Go Module | ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="添加依赖 github.com&#x2F;google&#x2F;uuid  main.go1234567891011package mainimport (    &quot;github.com&#x2F;google&#x2F;uuid&quot;    &quot;github.com&#x2F;sirupsen&#x2F;logrus&quot;)func main() &amp;#123;    logrus.Println(&amp;qu">
<meta property="og:type" content="article">
<meta property="og:title" content="Go - Go Module">
<meta property="og:url" content="https://blog.zhongmingmao.top/2022/12/19/go-foundation-go-module/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="添加依赖 github.com&#x2F;google&#x2F;uuid  main.go1234567891011package mainimport (    &quot;github.com&#x2F;google&#x2F;uuid&quot;    &quot;github.com&#x2F;sirupsen&#x2F;logrus&quot;)func main() &amp;#123;    logrus.Println(&amp;qu">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/gomodule.png">
<meta property="article:published_time" content="2022-12-18T16:06:25.000Z">
<meta property="article:modified_time" content="2023-10-10T12:12:04.989Z">
<meta property="article:author" content="zhongmingmao">
<meta property="article:tag" content="Cloud Native">
<meta property="article:tag" content="Go">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/gomodule.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/2022/12/19/go-foundation-go-module/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Go - Go Module',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-10-10 20:12:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">516</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">149</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">69</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/gomodule.png')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Go - Go Module</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">Created</span><time datetime="2022-12-18T16:06:25.000Z" title="Created 2022-12-19 00:06:25">2022-12-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/go/">Go</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">2.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>11min</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h1><blockquote>
<p>github.com&#x2F;google&#x2F;uuid</p>
</blockquote>
<figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;github.com/google/uuid&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/sirupsen/logrus&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    logrus.Println(<span class="string">&quot;hello, gomodule mode&quot;</span>)</span><br><span class="line">    logrus.Println(uuid.NewString())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<blockquote>
<p><code>go.mod</code> 里的 <code>require</code> 字段中，没有任何 Module 提供了包 github.com&#x2F;google&#x2F;uuid</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ go build</span><br><span class="line">main.go:4:2: no required module provides package github.com/google/uuid; to add it:</span><br><span class="line">    go get github.com/google/uuid</span><br></pre></td></tr></table></figure>

<blockquote>
<p>手动 <code>go get</code>，下载依赖到<code>本地 Module 缓存</code>，并更新 <code>go.mod</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ go env GOMODCACHE</span><br><span class="line">/Users/zhongmingmao/workspace/go/pkg/mod</span><br><span class="line"></span><br><span class="line">$ go get github.com/google/uuid</span><br><span class="line">go: downloading github.com/google/uuid v1.3.1</span><br><span class="line">go: added github.com/google/uuid v1.3.1</span><br><span class="line"></span><br><span class="line">$ du -sh /Users/zhongmingmao/workspace/go/pkg/mod/github.com/google/uuid@v1.3.1</span><br><span class="line">140K    /Users/zhongmingmao/workspace/go/pkg/mod/github.com/google/uuid@v1.3.1</span><br><span class="line"></span><br><span class="line">$ cat go.mod</span><br><span class="line">module github.com/zhongmingmao/gomodule</span><br><span class="line"></span><br><span class="line">go 1.21.2</span><br><span class="line"></span><br><span class="line">require github.com/sirupsen/logrus v1.9.3</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/google/uuid v1.3.1 // indirect</span><br><span class="line">    golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>执行 <code>go mod tidy</code> ，可以<code>自动分析</code>源码中的<code>依赖变化</code>，识别并下载<code>新增依赖</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ go mod tidy</span><br><span class="line">go: finding module for package github.com/google/uuid</span><br><span class="line">go: found github.com/google/uuid in github.com/google/uuid v1.3.1</span><br><span class="line"></span><br><span class="line">$ cat go.mod</span><br><span class="line">module github.com/zhongmingmao/gomodule</span><br><span class="line"></span><br><span class="line">go 1.21.2</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/google/uuid v1.3.1</span><br><span class="line">    github.com/sirupsen/logrus v1.9.3</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">require golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span><br></pre></td></tr></table></figure>

<blockquote>
<p>构建并执行</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ go build</span><br><span class="line"></span><br><span class="line">$ ./gomodule</span><br><span class="line">INFO[0000] hello, gomodule mode</span><br><span class="line">INFO[0000] a8ae99d7-d2f2-4f37-96f5-352cf205a336</span><br></pre></td></tr></table></figure>

<h1 id="更改版本"><a href="#更改版本" class="headerlink" title="更改版本"></a>更改版本</h1><blockquote>
<p>语义版本导入</p>
</blockquote>
<h2 id="v1-Y-Z"><a href="#v1-Y-Z" class="headerlink" title="v1.Y.Z"></a>v1.Y.Z</h2><blockquote>
<p>当依赖的主版本号为 <code>0</code> 或者 <code>1</code> 时，对应的 <code>import path</code> 不需要增加主版本号</p>
</blockquote>
<blockquote>
<p>列出 <code>Go Module</code> 的版本列表</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ go list</span><br><span class="line">github.com/zhongmingmao/gomodule</span><br><span class="line"></span><br><span class="line">$ go list -m -versions github.com/sirupsen/logrus</span><br><span class="line">github.com/sirupsen/logrus v0.1.0 v0.1.1 v0.2.0 v0.3.0 v0.4.0 v0.4.1 v0.5.0 v0.5.1 v0.6.0 v0.6.1 v0.6.2 v0.6.3 v0.6.4 v0.6.5 v0.6.6 v0.7.0 v0.7.1 v0.7.2 v0.7.3 v0.8.0 v0.8.1 v0.8.2 v0.8.3 v0.8.4 v0.8.5 v0.8.6 v0.8.7 v0.9.0 v0.10.0 v0.11.0 v0.11.1 v0.11.2 v0.11.3 v0.11.4 v0.11.5 v1.0.0 v1.0.1 v1.0.3 v1.0.4 v1.0.5 v1.0.6 v1.1.0 v1.1.1 v1.2.0 v1.3.0 v1.4.0 v1.4.1 v1.4.2 v1.5.0 v1.6.0 v1.7.0 v1.7.1 v1.8.0 v1.8.1 v1.8.2 v1.8.3 v1.9.0 v1.9.1 v1.9.2 v1.9.3</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过 <code>go get </code> 降级为某个<code>兼容版本</code> v1.8.0</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$ go get github.com/sirupsen/logrus@v1.8.0</span><br><span class="line">go: downloading github.com/sirupsen/logrus v1.8.0</span><br><span class="line">go: downloading github.com/magefile/mage v1.10.0</span><br><span class="line">go: downloading github.com/stretchr/testify v1.2.2</span><br><span class="line">go: added github.com/magefile/mage v1.10.0</span><br><span class="line">go: downgraded github.com/sirupsen/logrus v1.9.3 =&gt; v1.8.0</span><br><span class="line"></span><br><span class="line">$ cat go.mod</span><br><span class="line">module github.com/zhongmingmao/gomodule</span><br><span class="line"></span><br><span class="line">go 1.21.2</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/google/uuid v1.3.1</span><br><span class="line">    github.com/sirupsen/logrus v1.8.0</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/magefile/mage v1.10.0 // indirect</span><br><span class="line">    golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">$ cat go.sum | grep logrus</span><br><span class="line">github.com/sirupsen/logrus v1.8.0 h1:nfhvjKcUMhBMVqbKHJlk5RPrrfYr/NMo3692g0dwfWU=</span><br><span class="line">github.com/sirupsen/logrus v1.8.0/go.mod h1:4GuYW9TZmE769R5STWrRakJc4UqQ3+QQ95fyz7ENv1A=</span><br><span class="line">github.com/sirupsen/logrus v1.9.3 h1:dueUQJ1C2q9oE3F7wvmSGAaVtTmUizReu6fjN8uqzbQ=</span><br><span class="line">github.com/sirupsen/logrus v1.9.3/go.mod h1:naHLuLoDiP4jHNo9R0sCBMtWGeIprob74mVsIT4qYEQ=</span><br><span class="line"></span><br><span class="line">$ go build</span><br><span class="line"></span><br><span class="line">$ ./gomodule</span><br><span class="line">INFO[0000] hello, gomodule mode</span><br><span class="line">INFO[0000] f7825699-04ca-42a7-8d34-acb0c96c47d5</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过 <code>go mod edit</code> 来继续降级为另一个<code>兼容版本</code> v1.7.0</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$ go mod edit -require=github.com/sirupsen/logrus@v1.7.0</span><br><span class="line"></span><br><span class="line">$ cat go.mod</span><br><span class="line">module github.com/zhongmingmao/gomodule</span><br><span class="line"></span><br><span class="line">go 1.21.2</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/google/uuid v1.3.1</span><br><span class="line">    github.com/sirupsen/logrus v1.7.0</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/magefile/mage v1.10.0 // indirect</span><br><span class="line">    golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">$ go mod tidy</span><br><span class="line">go: downloading github.com/sirupsen/logrus v1.7.0</span><br><span class="line"></span><br><span class="line">$ cat go.sum | grep logrus</span><br><span class="line">github.com/sirupsen/logrus v1.7.0 h1:ShrD1U9pZB12TX0cVy0DtePoCH97K8EtX+mg7ZARUtM=</span><br><span class="line">github.com/sirupsen/logrus v1.7.0/go.mod h1:yWOB1SBYBC5VeMP7gHvWumXLIWorT60ONWic61uBYv0=</span><br><span class="line"></span><br><span class="line">$ go build</span><br><span class="line"></span><br><span class="line">$ ./gomodule</span><br><span class="line">INFO[0000] hello, gomodule mode</span><br><span class="line">INFO[0000] dcf1b908-7a9a-471e-b532-f886bd0f379e</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过 <code>go get </code> 升级为某个<code>兼容版本</code> v1.7.1</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ go get github.com/sirupsen/logrus@v1.7.1</span><br><span class="line">go: downloading github.com/sirupsen/logrus v1.7.1</span><br><span class="line">go: added github.com/magefile/mage v1.10.0</span><br><span class="line">go: upgraded github.com/sirupsen/logrus v1.7.0 =&gt; v1.7.1</span><br><span class="line"></span><br><span class="line">$ cat go.mod</span><br><span class="line">module github.com/zhongmingmao/gomodule</span><br><span class="line"></span><br><span class="line">go 1.21.2</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/google/uuid v1.3.1</span><br><span class="line">    github.com/sirupsen/logrus v1.7.1</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/magefile/mage v1.10.0 // indirect</span><br><span class="line">    golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">$ cat go.sum | grep logrus</span><br><span class="line">github.com/sirupsen/logrus v1.7.0 h1:ShrD1U9pZB12TX0cVy0DtePoCH97K8EtX+mg7ZARUtM=</span><br><span class="line">github.com/sirupsen/logrus v1.7.0/go.mod h1:yWOB1SBYBC5VeMP7gHvWumXLIWorT60ONWic61uBYv0=</span><br><span class="line">github.com/sirupsen/logrus v1.7.1 h1:rsizeFmZP+GYwyb4V6t6qpG7ZNWzA2bvgW/yC2xHCcg=</span><br><span class="line">github.com/sirupsen/logrus v1.7.1/go.mod h1:4GuYW9TZmE769R5STWrRakJc4UqQ3+QQ95fyz7ENv1A=</span><br><span class="line"></span><br><span class="line">$ go build</span><br><span class="line"></span><br><span class="line">$ ./gomodule</span><br><span class="line">INFO[0000] hello, gomodule mode</span><br><span class="line">INFO[0000] 413d0dbb-5f8f-4ce5-89fc-8adcdd7dbf28</span><br></pre></td></tr></table></figure>

<h2 id="vX-Y-Z"><a href="#vX-Y-Z" class="headerlink" title="vX.Y.Z"></a>vX.Y.Z</h2><blockquote>
<p>如果要为 Go 项目添加<code>主版本大于 1</code> 的依赖，<code>import path</code> 需要加上<code>主版本号</code></p>
</blockquote>
<figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    _ <span class="string">&quot;github.com/go-redis/redis/v7&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/google/uuid&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/sirupsen/logrus&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    logrus.Println(<span class="string">&quot;hello, gomodule mode&quot;</span>)</span><br><span class="line">    logrus.Println(uuid.NewString())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>选择 go-redis <code>最新</code>的 v7 版本 v7.4.1</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ go mod init github.com/zhongmingmao/gomodule</span><br><span class="line">go: creating new go.mod: module github.com/zhongmingmao/gomodule</span><br><span class="line">go: to add module requirements and sums:</span><br><span class="line">    go mod tidy</span><br><span class="line">    </span><br><span class="line">$ go mod tidy</span><br><span class="line">go: finding module for package github.com/sirupsen/logrus</span><br><span class="line">go: finding module for package github.com/go-redis/redis/v7</span><br><span class="line">go: finding module for package github.com/google/uuid</span><br><span class="line">go: downloading github.com/go-redis/redis v6.15.9+incompatible</span><br><span class="line">go: downloading github.com/go-redis/redis/v7 v7.4.1</span><br><span class="line">go: found github.com/go-redis/redis/v7 in github.com/go-redis/redis/v7 v7.4.1</span><br><span class="line">go: found github.com/google/uuid in github.com/google/uuid v1.3.1</span><br><span class="line">go: found github.com/sirupsen/logrus in github.com/sirupsen/logrus v1.9.3</span><br><span class="line">go: downloading github.com/onsi/ginkgo v1.10.1</span><br><span class="line">go: downloading github.com/onsi/gomega v1.7.0</span><br><span class="line">go: downloading github.com/hpcloud/tail v1.0.0</span><br><span class="line">go: downloading gopkg.in/yaml.v2 v2.2.4</span><br><span class="line">go: downloading golang.org/x/net v0.0.0-20190923162816-aa69164e4478</span><br><span class="line">go: downloading gopkg.in/fsnotify.v1 v1.4.7</span><br><span class="line">go: downloading golang.org/x/text v0.3.2</span><br><span class="line"></span><br><span class="line">$ cat go.mod</span><br><span class="line">module github.com/zhongmingmao/gomodule</span><br><span class="line"></span><br><span class="line">go 1.21.2</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/go-redis/redis/v7 v7.4.1</span><br><span class="line">    github.com/google/uuid v1.3.1</span><br><span class="line">    github.com/sirupsen/logrus v1.9.3</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">require golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span><br></pre></td></tr></table></figure>

<blockquote>
<p>升级到一个<code>不兼容</code>的版本 v8，需要修改 <code>import path</code></p>
</blockquote>
<figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    _ <span class="string">&quot;github.com/go-redis/redis/v8&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/google/uuid&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/sirupsen/logrus&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    logrus.Println(<span class="string">&quot;hello, gomodule mode&quot;</span>)</span><br><span class="line">    logrus.Println(uuid.NewString())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ go mod tidy</span><br><span class="line">go: finding module for package github.com/go-redis/redis/v8</span><br><span class="line">go: found github.com/go-redis/redis/v8 in github.com/go-redis/redis/v8 v8.11.5</span><br><span class="line"></span><br><span class="line">$ cat go.mod</span><br><span class="line">module github.com/zhongmingmao/gomodule</span><br><span class="line"></span><br><span class="line">go 1.21.2</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/go-redis/redis/v8 v8.11.5</span><br><span class="line">    github.com/google/uuid v1.3.1</span><br><span class="line">    github.com/sirupsen/logrus v1.9.3</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/cespare/xxhash/v2 v2.1.2 // indirect</span><br><span class="line">    github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f // indirect</span><br><span class="line">    golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">$ cat go.sum| grep redis</span><br><span class="line">github.com/go-redis/redis/v8 v8.11.5 h1:AcZZR7igkdvfVmQTPnu9WE37LRrO/YrBH5zWyjDC0oI=</span><br><span class="line">github.com/go-redis/redis/v8 v8.11.5/go.mod h1:gREzHqY1hg6oD9ngVRbLStwAWKhA0FEgq8Jd4h5lpwo=</span><br></pre></td></tr></table></figure>

<h1 id="移除依赖"><a href="#移除依赖" class="headerlink" title="移除依赖"></a>移除依赖</h1><blockquote>
<p>注释代码</p>
</blockquote>
<figure class="highlight go"><figcaption><span>main.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="comment">// _ &quot;github.com/go-redis/redis/v8&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/google/uuid&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/sirupsen/logrus&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    logrus.Println(<span class="string">&quot;hello, gomodule mode&quot;</span>)</span><br><span class="line">    logrus.Println(uuid.NewString())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>依然依赖 redis - <code>go build 不会自动清空多余的依赖项</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ go build</span><br><span class="line"></span><br><span class="line">$ ./gomodule</span><br><span class="line">INFO[0000] hello, gomodule mode</span><br><span class="line">INFO[0000] 35566587-7b11-4715-ab00-94ebf29ec43c</span><br><span class="line"></span><br><span class="line">$ cat go.mod</span><br><span class="line">module github.com/zhongmingmao/gomodule</span><br><span class="line"></span><br><span class="line">go 1.21.2</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/go-redis/redis/v8 v8.11.5</span><br><span class="line">    github.com/google/uuid v1.3.1</span><br><span class="line">    github.com/sirupsen/logrus v1.9.3</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/cespare/xxhash/v2 v2.1.2 // indirect</span><br><span class="line">    github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f // indirect</span><br><span class="line">    golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">$ go list -m all | grep redis</span><br><span class="line">github.com/go-redis/redis/v8 v8.11.5</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>go mod tidy</code> - 自动分析源码依赖，将<code>不再使用</code>的依赖从 <code>go.mod</code> 和 <code>go.sum</code> 中<code>移除</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ go mod tidy</span><br><span class="line"></span><br><span class="line">$ cat go.mod</span><br><span class="line">module github.com/zhongmingmao/gomodule</span><br><span class="line"></span><br><span class="line">go 1.21.2</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    github.com/google/uuid v1.3.1</span><br><span class="line">    github.com/sirupsen/logrus v1.9.3</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">require golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8 // indirect</span><br></pre></td></tr></table></figure>

<h1 id="借用-vendor"><a href="#借用-vendor" class="headerlink" title="借用 vendor"></a>借用 vendor</h1><ol>
<li>vendor 机制是 Go Module 构建机制的一个<code>补充</code><ul>
<li>适用场景：不方便访问外部网络，且对构建性能敏感的环境</li>
</ul>
</li>
<li>GOPATH vs Go Module<ul>
<li>在 <code>GOPATH</code> 构建模式下，<code>vendor</code> 需要<code>手动管理</code></li>
<li>在 <code>Go Module</code> 构建模式下，可以通过命令<code>快速</code>建立和更新 vendor，<code>维护成本很低</code></li>
</ul>
</li>
</ol>
<blockquote>
<p>建立 vendor - 建立了一份<code>项目依赖包</code>的<code>副本</code>，通过 <code>vendor/modules.txt</code> 记录信息</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">$ tree .</span><br><span class="line">.</span><br><span class="line">├── go.mod</span><br><span class="line">├── go.sum</span><br><span class="line">└── main.go</span><br><span class="line"></span><br><span class="line">$ go mod vendor</span><br><span class="line"></span><br><span class="line">$ tree -LF 3 .</span><br><span class="line">./</span><br><span class="line">├── go.mod</span><br><span class="line">├── go.sum</span><br><span class="line">├── main.go</span><br><span class="line">└── vendor/</span><br><span class="line">    ├── github.com/</span><br><span class="line">    │   ├── google/</span><br><span class="line">    │   └── sirupsen/</span><br><span class="line">    ├── golang.org/</span><br><span class="line">    │   └── x/</span><br><span class="line">    └── modules.txt</span><br><span class="line">    </span><br><span class="line">$ du -sh vendor</span><br><span class="line">7.9M    vendor</span><br><span class="line"></span><br><span class="line">$ cat vendor/modules.txt</span><br><span class="line"># github.com/google/uuid v1.3.1</span><br><span class="line">## explicit</span><br><span class="line">github.com/google/uuid</span><br><span class="line"># github.com/sirupsen/logrus v1.9.3</span><br><span class="line">## explicit; go 1.13</span><br><span class="line">github.com/sirupsen/logrus</span><br><span class="line"># golang.org/x/sys v0.0.0-20220715151400-c0bba94af5f8</span><br><span class="line">## explicit; go 1.17</span><br><span class="line">golang.org/x/sys/internal/unsafeheader</span><br><span class="line">golang.org/x/sys/unix</span><br><span class="line">golang.org/x/sys/windows</span><br></pre></td></tr></table></figure>

<blockquote>
<p>基于 <code>vendor</code> 构建（默认是基于 <code>Module 本地缓存</code>构建）<br><code>Go 1.14</code> ，如果 Go 项目的顶层目录中存在 <code>vendor 目录</code>，优先基于 <code>vendor</code> 构建，除非指定 <code>-mod</code> 参数</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ go version</span><br><span class="line">go version go1.21.2 darwin/arm64</span><br><span class="line"></span><br><span class="line">$ go build -mod=vendor</span><br><span class="line"></span><br><span class="line">$ ./gomodule</span><br><span class="line">INFO[0000] hello, gomodule mode</span><br><span class="line">INFO[0000] 6f36a59f-d696-45e4-a194-f10a6b5a9bee</span><br><span class="line"></span><br><span class="line">$ rm -rf ./vendor/golang.org</span><br><span class="line"></span><br><span class="line">$ go build</span><br><span class="line">vendor/github.com/sirupsen/logrus/terminal_check_bsd.go:6:8: cannot find module providing package golang.org/x/sys/unix: import lookup disabled by -mod=vendor</span><br><span class="line">    (Go version in go.mod is at least 1.14 and vendor directory exists.)</span><br><span class="line">    </span><br><span class="line">$ go build -mod=mod</span><br><span class="line"></span><br><span class="line">$ ./gomodule</span><br><span class="line">INFO[0000] hello, gomodule mode</span><br><span class="line">INFO[0000] 6174371d-9560-4f1e-9add-7dd3a21ed5e3</span><br></pre></td></tr></table></figure>

<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css"></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://blog.zhongmingmao.top">zhongmingmao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://blog.zhongmingmao.top/2022/12/19/go-foundation-go-module/">https://blog.zhongmingmao.top/2022/12/19/go-foundation-go-module/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/cloud-native/">Cloud Native</a><a class="post-meta__tags" href="/tags/go/">Go</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/12/20/go-foundation-main-init/" title="Go - Main + Init"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/goinit.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Go - Main + Init</div></div></a></div><div class="next-post pull-right"><a href="/2022/12/18/go-foundation-build-mode/" title="Go - Build Mode"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/go-package-management.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Go - Build Mode</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2023/05/04/cloud-native-foundation-go-engineering-rpc-api/" title="Go Engineering - RPC API"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-grpc-7924583.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-04</div><div class="title">Go Engineering - RPC API</div></div></a></div><div><a href="/2023/05/03/cloud-native-foundation-go-engineering-restful-api/" title="Go Engineering - RESTful API"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-restful-api.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-03</div><div class="title">Go Engineering - RESTful API</div></div></a></div><div><a href="/2023/05/02/cloud-native-foundation-go-engineering-design-pattern/" title="Go Engineering - Design Pattern"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-design-pattern.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-02</div><div class="title">Go Engineering - Design Pattern</div></div></a></div><div><a href="/2023/05/01/cloud-native-foundation-go-engineering-elegant-project/" title="Go Engineering - Elegant Project"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-elegant-project.gif" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-01</div><div class="title">Go Engineering - Elegant Project</div></div></a></div><div><a href="/2023/04/01/go-concurrency-mutex-basic/" title="Go Concurrency - Mutex Basic"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/go-mutex.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-01</div><div class="title">Go Concurrency - Mutex Basic</div></div></a></div><div><a href="/2022/12/23/go-foundation-block-scope/" title="Go - Block + Scope"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/goscope.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-23</div><div class="title">Go - Block + Scope</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">516</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">149</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">69</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-number">1.</span> <span class="toc-text">添加依赖</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E7%89%88%E6%9C%AC"><span class="toc-number">2.</span> <span class="toc-text">更改版本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#v1-Y-Z"><span class="toc-number">2.1.</span> <span class="toc-text">v1.Y.Z</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vX-Y-Z"><span class="toc-number">2.2.</span> <span class="toc-text">vX.Y.Z</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%A7%BB%E9%99%A4%E4%BE%9D%E8%B5%96"><span class="toc-number">3.</span> <span class="toc-text">移除依赖</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%80%9F%E7%94%A8-vendor"><span class="toc-number">4.</span> <span class="toc-text">借用 vendor</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/05/04/cloud-native-foundation-go-engineering-rpc-api/" title="Go Engineering - RPC API"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-grpc-7924583.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Engineering - RPC API"/></a><div class="content"><a class="title" href="/2023/05/04/cloud-native-foundation-go-engineering-rpc-api/" title="Go Engineering - RPC API">Go Engineering - RPC API</a><time datetime="2023-05-03T16:06:25.000Z" title="Created 2023-05-04 00:06:25">2023-05-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/03/cloud-native-foundation-go-engineering-restful-api/" title="Go Engineering - RESTful API"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-restful-api.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Engineering - RESTful API"/></a><div class="content"><a class="title" href="/2023/05/03/cloud-native-foundation-go-engineering-restful-api/" title="Go Engineering - RESTful API">Go Engineering - RESTful API</a><time datetime="2023-05-02T16:06:25.000Z" title="Created 2023-05-03 00:06:25">2023-05-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/02/cloud-native-foundation-go-engineering-design-pattern/" title="Go Engineering - Design Pattern"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-design-pattern.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Engineering - Design Pattern"/></a><div class="content"><a class="title" href="/2023/05/02/cloud-native-foundation-go-engineering-design-pattern/" title="Go Engineering - Design Pattern">Go Engineering - Design Pattern</a><time datetime="2023-05-01T16:06:25.000Z" title="Created 2023-05-02 00:06:25">2023-05-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/01/cloud-native-foundation-go-engineering-elegant-project/" title="Go Engineering - Elegant Project"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-elegant-project.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Engineering - Elegant Project"/></a><div class="content"><a class="title" href="/2023/05/01/cloud-native-foundation-go-engineering-elegant-project/" title="Go Engineering - Elegant Project">Go Engineering - Elegant Project</a><time datetime="2023-04-30T16:06:25.000Z" title="Created 2023-05-01 00:06:25">2023-05-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/01/go-concurrency-mutex-basic/" title="Go Concurrency - Mutex Basic"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/go-mutex.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Concurrency - Mutex Basic"/></a><div class="content"><a class="title" href="/2023/04/01/go-concurrency-mutex-basic/" title="Go Concurrency - Mutex Basic">Go Concurrency - Mutex Basic</a><time datetime="2023-03-31T16:06:25.000Z" title="Created 2023-04-01 00:06:25">2023-04-01</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2024 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>