<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Go Engineering - Specification - Directory | ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="平铺式 主要用在 Go 包（框架、库）中，相对来说比较简单，如 glog  12# lsLICENSE      README.md    glog.go      glog_file.go glog_test.go go.mod  结构化 主要用在 Go 应用中，相对来说比较复杂，事实规范：project-layout">
<meta property="og:type" content="article">
<meta property="og:title" content="Go Engineering - Specification - Directory">
<meta property="og:url" content="https://blog.zhongmingmao.top/2022/03/26/cloud-native-foundation-go-engineering-specification-directory/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="平铺式 主要用在 Go 包（框架、库）中，相对来说比较简单，如 glog  12# lsLICENSE      README.md    glog.go      glog_file.go glog_test.go go.mod  结构化 主要用在 Go 应用中，相对来说比较复杂，事实规范：project-layout">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-9.png">
<meta property="article:published_time" content="2022-03-25T20:06:25.000Z">
<meta property="article:modified_time" content="2023-04-03T10:04:59.568Z">
<meta property="article:author" content="zhongmingmao">
<meta property="article:tag" content="Cloud Native">
<meta property="article:tag" content="Go">
<meta property="article:tag" content="Go Engineering">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-9.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Go Engineering - Specification - Directory",
  "url": "https://blog.zhongmingmao.top/2022/03/26/cloud-native-foundation-go-engineering-specification-directory/",
  "image": "https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-9.png",
  "datePublished": "2022-03-25T20:06:25.000Z",
  "dateModified": "2023-04-03T10:04:59.568Z",
  "author": [
    {
      "@type": "Person",
      "name": "zhongmingmao",
      "url": "https://blog.zhongmingmao.top"
    }
  ]
}</script><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/2022/03/26/cloud-native-foundation-go-engineering-specification-directory/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Go Engineering - Specification - Directory',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg" style="background-image: url(/url(https:/cdn.pixabay.com/photo/2021/07/20/03/39/fisherman-6479663_1280.jpg));"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">639</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">191</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">83</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-9.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">ByteCoding</span></a><a class="nav-page-title" href="/"><span class="site-name">Go Engineering - Specification - Directory</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Go Engineering - Specification - Directory</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">Created</span><time datetime="2022-03-25T20:06:25.000Z" title="Created 2022-03-26 04:06:25">2022-03-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/cloud-native/cloud-native-foundation/go-engineering/">Go Engineering</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">1.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>6mins</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:512,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2023-04-03 18:04:59&quot;}" hidden></div><h1 id="平铺式"><a href="#平铺式" class="headerlink" title="平铺式"></a>平铺式</h1><blockquote>
<p>主要用在 <strong>Go 包（框架、库）</strong>中，相对来说比较<strong>简单</strong>，如 <a target="_blank" rel="noopener" href="https://github.com/golang/glog">glog</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ls</span><br><span class="line">LICENSE      README.md    glog.go      glog_file.go glog_test.go go.mod</span><br></pre></td></tr></table></figure>

<h1 id="结构化"><a href="#结构化" class="headerlink" title="结构化"></a>结构化</h1><blockquote>
<p>主要用在 <strong>Go 应用</strong>中，相对来说比较<strong>复杂</strong>，事实规范：<a target="_blank" rel="noopener" href="https://github.com/golang-standards/project-layout">project-layout</a></p>
</blockquote>
<span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">├── api</span><br><span class="line">│   ├── openapi</span><br><span class="line">│   └── swagger</span><br><span class="line">├── build</span><br><span class="line">│   ├── ci</span><br><span class="line">│   ├── docker</span><br><span class="line">│   │   ├── iam-apiserver</span><br><span class="line">│   │   ├── iam-authz-server</span><br><span class="line">│   │   └── iam-pump</span><br><span class="line">│   ├── package</span><br><span class="line">├── CHANGELOG</span><br><span class="line">├── cmd</span><br><span class="line">│   ├── iam-apiserver</span><br><span class="line">│   │   └── apiserver.go</span><br><span class="line">│   ├── iam-authz-server</span><br><span class="line">│   │   └── authzserver.go</span><br><span class="line">│   ├── iamctl</span><br><span class="line">│   │   └── iamctl.go</span><br><span class="line">│   └── iam-pump</span><br><span class="line">│       └── pump.go</span><br><span class="line">├── configs</span><br><span class="line">├── CONTRIBUTING.md</span><br><span class="line">├── deployments</span><br><span class="line">├── docs</span><br><span class="line">│   ├── devel</span><br><span class="line">│   │   ├── en-US</span><br><span class="line">│   │   └── zh-CN</span><br><span class="line">│   ├── guide</span><br><span class="line">│   │   ├── en-US</span><br><span class="line">│   │   └── zh-CN</span><br><span class="line">│   ├── images</span><br><span class="line">│   └── README.md</span><br><span class="line">├── examples</span><br><span class="line">├── githooks</span><br><span class="line">├── go.mod</span><br><span class="line">├── go.sum</span><br><span class="line">├── init</span><br><span class="line">├── internal</span><br><span class="line">│   ├── apiserver</span><br><span class="line">│   │   ├── api</span><br><span class="line">│   │   │   └── v1</span><br><span class="line">│   │   │       └── user</span><br><span class="line">│   │   ├── apiserver.go</span><br><span class="line">│   │   ├── options</span><br><span class="line">│   │   ├── service</span><br><span class="line">│   │   ├── store</span><br><span class="line">│   │   │   ├── mysql</span><br><span class="line">│   │   │   ├── fake</span><br><span class="line">│   │   └── testing</span><br><span class="line">│   ├── authzserver</span><br><span class="line">│   │   ├── api</span><br><span class="line">│   │   │   └── v1</span><br><span class="line">│   │   │       └── authorize</span><br><span class="line">│   │   ├── options</span><br><span class="line">│   │   ├── store</span><br><span class="line">│   │   └── testing</span><br><span class="line">│   ├── iamctl</span><br><span class="line">│   │   ├── cmd</span><br><span class="line">│   │   │   ├── completion</span><br><span class="line">│   │   │   ├── user</span><br><span class="line">│   │   └── util</span><br><span class="line">│   ├── pkg</span><br><span class="line">│   │   ├── code</span><br><span class="line">│   │   ├── options</span><br><span class="line">│   │   ├── server</span><br><span class="line">│   │   ├── util</span><br><span class="line">│   │   └── validation</span><br><span class="line">├── LICENSE</span><br><span class="line">├── Makefile</span><br><span class="line">├── _output</span><br><span class="line">│   ├── platforms</span><br><span class="line">│   │   └── linux</span><br><span class="line">│   │       └── amd64</span><br><span class="line">├── pkg</span><br><span class="line">│   ├── util</span><br><span class="line">│   │   └── genutil</span><br><span class="line">├── README.md</span><br><span class="line">├── scripts</span><br><span class="line">│   ├── lib</span><br><span class="line">│   ├── make-rules</span><br><span class="line">├── test</span><br><span class="line">│   ├── testdata</span><br><span class="line">├── third_party</span><br><span class="line">│   └── forked</span><br><span class="line">└── tools</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/0f494d5c9f706a7564d4d7280093e81f.webp" alt="0f494d5c9f706a7564d4d7280093e81f"></p>
<h2 id="Go-应用"><a href="#Go-应用" class="headerlink" title="Go 应用"></a>Go 应用</h2><h3 id="开发相关"><a href="#开发相关" class="headerlink" title="开发相关"></a>开发相关</h3><h4 id="web"><a href="#web" class="headerlink" title="&#x2F;web"></a>&#x2F;web</h4><ol>
<li>前端代码存放目录，主要用来存放 Web 静态资源、服务端模板、单页应用</li>
</ol>
<h4 id="cmd"><a href="#cmd" class="headerlink" title="&#x2F;cmd"></a>&#x2F;cmd</h4><ol>
<li>一个项目有很多组件，可以将<strong>组件的 main 函数</strong>所在的文件夹统一放在 &#x2F;cmd 目录</li>
<li>每个<strong>组件的目录名</strong>应该与<strong>预期的可执行文件名</strong>一致</li>
<li>保证 <code>/cmd/&lt;组件&gt;</code> 目录下不要存放太多代码<ul>
<li>如果代码<strong>可以复用</strong>，应该位于 <code>/pkg</code> 目录</li>
<li>如果代码<strong>不可复用</strong>，应该位于 <code>/internal</code> 目录</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># ls cmd/</span><br><span class="line">gendocs  geniamdocs  genman  genswaggertypedocs  genyaml  iam-apiserver  iam-authz-server  iamctl  iam-pump</span><br><span class="line"></span><br><span class="line"># ls cmd/iam-apiserver/</span><br><span class="line">apiserver.go</span><br></pre></td></tr></table></figure>

<h4 id="internal"><a href="#internal" class="headerlink" title="&#x2F;internal"></a>&#x2F;internal</h4><ol>
<li>存放<strong>私有</strong>应用和库代码</li>
<li>在引入其他项目 internal 下的包时，会在<strong>编译时报错</strong></li>
<li>建议<ul>
<li>&#x2F;internal&#x2F;apiserver：存放真实的应用代码，这些应用的共享代码存放在 &#x2F;internal&#x2F;pkg</li>
<li>&#x2F;internal&#x2F;pkg：存放项目内可共享，项目外不共享的包，提供一些比较<strong>基础</strong>和<strong>通用</strong>的功能</li>
<li>一开始将所有的共享代码都放在 &#x2F;internal&#x2F;pkg 下，当共享代码做好了<strong>对外开放的准备</strong>后，再转存到 &#x2F;pkg</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">An import of a path containing the element “internal” is disallowed if the importing code is outside the tree rooted at the parent of the &quot;internal&quot; directory.</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">├── apiserver             # 应用</span><br><span class="line">│   ├── api</span><br><span class="line">│   │   └── v1             # HTTP API 接口的具体实现，主要用来串流程（轻量级）</span><br><span class="line">│   │       └── user</span><br><span class="line">│   ├── options         # 应用的 command flag</span><br><span class="line">│   ├── config             # 根据命令行参数创建应用配置</span><br><span class="line">│   ├── service         # 存放应用复杂业务处理代码</span><br><span class="line">│   │   └── user.go</span><br><span class="line">│   ├── store             # 持久化</span><br><span class="line">│   │   ├── mysql</span><br><span class="line">│   │   │   └── user.go</span><br><span class="line">│   │   ├── fake</span><br><span class="line">│   └── testing</span><br><span class="line">├── authzserver         # 应用</span><br><span class="line">│   ├── api</span><br><span class="line">│   │   └── v1</span><br><span class="line">│   ├── options</span><br><span class="line">│   ├── store</span><br><span class="line">│   └── testing</span><br><span class="line">├── iamctl          # 对于大型项目，一般都会有一个客户端工具</span><br><span class="line">│   ├── cmd</span><br><span class="line">│   │   ├── cmd.go</span><br><span class="line">│   │   ├── info</span><br><span class="line">└── pkg             # 内部共享包</span><br><span class="line">    ├── code        # 业务 Code</span><br><span class="line">    ├── middleware  # HTTP 处理链</span><br><span class="line">    ├── options</span><br><span class="line">    └── validation  # 通用的验证函数</span><br></pre></td></tr></table></figure>

<h4 id="pkg"><a href="#pkg" class="headerlink" title="&#x2F;pkg"></a>&#x2F;pkg</h4><ol>
<li>存放<strong>可以被外部应用使用</strong>的代码库，其他项目可以直接通过 <strong>import</strong> 导入，将代码库放在该目录要<strong>慎重</strong></li>
</ol>
<h4 id="vendor"><a href="#vendor" class="headerlink" title="&#x2F;vendor"></a>&#x2F;vendor</h4><ol>
<li><strong>项目依赖</strong>，可以通过 <code>go mod vendor</code> 创建，<strong>如果是一个 Go 库，不要提交 vendor 包</strong></li>
</ol>
<h4 id="third-party"><a href="#third-party" class="headerlink" title="&#x2F;third_party"></a>&#x2F;third_party</h4><ol>
<li>外部帮助工具，分支代码或者其他第三方应用（如 Swagger UI ）</li>
<li><code>/third_party/forked/xxx</code>，与 upstream 保持同步</li>
</ol>
<h3 id="测试相关"><a href="#测试相关" class="headerlink" title="测试相关"></a>测试相关</h3><h4 id="test"><a href="#test" class="headerlink" title="&#x2F;test"></a>&#x2F;test</h4><ol>
<li>存放其他外部测试应用和测试数据</li>
<li>Go 会忽略以 <code>.</code> 和 <code>_</code> 开头的目录或者文件</li>
</ol>
<h3 id="部署相关"><a href="#部署相关" class="headerlink" title="部署相关"></a>部署相关</h3><h4 id="configs"><a href="#configs" class="headerlink" title="&#x2F;configs"></a>&#x2F;configs</h4><ol>
<li>存放<strong>配置文件模板</strong>或者<strong>默认配置</strong></li>
<li>配置中不能携带<strong>敏感信息</strong>，可以用<strong>占位符</strong>来替代</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>    </span><br><span class="line"><span class="attr">user:</span>    </span><br><span class="line">  <span class="attr">username:</span> <span class="string">$&#123;CONFIG_USER_USERNAME&#125;</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">$&#123;CONFIG_USER_PASSWORD&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="deployments"><a href="#deployments" class="headerlink" title="&#x2F;deployments"></a>&#x2F;deployments</h4><ol>
<li>用来存放 <strong>IaaS</strong>、<strong>PaaS</strong> 系统和<strong>容器编排部署</strong>的配置和模板<ul>
<li><strong>Docker-Compose</strong>、<strong>Kubernetes&#x2F;Helm</strong>、<strong>Mesos</strong>、<strong>Terraform</strong>、<strong>Bosh</strong></li>
</ul>
</li>
<li>用 Kubernetes 部署的项目，目录名可能为 deploy – <strong>容器化是大势所趋</strong></li>
</ol>
<h4 id="init"><a href="#init" class="headerlink" title="&#x2F;init"></a>&#x2F;init</h4><ol>
<li>主要用于<strong>非容器化部署</strong>的项目，存放<strong>初始化系统</strong>（systemd 等）和<strong>进程管理配置文件</strong>（unit 文件等）</li>
</ol>
<h2 id="项目管理"><a href="#项目管理" class="headerlink" title="项目管理"></a>项目管理</h2><h3 id="Makefile"><a href="#Makefile" class="headerlink" title="&#x2F;Makefile"></a>&#x2F;Makefile</h3><ol>
<li>Makefile 是<strong>很老但仍然优秀</strong>的<strong>项目管理工具</strong></li>
<li>Makefile 通常用来：<strong>静态代码检查</strong>、<strong>单元测试</strong>、<strong>编译</strong>等</li>
<li>make 默认操作（推荐）：**<code>gen -&gt; format -&gt; lint -&gt; test -&gt; build</code>**</li>
</ol>
<h3 id="scripts"><a href="#scripts" class="headerlink" title="&#x2F;scripts"></a>&#x2F;scripts</h3><ol>
<li>存放脚本文件，用来实现<strong>构建</strong>、<strong>安装</strong>、<strong>分析</strong>等不同功能</li>
<li>shell 中的函数名，建议采用<strong>语义化</strong>的命名方式（在 Kubernetes 中大量采用），如：<code>iam::log::info</code></li>
</ol>
<table>
<thead>
<tr>
<th>目录</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;scripts&#x2F;make-rules</td>
<td>存放 makefile 文件，实现 &#x2F;Makefile 中的各个功能（为了保持 &#x2F;Makefile 的简洁）</td>
</tr>
<tr>
<td>&#x2F;scripts&#x2F;lib</td>
<td>shell 库，是 shell 脚本的一些通用功能，可以抽象成库</td>
</tr>
<tr>
<td>&#x2F;scripts&#x2F;install</td>
<td>自动化部署</td>
</tr>
</tbody></table>
<h3 id="build"><a href="#build" class="headerlink" title="&#x2F;build"></a>&#x2F;build</h3><ol>
<li>存放安装包和 CI 相关的文件</li>
</ol>
<table>
<thead>
<tr>
<th>目录</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;build&#x2F;package</td>
<td>存放容器（<strong>Docker</strong>）、系统（<strong>deb, rpm, pkg</strong>）的包配置和脚本</td>
</tr>
<tr>
<td>&#x2F;build&#x2F;ci</td>
<td>存放 CI（travis）的配置文件和脚本</td>
</tr>
<tr>
<td>&#x2F;build&#x2F;docker</td>
<td>存放子项目各个组件的 Dockerfile</td>
</tr>
</tbody></table>
<h3 id="tools"><a href="#tools" class="headerlink" title="&#x2F;tools"></a>&#x2F;tools</h3><ol>
<li>存放项目的支持工具（可导入来自于 &#x2F;pkg 和 &#x2F;internal 的代码）</li>
</ol>
<h3 id="githooks"><a href="#githooks" class="headerlink" title="&#x2F;githooks"></a>&#x2F;githooks</h3><ol>
<li>Git 钩子</li>
</ol>
<h3 id="assets"><a href="#assets" class="headerlink" title="&#x2F;assets"></a>&#x2F;assets</h3><ol>
<li>项目使用到的其他资源：图片、CSS、JS等</li>
</ol>
<h3 id="website"><a href="#website" class="headerlink" title="&#x2F;website"></a>&#x2F;website</h3><ol>
<li>项目网站相关的数据</li>
</ol>
<h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><h3 id="README-md"><a href="#README-md" class="headerlink" title="&#x2F;README.md"></a>&#x2F;README.md</h3><ol>
<li>包含项目的介绍、功能、快速安装、使用指引、开发指引和详细的文档链接</li>
<li>README 可以<strong>规范化</strong>，通过工具或者脚本生成</li>
</ol>
<h3 id="docs"><a href="#docs" class="headerlink" title="&#x2F;docs"></a>&#x2F;docs</h3><ol>
<li>设计文档、开发文档、用户文档等</li>
<li>&#x2F;docs&#x2F;devel&#x2F;{en-US,zh-CN}</li>
<li>&#x2F;docs&#x2F;guide&#x2F;{en-US,zh-CN}</li>
<li>&#x2F;docs&#x2F;images</li>
</ol>
<h3 id="CONTRIBUTING-md"><a href="#CONTRIBUTING-md" class="headerlink" title="&#x2F;CONTRIBUTING.md"></a>&#x2F;CONTRIBUTING.md</h3><ol>
<li>对于开源就绪的项目，需要 &#x2F;CONTRIBUTING.md</li>
<li>用途：规范协同流程 + 降低第三方开发者贡献代码的难度</li>
</ol>
<h3 id="api"><a href="#api" class="headerlink" title="&#x2F;api"></a>&#x2F;api</h3><ol>
<li>存放当前项目<strong>对外</strong>提供的<strong>各种不同类型</strong>的 API 接口定义文件</li>
<li>API 类型：<strong>protobuf、thrift、http、openapi、swagger</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">├── openapi/</span><br><span class="line">│   └── README.md</span><br><span class="line">└── swagger/</span><br><span class="line">    ├── docs/</span><br><span class="line">    ├── README.md</span><br><span class="line">    └── swagger.yaml</span><br></pre></td></tr></table></figure>

<h3 id="LICENSE"><a href="#LICENSE" class="headerlink" title="&#x2F;LICENSE"></a>&#x2F;LICENSE</h3><ol>
<li>版本文件可以是<strong>私有</strong>的，也可以是<strong>开源</strong>的</li>
<li>自动化<ul>
<li><strong>addlicense</strong>：将 <strong>LICENSE 头</strong>添加到源码文件或者其他文件</li>
<li><strong>glice</strong>：检查对开源代码的<strong>引用</strong></li>
</ul>
</li>
</ol>
<h3 id="CHANGELOG"><a href="#CHANGELOG" class="headerlink" title="&#x2F;CHANGELOG"></a>&#x2F;CHANGELOG</h3><ol>
<li>记录更新记录，自动化： <strong>Angular 规范 + git-chglog</strong></li>
</ol>
<h3 id="examples"><a href="#examples" class="headerlink" title="&#x2F;examples"></a>&#x2F;examples</h3><ol>
<li>示例代码，降低使用者的上手门槛</li>
</ol>
<h2 id="不建议的目录"><a href="#不建议的目录" class="headerlink" title="不建议的目录"></a>不建议的目录</h2><blockquote>
<p>不符合 Go 的设计哲学</p>
</blockquote>
<table>
<thead>
<tr>
<th>目录</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>&#x2F;src&#x2F;</strong></td>
<td>Java 中有 src 目录，默认情况下，Go 项目都会被放置在 <code>$GOPATH/src</code> 目录下</td>
</tr>
<tr>
<td><strong>&#x2F;model</strong></td>
<td><strong>按功能拆分</strong>是 Go 的设计哲学，因此不要将类型定义统一放到 &#x2F;model 目录</td>
</tr>
<tr>
<td><strong>xxs&#x2F;</strong></td>
<td>统一使用<strong>单数</strong>！</td>
</tr>
</tbody></table>
<h2 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h2><ol>
<li>对于小型项目，优先考虑：<strong>cmd、pkg、internal</strong>，其他目录按需创建</li>
<li>空目录无法提交到 Git 仓库，可以使用 <strong>.keep</strong> 文件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">├── cmd</span><br><span class="line">├── internal</span><br><span class="line">├── pkg</span><br><span class="line">└── README.md</span><br></pre></td></tr></table></figure>

<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css"></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://blog.zhongmingmao.top">zhongmingmao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://blog.zhongmingmao.top/2022/03/26/cloud-native-foundation-go-engineering-specification-directory/">https://blog.zhongmingmao.top/2022/03/26/cloud-native-foundation-go-engineering-specification-directory/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/cloud-native/">Cloud Native</a><a class="post-meta__tags" href="/tags/go/">Go</a><a class="post-meta__tags" href="/tags/go-engineering/">Go Engineering</a></div><div class="post-share"><div class="social-share" data-image="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-9.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2022/03/27/cloud-native-foundation-go-engineering-specification-workflow/" title="Go Engineering - Specification - Workflow"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-3.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Go Engineering - Specification - Workflow</div></div><div class="info-2"><div class="info-item-1">集中式 在本地仓库的 master 分支开发，将修改后的代码 commit 到远程仓库，如有冲突先本地解决再提交       适合场景：团队人员少、开发不频繁、不需要同时维护多个版本的小项目  功能分支 12345678910# git checkout -b feature/rate-limiting# git add limit.go# git commit -m &quot;add rate limiting&quot;# git push origin feature/rate-limiting# Github: Compare &amp; pull request -&gt; Create pull request# Github: Code Review -&gt; Merge pull request  Merge PR Create a merge commit – 推荐 底层操作：git merge --no-ff With --no-ff, create a merge commit in all cases, even when the merge could instead be...</div></div></div></a><a class="pagination-related" href="/2022/03/26/infrastructure-authentication-ldap/" title="Infrastructure - Authentication - LDAP"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-7.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Infrastructure - Authentication - LDAP</div></div><div class="info-2"><div class="info-item-1">What is LDAP    目录服务 目录 ≈ 树状结构的数据库 目录服务 ≈ 以树状结构的目录数据库为基础，外加各种访问协议的信息查询服务 目录数据库 vs 关系型数据库：读取性能极高，写入性能非常差（不支持事务），不适合频繁修改数据 用途：具有层次性且不需要频繁修改的数据，例如企业员工信息、企业设备信息等  LDAP DAP &#x3D; Directory Access Protocol X.500 是一套目录服务的标准（协议族） 通过 X.500 可以将局部的目录服务连接起来，构建基于 Internet 的分布在全球的目录服务系统   DAP 是 X.500 的核心组成之一，但非常复杂，因此诞生了 LDAP LDAP 是基于 X.500 的 DAP 发展而来，目前是第 3 版   LDAP 特点 基于 TCP&#x2F;IP 以树状结构存储数据 读取速度快，写入速度慢 服务端用于存放数据，客户端用于操作数据 跨平台，维护简单 支持 SSL&#x2F;TLS 加密 协议是开放的    样例   </div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2023/05/10/cloud-native-foundation-go-engineering-cli/" title="Go Engineering - CLI"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-framework.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-10</div><div class="info-item-2">Go Engineering - CLI</div></div><div class="info-2"><div class="info-item-1">应用框架 命令行参数解析 - Pflag 配置文件解析 - Viper 应用的命令行框架 - Cobra 命令需要具备 help 功能 命令需要能够解析命令行参数和配置文件 命令需要能够初始化业务代码，并最终启动业务进程      Pflag 命令行参数解析工具 - Kubernetes &#x2F; Istio &#x2F; Helm &#x2F; Docker &#x2F; Etcd &#x2F; …  Flag 一个命令行参数会被解析成一个 Flag 类型的变量  1234567891011121314// A Flag represents the state of a flag.type Flag struct &#123;    Name                string              // name as it appears on command line    Shorthand           string              // one-letter abbreviated flag    Usage               string   ...</div></div></div></a><a class="pagination-related" href="/2023/05/09/cloud-native-foundation-go-engineering-log/" title="Go Engineering - Log"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-log.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-09</div><div class="info-item-2">Go Engineering - Log</div></div><div class="info-2"><div class="info-item-1">功能设计基础功能 支持基本的日志信息 - 时间戳、文件名、行号、日志级别、日志信息 支持不同的日志级别 - Debug &#x2F; Info &#x2F; Warn &#x2F; Error &#x2F; Panic &#x2F; Fatal logrus 支持 Trace 日志级别，Trace 不是必须的 Trace 和 Panic 是可选的级别   支持自定义配置 - 不同的环境采用不同的配置 开发环境的日志级别为 Debug，而生产环境的日志级别为 Info 通过配置，可以在不重新编译代码的情况下，改变记录日志的行为   支持输出到标准输出和文件     至少实现 6 个日志级别    日志调用时的属性   输出级别 glog.Info(“This is info message”)   开关级别 启动程序时，期望哪些输出级别的日志会被打印 glog -v=L - 只有输出级别 ≥L 的日志才会被打印     高级功能 支持多种日志格式 - TEXT &#x2F; JSON &#x2F; … 开发环境采用 TEXT 格式，生产环境采用 JSON 格式   按日志级别分类输出 - Error 级别...</div></div></div></a><a class="pagination-related" href="/2023/05/08/cloud-native-foundation-go-engineering-err-code/" title="Go Engineering - Error Code"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-error-handling.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-08</div><div class="info-item-2">Go Engineering - Error Code</div></div><div class="info-2"><div class="info-item-1">预期功能 有业务 Code 码标识 - HTTP Code 码有限 安全 - 对内对外展示不同的错误信息    设计方式 无论请求成功与否，都返回 200，在 HTTP Body 中包含错误信息 HTTP Code 通常代表 HTTP Transport 层的状态信息 缺点：性能不佳（需解析 Body） + 对客户端不友好   返回 4xx or 5xx，并在 Body 中返回简单的错误信息 返回 4xx or 5xx，并在 Body 中返回详细的错误信息 - 推荐  设计思路 区别于 http status code，业务码需要有一定的规则，可以通过业务码判断出是哪类错误 请求出错时，可以通过 http status code，直接感知到请求出错 需要在请求出错时，返回详细的信息：Code + Message + Reference（Optional） 返回的错误信息，需要是可以直接展示给用户的安全信息，不能包含敏感信息 但同时也要有内部更详细的错误信息，方便 Debug   返回的数据格式应该是固定的，规范的 错误信息要保持简洁，并提供有用的信息  Biz Code 纯数字表示，不同部位代表不同的服...</div></div></div></a><a class="pagination-related" href="/2023/05/07/cloud-native-foundation-go-engineering-doc/" title="Go Engineering - Doc"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-doc.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-07</div><div class="info-item-2">Go Engineering - Doc</div></div><div class="info-2"><div class="info-item-1">Swagger Swagger 是一套围绕 OpenAPI 规范构建的开源工具     Component Desc    Swagger Editor 基于浏览器的编辑器，可以编写 OpenAPI 规范，并实时预览   Swagger UI 将 OpenAPI 规范呈现为交互式 API 文档   Swagger Codegen 根据 OpenAPI 规范，生成服务器存根和客户端代码库，涵盖 40 多种语言     OpenAPI OpenAPI 是一个 API 规范，其前身为 Swagger 规范 通过定义一种用来描述 API 格式或者 API 定义的 DSL，来规范 RESTful API 的开发过程 OpenAPI 3.0 ≈ Swagger 2.0   API 基本信息 对 API 的描述，介绍 API 可以实现的功能 每个 API 上可用的 Path 和 Method 每个 API 的输入和返回参数 验证方法 联系信息、许可证、使用条款和其它信息   OpenAPI 是一个 API 规范，而 Swagger 是实现该 API 规范的工具  go-swagger特性 功能强大、高性能、可以根据代...</div></div></div></a><a class="pagination-related" href="/2023/05/06/cloud-native-foundation-go-engineering-lint/" title="Go Engineering - Lint"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-lint.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-06</div><div class="info-item-2">Go Engineering - Lint</div></div><div class="info-2"><div class="info-item-1">golangci-lint 使用最多    优点   Advantage Desc    速度快 基于 gometalinter 开发，但比 gometalinter 快 5 倍原因：并行检查 + 复用 go build 缓存 + 缓存分析结果   可配置 支持 YAML 格式的配置文件   IDE 集成 Goland &#x2F; VS Code   linter 聚合器 不需要单独安装   最少误报数 调整了所集成 linter 的默认配置，大幅度减少误报   良好的输出 颜色、行号等   迭代快 不断有新的 linter 被集成到 golangci-lint 中   选项 配置 同时出现 - 命令行选项 &#x2F; 配置文件   bool&#x2F;string&#x2F;int - 命令行选项 slice - 合并  命令行选项 golangci-lint run -h     Flag Desc    –print-issued-lines Print lines of code with issue (default true)   –print-linter-name Print lin...</div></div></div></a><a class="pagination-related" href="/2023/05/05/cloud-native-foundation-go-engineering-makefile/" title="Go Engineering - Makefile"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-makefile.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-05</div><div class="info-item-2">Go Engineering - Makefile</div></div><div class="info-2"><div class="info-item-1">基础语法 https://github.com/seisman/how-to-write-makefile   规则语法 伪目标 变量赋值 特殊变量 自动化变量  功能设计Target   Target Desc    gen Generate all necessary files, such as error code files.   format Gofmt (reformat) package sources (exclude vendor dir if existed).   lint Check syntax and styling of go sources.   test Run unit test.   cover Run unit test and get test coverage.   build Build source code for host platform.   build.multiarch Build source code for multiple platforms. See option PLATFORMS.   image Build docker im...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">zhongmingmao</div><div class="author-info-description">Focus on Infrastructure.</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">639</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">191</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">83</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B9%B3%E9%93%BA%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">平铺式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E5%8C%96"><span class="toc-number">2.</span> <span class="toc-text">结构化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Go-%E5%BA%94%E7%94%A8"><span class="toc-number">2.1.</span> <span class="toc-text">Go 应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E7%9B%B8%E5%85%B3"><span class="toc-number">2.1.1.</span> <span class="toc-text">开发相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#web"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">&#x2F;web</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cmd"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">&#x2F;cmd</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#internal"><span class="toc-number">2.1.1.3.</span> <span class="toc-text">&#x2F;internal</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pkg"><span class="toc-number">2.1.1.4.</span> <span class="toc-text">&#x2F;pkg</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vendor"><span class="toc-number">2.1.1.5.</span> <span class="toc-text">&#x2F;vendor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#third-party"><span class="toc-number">2.1.1.6.</span> <span class="toc-text">&#x2F;third_party</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%9B%B8%E5%85%B3"><span class="toc-number">2.1.2.</span> <span class="toc-text">测试相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#test"><span class="toc-number">2.1.2.1.</span> <span class="toc-text">&#x2F;test</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E7%9B%B8%E5%85%B3"><span class="toc-number">2.1.3.</span> <span class="toc-text">部署相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#configs"><span class="toc-number">2.1.3.1.</span> <span class="toc-text">&#x2F;configs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#deployments"><span class="toc-number">2.1.3.2.</span> <span class="toc-text">&#x2F;deployments</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#init"><span class="toc-number">2.1.3.3.</span> <span class="toc-text">&#x2F;init</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86"><span class="toc-number">2.2.</span> <span class="toc-text">项目管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Makefile"><span class="toc-number">2.2.1.</span> <span class="toc-text">&#x2F;Makefile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scripts"><span class="toc-number">2.2.2.</span> <span class="toc-text">&#x2F;scripts</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#build"><span class="toc-number">2.2.3.</span> <span class="toc-text">&#x2F;build</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tools"><span class="toc-number">2.2.4.</span> <span class="toc-text">&#x2F;tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#githooks"><span class="toc-number">2.2.5.</span> <span class="toc-text">&#x2F;githooks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#assets"><span class="toc-number">2.2.6.</span> <span class="toc-text">&#x2F;assets</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#website"><span class="toc-number">2.2.7.</span> <span class="toc-text">&#x2F;website</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E6%A1%A3"><span class="toc-number">2.3.</span> <span class="toc-text">文档</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#README-md"><span class="toc-number">2.3.1.</span> <span class="toc-text">&#x2F;README.md</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docs"><span class="toc-number">2.3.2.</span> <span class="toc-text">&#x2F;docs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CONTRIBUTING-md"><span class="toc-number">2.3.3.</span> <span class="toc-text">&#x2F;CONTRIBUTING.md</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#api"><span class="toc-number">2.3.4.</span> <span class="toc-text">&#x2F;api</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LICENSE"><span class="toc-number">2.3.5.</span> <span class="toc-text">&#x2F;LICENSE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CHANGELOG"><span class="toc-number">2.3.6.</span> <span class="toc-text">&#x2F;CHANGELOG</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#examples"><span class="toc-number">2.3.7.</span> <span class="toc-text">&#x2F;examples</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E5%BB%BA%E8%AE%AE%E7%9A%84%E7%9B%AE%E5%BD%95"><span class="toc-number">2.4.</span> <span class="toc-text">不建议的目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E8%AE%AE"><span class="toc-number">2.5.</span> <span class="toc-text">建议</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/01/21/cloud-native-observability-opentelemetry-java-zero-code/" title="Observability - OpenTelemetry Java Zero Code"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/otel-java-agent.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - OpenTelemetry Java Zero Code"/></a><div class="content"><a class="title" href="/2025/01/21/cloud-native-observability-opentelemetry-java-zero-code/" title="Observability - OpenTelemetry Java Zero Code">Observability - OpenTelemetry Java Zero Code</a><time datetime="2025-01-20T16:06:25.000Z" title="Created 2025-01-21 00:06:25">2025-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/20/cloud-native-observability-opentelemetry-java/" title="Observability - OpenTelemetry Java"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/otel-java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Observability - OpenTelemetry Java"/></a><div class="content"><a class="title" href="/2025/01/20/cloud-native-observability-opentelemetry-java/" title="Observability - OpenTelemetry Java">Observability - OpenTelemetry Java</a><time datetime="2025-01-19T16:06:25.000Z" title="Created 2025-01-20 00:06:25">2025-01-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/19/ai-agent-overview-mcp/" title="AI Agent - MCP Overview"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ai-agent-1253868755.cos.ap-guangzhou.myqcloud.com/mcp.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI Agent - MCP Overview"/></a><div class="content"><a class="title" href="/2025/01/19/ai-agent-overview-mcp/" title="AI Agent - MCP Overview">AI Agent - MCP Overview</a><time datetime="2025-01-18T16:06:25.000Z" title="Created 2025-01-19 00:06:25">2025-01-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/18/ai-agent-overview/" title="AI Agent - Overview"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ai-agent-1253868755.cos.ap-guangzhou.myqcloud.com/ai-agent.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI Agent - Overview"/></a><div class="content"><a class="title" href="/2025/01/18/ai-agent-overview/" title="AI Agent - Overview">AI Agent - Overview</a><time datetime="2025-01-17T16:06:25.000Z" title="Created 2025-01-18 00:06:25">2025-01-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/17/new-java-feature-foreign-function-api/" title="New Java Feature - Foreign Function API"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://java-feature-1253868755.cos.ap-guangzhou.myqcloud.com/Java-Foreign-Function-API.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="New Java Feature - Foreign Function API"/></a><div class="content"><a class="title" href="/2025/01/17/new-java-feature-foreign-function-api/" title="New Java Feature - Foreign Function API">New Java Feature - Foreign Function API</a><time datetime="2025-01-16T16:06:25.000Z" title="Created 2025-01-17 00:06:25">2025-01-17</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2015 - 2025 By zhongmingmao</span></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional and Simplified Chinese">繁</button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div></body></html>