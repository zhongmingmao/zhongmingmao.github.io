<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Focus on Infrastructure">
<meta property="og:type" content="website">
<meta property="og:title" content="ByteCoding">
<meta property="og:url" content="https://blog.zhongmingmao.top/page/5/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="Focus on Infrastructure">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png">
<meta property="article:author" content="zhongmingmao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/page/5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ByteCoding',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-09-02 22:56:21'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">547</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">172</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">72</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2022/10/16/13/53/early-morning-7525151_1280.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ByteCoding</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/02/11/cloud-native-gateway-apisix/" title="APISIX - Doc"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api-gateway-1253868755.cos.ap-guangzhou.myqcloud.com/apisix.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="APISIX - Doc"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/11/cloud-native-gateway-apisix/" title="APISIX - Doc">APISIX - Doc</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-02-10T16:06:25.000Z" title="Created 2023-02-11 00:06:25">2023-02-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/api-gateway/">API Gateway</a></span></div><div class="content">Feature



Apache APISIX 基于 Radixtree Route 和 etcd 提供路由极速匹配与配置快速同步的能力
Apache APISIX 提供了自定义插件的能力
可以在 Balancer 阶段使用自定义负载均衡算法，并使用自定义路由算法对路由进行精细化控制


Apache APISIX 提供了配置热更新、插件热加载能力，在不重新启动实例的情况下可快速更新配置

Quick Start路由
Apache APISIX 使用 routes 来提供灵活的网关管理功能，在一个请求中，routes 包含了访问路径和上游目标等信息

Route
Route 是访问上游目标的路径
过程
通过预定的规则来匹配客户端请求
然后加载和执行相应的插件
最后将请求转发至特定的 Upstream


一个最简单的 Route 仅由匹配路径和 Upstream 地址两个信息组成

Upstream
Upstream 是一组具备相同功能的节点集合，它是对虚拟主机的抽象
Upstream 可以通过预先配置的规则对多个服务节点进行负载均衡

Examples
创建路由 &#x3D; Uri + Upstream ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/02/10/cloud-native-serverless-faas-scaling/" title="FaaS - Scaling"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://serverless-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/image-20240318203921511.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FaaS - Scaling"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/10/cloud-native-serverless-faas-scaling/" title="FaaS - Scaling">FaaS - Scaling</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-02-09T16:06:25.000Z" title="Created 2023-02-10 00:06:25">2023-02-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/serverless/">Serverless</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/serverless/faas/">FaaS</a></span></div><div class="content">概述
Serverless 的弹性扩缩容可以将实例缩容为 0，并根据请求量级自动扩缩容，从而有效地提升资源利用率
极致动态扩缩容是 FaaS 的核心内涵，是与 PaaS 平台的核心差异 - 降本增效



调度形态
开源的 Serverless 函数计算引擎核心，一般是基于 Kubernetes HPA
云厂商一般有封装好的各种底座服务，可以基于底座服务来做封装
云厂商容器调度服务，通常有两种调度形态
基于 Node 调度
基于容器实例的调度 - Serverless


云厂商的函数计算通常是基于容器服务的底座

Node 维度

组件


Scheduler
负责将请求打到指定的函数实例（Pod）上，同时负责为集群中的 Node 标记状态，记录到 etcd


Local-Controller
Node 上的本地控制器，负责管理 Node 上所有函数实例的生命周期，以 DeamonSet 形式存在


AutoScaler
定期检测集群中 Node 和 Pod 的使用情况，并根据策略进行扩缩容
在扩容时，向底层的 PaaS 平台申请资源


Pod
Cold 表示该 Pod 未被使用
Warm 表示正在被 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/02/09/cloud-native-serverless-faas-cold-start/" title="FaaS - Cold Start"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://serverless-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/faas-cold-start.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FaaS - Cold Start"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/09/cloud-native-serverless-faas-cold-start/" title="FaaS - Cold Start">FaaS - Cold Start</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-02-08T16:06:25.000Z" title="Created 2023-02-09 00:06:25">2023-02-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/serverless/">Serverless</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/serverless/faas/">FaaS</a></span></div><div class="content">触发时机
类似于 LoadingCache


首次请求
容器实例在服务请求后被回收



启动过程
容器创建
当所有容器实例都在处理请求时，需要向集群申请创建新的容器
函数计算平台会支持多种语言的运行时
这些运行时一般来说会打包成一个镜像，然后以 DeamonSet 的方式运行在 Kubernetes 中
在冷启动时，会根据不同的参数请求，动态挂载所需的运行时到对应的运行路径



代码包 &#x2F; 层依赖
是整个冷启动耗时比较长的过程
函数计算本身不具备持久化的能力，代码包和层依赖通常都是从其它存储服务端拉取
代码包通常是压缩包的形式，下载到本地后，再解压

环境变量 &#x2F; 参数文件
耗时相对较短
主流的函数计算平台往往提供了环境变量注入的能力，发生在冷启动阶段
运行时以及容器本身还需要准备一些参数配置文件

VPC 打通 &#x2F; 资源准备
如果用户还为函数接入了私有网络，还需要为容器进行一些 VPC 网络打通的初始化工作
如果用户使用了类似分布式文件系统等功能，还需要进行挂载

运行时初始化
通常指的是云厂商标准的 Runtime 环境的启动过程
受编程语言类型的影响比较大（JVM 比 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/02/08/cloud-native-serverless-faas-advanced-attributes/" title="FaaS - Advanced Attributes"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://serverless-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/what-is-faas.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FaaS - Advanced Attributes"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/08/cloud-native-serverless-faas-advanced-attributes/" title="FaaS - Advanced Attributes">FaaS - Advanced Attributes</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-02-07T16:06:25.000Z" title="Created 2023-02-08 00:06:25">2023-02-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/serverless/">Serverless</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/serverless/faas/">FaaS</a></span></div><div class="content">公共能力
将函数依赖的公共库提炼到层，以减少部署、更新时的代码包体积
对于支持层功能的运行时，函数计算会将特定的目录添加到运行时语言的依赖包搜索路径中
对于自定义层，需要将所有内容打包到一个压缩包，并上传到函数计算平台
函数计算运行时会将层的内容解压并部署到特定的目录


层功能的好处
函数程序包更小
避免在制作函数 zip 包和依赖项过程中出现未知的错误
可以在多个函数中引入使用，减少不必要的存储资源浪费







上传层之后，函数计算会将层的 zip 包上传到对象存储
当调用函数执行时，会从对象存储中下载层的 zip 包并解压到特定目录
应用程序只需要访问特定目录，就能读取层的依赖和公共代码


注意：后序的层会覆盖相同目录下的文件

快速迭代
标准运行时 &#x2F; 自定义镜像


函数计算系统初始化执行环境之前，会扮演该函数的服务角色，获得临时用户名和密码并拉取镜像
镜像拉取成功后，会根据指定的启动命令、参数和端口，启动自定义的 HTTP Server
该 HTTP Server 会接管函数计算系统所有请求的调用




调用方式不同：事件函数 &#x2F; HTTP 函数



在创建函数之前 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/02/07/cloud-native-serverless-faas-trigger/" title="FaaS - Trigger"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://serverless-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/faas-trigger.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FaaS - Trigger"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/07/cloud-native-serverless-faas-trigger/" title="FaaS - Trigger">FaaS - Trigger</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-02-06T16:06:25.000Z" title="Created 2023-02-07 00:06:25">2023-02-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/serverless/">Serverless</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/serverless/faas/">FaaS</a></span></div><div class="content">事件
事件为系统运行期间发生的动作或者发生的事情，而函数计算，提供了一种事件驱动的计算模型
CloudEvents 期望通过一种通用的格式描述事件数据的规范，以提供跨服务、平台和系统的互操作性
国内云厂商的事件规范程度：在其中一家云产品上开发了函数，一般都需要进行简单的适配才能迁移
CNCF Serverless 工作组针对函数和工作流均定义了相关的格式规范和原语
单函数的事件触发
多个简单函数通过异步调用的方式形成事件触发
复杂场景下通过 WorkFlow 来进行编排的事件交互





触发器概述
由事件驱动连接上下游服务的关系组合称为触发器
函数计算由云函数和触发器组成
触发器描述了一组关系和规则，包括核心要素：事件源、目标函数、触发条件
事件源：事件的生产者
目标函数：事件的处理者
触发条件：当触发条件满足时，就会通知函数计算引擎，调度对应的目标函数执行


触发器的元数据可以由服务方持久存储，也可以由函数托管平台和服务方共同持有


类型集成原则
区别：事件源和事件的规则存储在哪里，以及从哪里触发


单向集成触发器
双向集成触发器
代理集成触发器


设计触发器的主要考虑：事件源和函数计算的上下游 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/02/06/cloud-native-serverless-faas-life-cycle/" title="FaaS - Life Cycle"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://serverless-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/image-20240302141413852.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FaaS - Life Cycle"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/06/cloud-native-serverless-faas-life-cycle/" title="FaaS - Life Cycle">FaaS - Life Cycle</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-02-05T16:06:25.000Z" title="Created 2023-02-06 00:06:25">2023-02-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/serverless/">Serverless</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/serverless/faas/">FaaS</a></span></div><div class="content">Serverless概述
Serverless 是一种架构设计理念，并非一个具体的编程框架、类库或者工具
Serverless &#x3D; FaaS + BaaS
构建和运行不需要服务器管理的应用程序
描述一种更细粒度的部署模型
将应用程序打包上传到 Serverless 平台，然后根据实际需求，执行、扩展和计费


Serverless 能够实现业务和基础设施的分离
通过多种服务器无感知技术，将基础设施抽象成各种开箱即用的服务
以 API 接口的方式提供给用户按需调用，真正做到按需伸缩、按量收费






场景
形成了以函数计算、弹性应用、容器服务为核心的产品形态


函数计算 - 面向函数
用户只需关注函数层级的代码，用于解决轻量型、无状态、有时效的任务


Serverless 应用托管 - 面向应用
应用只需要关注应用本身
与微服务结合，融合应用治理、可观测
降低了新应用的构建成本，老应用的适配改造成本


Serverless 应用服务 - 面向容器
在不改变当前 kubernetes 的前提下，由于不再需要关注 Node，降低了维护成本



FaaS Life Cycle用户视角
开发

当 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/02/05/cloud-native-devops-iac/" title="DevOps - IaC"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-native-devops-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/iac.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DevOps - IaC"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/05/cloud-native-devops-iac/" title="DevOps - IaC">DevOps - IaC</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-02-04T16:06:25.000Z" title="Created 2023-02-05 00:06:25">2023-02-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/devops/">DevOps</a></span></div><div class="content">IaC概述
使用代码定义基础设施（声明式：云资源、配置、工具安装）
借助 Git 实现对基础设施的版本控制
有状态 - Diff + Patch



优势
幂等
版本控制
使用 Git 进行变更管理（批准、安全检查、自动化测试）
清晰的变更行为
快速配置基础设施

能力
提供以编码工作流来创建基础设施
更改或者更新现有的基础设施
安全地更改基础设施
与 CICD 工具集成，形成 DevOps 工作流
提供可复用的模块，方便协作和共享
实施安全策略和生产标准
实现基础设施的团队协作

工具
Terraform
Pulumi
Crossplane

Terraform核心架构

全新的配置语言 HCL - HashiCorp configuration language
可执行的文档
人类和机器可读
学习成本低
测试、共享、重用、自动化
适用于几乎所有云厂商

HCL
最终转换为 JSON 对象，再与云厂商交互



JSON

123456789101112131415161718&#123;  &quot;io_mode&quot;: &quot;async&quot;,  &quot;service&qu ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/02/04/cloud-native-devops-foundation/" title="DevOps - Foundation"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-native-devops-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/devops.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DevOps - Foundation"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/04/cloud-native-devops-foundation/" title="DevOps - Foundation">DevOps - Foundation</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-02-03T16:06:25.000Z" title="Created 2023-02-04 00:06:25">2023-02-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/devops/">DevOps</a></span></div><div class="content">基本原理核心原理


隔离机制
运行 Nginx 镜像

1234567891011121314151617$ docker run -d nginx:latestUnable to find image &#x27;nginx:latest&#x27; locallylatest: Pulling from library/nginx25d3892798f8: Pull complete42de7275c085: Pull completec459a9332e03: Pull complete48882f13d668: Pull complete49180167b771: Pull completeda4abc2b066c: Pull complete20dc44ab57ab: Pull completeDigest: sha256:5f44022eab9198d75939d9eaa5341bc077eca16fa51d4ef32d33f1bd4c8cbe7dStatus: Downloaded newer image for nginx:latestd821171713e9b805c4180c122f35 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/02/03/cloud-native-devops-overview/" title="DevOps - Overview"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-native-devops-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/DevOps-Lifecycle.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DevOps - Overview"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/03/cloud-native-devops-overview/" title="DevOps - Overview">DevOps - Overview</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-02-02T16:06:25.000Z" title="Created 2023-02-03 00:06:25">2023-02-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/devops/">DevOps</a></span></div><div class="content">演进过程精益
诞生于工业领域：用最少的时间和资源消耗，生产出高质量的产品

瀑布模式
线性的开发流程、将软件开发划分为一系列阶段



敏捷模式
误区：敏捷 &#x3D; 管理



敏捷是基于精益的思想
将开发过程拆分成 N 个敏捷开发周期，小步快跑
生命周期
基于迭代的敏捷（固定的迭代周期）
基于流程的敏捷（不固定的迭代周期）




运维不堪重负，建立部门墙，敏捷模式只关注开发，不关注运维

DevOps

核心阶段
版本控制
持续集成 - 代码提交
持续交付 - 测试环境
持续部署 - 生产环境
持续监控

源码管理
SVN &#x2F; Git


Git Flow
git pull &#x3D; git fetch + git merge


Git 高级用法rebase
将一个分支的提交移动到另一个分支的末尾，使得提交历史更加线性和整洁


主要场景：

更新本地分支以匹配远程分支，避免产生多余的 merge commit
合并提交
重新排列提交



12$ git checkout feature$ git rebase master



从两个分支的共同祖先开始提取待变基分支（featu ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/02/02/cloud-native-foundation-k8s-security/" title="Kubernetes - Security"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/k8s-security.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Security"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/02/cloud-native-foundation-k8s-security/" title="Kubernetes - Security">Kubernetes - Security</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-02-01T16:06:25.000Z" title="Created 2023-02-02 00:06:25">2023-02-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">层次模型


开发
分发
部署
运行时
容器运行时Non-root
在 Dockerfile 中通过 USER 命令切换成非 root 用户


防止某些镜像窃取宿主的 root 权限并造成危害
在某些容器运行时，容器内部的 root 用户与宿主上的 root 用户是同一个用户
宿主上的重要文件被 mount 到容器内，并被容器修改配置


即使在容器内部也应该权限隔离

123FROM ubuntuRUN user add AUSER A

User namespace
依赖 User namespace，任何容器内部的用户都会映射为宿主上的非 root 用户
默认关闭，因为会引入配置复杂性
系统不知道宿主用户与容器用户的映射关系，在 mount 文件时无法设置适当的权限



Rootless container
容器运行时以非 root 身份启动
即使容器被攻破，在宿主层面获得的用户权限也是非 root 用户
Docker 和其它容器运行时本身的后台 Daemon 需要以 root 身份运行，其它的用户容器才能以 rootless 身份运行
某些运行时，如 Podman，没有 Daemon 进程，也就完 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/#content-inner">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/55/#content-inner">55</a><a class="extend next" rel="next" href="/page/6/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">547</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">172</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">72</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/08/08/rag-frameworks/" title="RAG - Frameworks"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/rag-frameworks.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RAG - Frameworks"/></a><div class="content"><a class="title" href="/2024/08/08/rag-frameworks/" title="RAG - Frameworks">RAG - Frameworks</a><time datetime="2024-08-07T16:06:25.000Z" title="Created 2024-08-08 00:06:25">2024-08-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/07/rag-data-processing/" title="RAG - Data Processing"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/rag-data-processing.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RAG - Data Processing"/></a><div class="content"><a class="title" href="/2024/08/07/rag-data-processing/" title="RAG - Data Processing">RAG - Data Processing</a><time datetime="2024-08-06T16:06:25.000Z" title="Created 2024-08-07 00:06:25">2024-08-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/06/rag-methodology/" title="RAG - Methodology"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/rag-value.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RAG - Methodology"/></a><div class="content"><a class="title" href="/2024/08/06/rag-methodology/" title="RAG - Methodology">RAG - Methodology</a><time datetime="2024-08-05T16:06:25.000Z" title="Created 2024-08-06 00:06:25">2024-08-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/05/rag-doc-parse/" title="RAG - Document Parsing"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/image-20240830092249777.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RAG - Document Parsing"/></a><div class="content"><a class="title" href="/2024/08/05/rag-doc-parse/" title="RAG - Document Parsing">RAG - Document Parsing</a><time datetime="2024-08-04T16:06:25.000Z" title="Created 2024-08-05 00:06:25">2024-08-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/04/rag-langchain/" title="RAG - LangChain"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://rag-1253868755.cos.ap-guangzhou.myqcloud.com/rag-agent.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RAG - LangChain"/></a><div class="content"><a class="title" href="/2024/08/04/rag-langchain/" title="RAG - LangChain">RAG - LangChain</a><time datetime="2024-08-03T16:06:25.000Z" title="Created 2024-08-04 00:06:25">2024-08-04</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/"><span class="card-category-list-name">AI</span><span class="card-category-list-count">24</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/llm/"><span class="card-category-list-name">LLM</span><span class="card-category-list-count">16</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/rag/"><span class="card-category-list-name">RAG</span><span class="card-category-list-count">8</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/career/"><span class="card-category-list-name">Career</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/"><span class="card-category-list-name">Cloud Computing</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/iaas/"><span class="card-category-list-name">IaaS</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/paas/"><span class="card-category-list-name">PaaS</span><span class="card-category-list-count">5</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/"><span class="card-category-list-name">Cloud Native</span><span class="card-category-list-count">146</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/cloud-computing/" style="font-size: 1.23em; color: rgb(118, 160, 138)">Cloud Computing</a><a href="/tags/iaas/" style="font-size: 1.19em; color: rgb(109, 172, 81)">IaaS</a><a href="/tags/paas/" style="font-size: 1.19em; color: rgb(87, 100, 82)">PaaS</a><a href="/tags/cloud-native/" style="font-size: 1.45em; color: rgb(114, 12, 78)">Cloud Native</a><a href="/tags/container/" style="font-size: 1.27em; color: rgb(107, 50, 86)">Container</a><a href="/tags/docker/" style="font-size: 1.29em; color: rgb(173, 66, 95)">Docker</a><a href="/tags/kubernetes/" style="font-size: 1.43em; color: rgb(136, 54, 149)">Kubernetes</a><a href="/tags/devops/" style="font-size: 1.18em; color: rgb(175, 132, 144)">DevOps</a><a href="/tags/go-core/" style="font-size: 1.17em; color: rgb(14, 99, 74)">Go Core</a><a href="/tags/go/" style="font-size: 1.42em; color: rgb(21, 87, 84)">Go</a><a href="/tags/go-engineering/" style="font-size: 1.34em; color: rgb(7, 152, 195)">Go Engineering</a><a href="/tags/swagger/" style="font-size: 1.15em; color: rgb(7, 44, 166)">Swagger</a><a href="/tags/rpc/" style="font-size: 1.16em; color: rgb(137, 198, 29)">RPC</a><a href="/tags/grpc/" style="font-size: 1.16em; color: rgb(98, 151, 139)">gRPC</a><a href="/tags/ci/" style="font-size: 1.15em; color: rgb(131, 115, 140)">CI</a><a href="/tags/makefile/" style="font-size: 1.15em; color: rgb(109, 93, 46)">Makefile</a><a href="/tags/network/" style="font-size: 1.16em; color: rgb(171, 71, 158)">Network</a><a href="/tags/cloud-native-foundation/" style="font-size: 1.33em; color: rgb(11, 25, 171)">Cloud Native Foundation</a><a href="/tags/linux/" style="font-size: 1.28em; color: rgb(3, 118, 187)">Linux</a><a href="/tags/dockerfile/" style="font-size: 1.17em; color: rgb(28, 136, 93)">Dockerfile</a><a href="/tags/service-mesh/" style="font-size: 1.18em; color: rgb(165, 73, 68)">Service Mesh</a><a href="/tags/microservices/" style="font-size: 1.28em; color: rgb(41, 114, 155)">Microservices</a><a href="/tags/spring-cloud/" style="font-size: 1.21em; color: rgb(71, 40, 115)">Spring Cloud</a><a href="/tags/spring/" style="font-size: 1.24em; color: rgb(99, 70, 102)">Spring</a><a href="/tags/java/" style="font-size: 1.44em; color: rgb(90, 169, 106)">Java</a><a href="/tags/service-governance/" style="font-size: 1.17em; color: rgb(155, 59, 62)">Service Governance</a><a href="/tags/opa/" style="font-size: 1.21em; color: rgb(169, 168, 94)">OPA</a><a href="/tags/alibaba/" style="font-size: 1.22em; color: rgb(147, 136, 68)">Alibaba</a><a href="/tags/security/" style="font-size: 1.27em; color: rgb(3, 35, 100)">Security</a><a href="/tags/compliance/" style="font-size: 1.17em; color: rgb(82, 178, 94)">Compliance</a><a href="/tags/infrastructure/" style="font-size: 1.31em; color: rgb(64, 42, 53)">Infrastructure</a><a href="/tags/architecture/" style="font-size: 1.32em; color: rgb(7, 103, 99)">Architecture</a><a href="/tags/serverless/" style="font-size: 1.22em; color: rgb(78, 176, 3)">Serverless</a><a href="/tags/faas/" style="font-size: 1.22em; color: rgb(156, 118, 16)">FaaS</a><a href="/tags/computer-basics/" style="font-size: 1.35em; color: rgb(194, 123, 124)">Computer Basics</a><a href="/tags/computer-organization/" style="font-size: 1.35em; color: rgb(113, 8, 95)">Computer Organization</a><a href="/tags/knowledge-map/" style="font-size: 1.15em; color: rgb(23, 53, 146)">Knowledge Map</a><a href="/tags/tool/" style="font-size: 1.23em; color: rgb(168, 73, 113)">Tool</a><a href="/tags/git/" style="font-size: 1.23em; color: rgb(2, 54, 104)">Git</a><a href="/tags/concurrency/" style="font-size: 1.15em; color: rgb(114, 151, 55)">Concurrency</a><a href="/tags/cloud/" style="font-size: 1.36em; color: rgb(114, 76, 145)">Cloud</a><a href="/tags/native/" style="font-size: 1.36em; color: rgb(55, 22, 29)">Native</a><a href="/tags/authentication/" style="font-size: 1.17em; color: rgb(66, 102, 21)">Authentication</a><a href="/tags/ldap/" style="font-size: 1.15em; color: rgb(90, 3, 151)">LDAP</a><a href="/tags/oauth-2-0/" style="font-size: 1.21em; color: rgb(2, 130, 90)">OAuth 2.0</a><a href="/tags/storage/" style="font-size: 1.4em; color: rgb(33, 76, 48)">Storage</a><a href="/tags/mysql/" style="font-size: 1.41em; color: rgb(103, 105, 23)">MySQL</a><a href="/tags/innodb/" style="font-size: 1.2em; color: rgb(167, 134, 99)">InnoDB</a><a href="/tags/java-concurrent/" style="font-size: 1.38em; color: rgb(97, 13, 2)">Java Concurrent</a><a href="/tags/actor/" style="font-size: 1.15em; color: rgb(163, 125, 103)">Actor</a><a href="/tags/akka/" style="font-size: 1.15em; color: rgb(120, 141, 76)">Akka</a><a href="/tags/coroutine/" style="font-size: 1.16em; color: rgb(104, 60, 164)">Coroutine</a><a href="/tags/disruptor/" style="font-size: 1.15em; color: rgb(72, 193, 29)">Disruptor</a><a href="/tags/csp/" style="font-size: 1.15em; color: rgb(138, 22, 114)">CSP</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(3, 117, 142)">Netty</a><a href="/tags/stm/" style="font-size: 1.15em; color: rgb(50, 61, 171)">STM</a><a href="/tags/mvcc/" style="font-size: 1.15em; color: rgb(165, 183, 68)">MVCC</a><a href="/tags/java-core/" style="font-size: 1.21em; color: rgb(156, 68, 39)">Java Core</a><a href="/tags/java-performance/" style="font-size: 1.34em; color: rgb(137, 67, 33)">Java Performance</a><a href="/tags/cas/" style="font-size: 1.15em; color: rgb(32, 173, 187)">CAS</a><a href="/tags/hashtable/" style="font-size: 1.15em; color: rgb(172, 106, 76)">HashTable</a><a href="/tags/concurrenthashmap/" style="font-size: 1.15em; color: rgb(134, 36, 7)">ConcurrentHashMap</a><a href="/tags/concurrentskiplistmap/" style="font-size: 1.15em; color: rgb(189, 96, 31)">ConcurrentSkipListMap</a><a href="/tags/design-pattern/" style="font-size: 1.18em; color: rgb(41, 96, 186)">Design Pattern</a><a href="/tags/consistency/" style="font-size: 1.15em; color: rgb(73, 121, 15)">Consistency</a><a href="/tags/jvm/" style="font-size: 1.37em; color: rgb(147, 180, 74)">JVM</a><a href="/tags/gc/" style="font-size: 1.16em; color: rgb(75, 107, 59)">GC</a><a href="/tags/hashmap/" style="font-size: 1.15em; color: rgb(31, 144, 195)">HashMap</a><a href="/tags/io/" style="font-size: 1.15em; color: rgb(79, 17, 39)">IO</a><a href="/tags/nio/" style="font-size: 1.16em; color: rgb(15, 156, 196)">NIO</a><a href="/tags/aio/" style="font-size: 1.16em; color: rgb(167, 16, 71)">AIO</a><a href="/tags/epoll/" style="font-size: 1.16em; color: rgb(200, 127, 179)">Epoll</a><a href="/tags/jit/" style="font-size: 1.15em; color: rgb(44, 157, 21)">JIT</a><a href="/tags/synchronized/" style="font-size: 1.16em; color: rgb(57, 174, 187)">synchronized</a><a href="/tags/lock/" style="font-size: 1.15em; color: rgb(158, 186, 88)">Lock</a><a href="/tags/reentrantreadwritelock/" style="font-size: 1.15em; color: rgb(118, 169, 137)">ReentrantReadWriteLock</a><a href="/tags/stampedlock/" style="font-size: 1.15em; color: rgb(125, 51, 89)">StampedLock</a><a href="/tags/serialization/" style="font-size: 1.15em; color: rgb(18, 17, 141)">Serialization</a><a href="/tags/protobuf/" style="font-size: 1.15em; color: rgb(4, 37, 79)">ProtoBuf</a><a href="/tags/java-stream/" style="font-size: 1.15em; color: rgb(78, 55, 179)">Java Stream</a><a href="/tags/mark-word/" style="font-size: 1.15em; color: rgb(193, 160, 63)">Mark Word</a><a href="/tags/monitor/" style="font-size: 1.15em; color: rgb(171, 71, 96)">Monitor</a><a href="/tags/context-switch/" style="font-size: 1.15em; color: rgb(171, 195, 165)">Context Switch</a><a href="/tags/thread-pool/" style="font-size: 1.15em; color: rgb(48, 82, 145)">Thread Pool</a><a href="/tags/lambda/" style="font-size: 1.15em; color: rgb(15, 31, 19)">Lambda</a><a href="/tags/bytecode-manipulation/" style="font-size: 1.17em; color: rgb(86, 193, 96)">Bytecode Manipulation</a><a href="/tags/asm/" style="font-size: 1.15em; color: rgb(98, 128, 5)">ASM</a><a href="/tags/jol/" style="font-size: 1.17em; color: rgb(196, 161, 34)">JOL</a><a href="/tags/middleware/" style="font-size: 1.39em; color: rgb(124, 71, 90)">Middleware</a><a href="/tags/mq/" style="font-size: 1.39em; color: rgb(26, 41, 71)">MQ</a><a href="/tags/kafka/" style="font-size: 1.39em; color: rgb(76, 51, 64)">Kafka</a><a href="/tags/stream/" style="font-size: 1.39em; color: rgb(105, 157, 85)">Stream</a><a href="/tags/rebalance/" style="font-size: 1.17em; color: rgb(3, 168, 8)">Rebalance</a><a href="/tags/avro/" style="font-size: 1.18em; color: rgb(126, 105, 93)">Avro</a><a href="/tags/compression/" style="font-size: 1.15em; color: rgb(43, 125, 32)">Compression</a><a href="/tags/consumer-group/" style="font-size: 1.15em; color: rgb(5, 179, 160)">Consumer Group</a><a href="/tags/tcp/" style="font-size: 1.16em; color: rgb(195, 80, 109)">TCP</a><a href="/tags/producer/" style="font-size: 1.15em; color: rgb(174, 100, 116)">Producer</a><a href="/tags/load-balance/" style="font-size: 1.15em; color: rgb(168, 145, 143)">Load Balance</a><a href="/tags/idempotence/" style="font-size: 1.15em; color: rgb(41, 133, 89)">Idempotence</a><a href="/tags/distributed-architecture/" style="font-size: 1.15em; color: rgb(113, 39, 80)">Distributed Architecture</a><a href="/tags/distributed-design-pattern/" style="font-size: 1.17em; color: rgb(13, 160, 173)">Distributed Design Pattern</a><a href="/tags/career/" style="font-size: 1.15em; color: rgb(88, 54, 149)">Career</a><a href="/tags/linux-performance/" style="font-size: 1.17em; color: rgb(104, 98, 197)">Linux Performance</a><a href="/tags/linux-practice/" style="font-size: 1.25em; color: rgb(112, 160, 155)">Linux Practice</a><a href="/tags/ext4/" style="font-size: 1.15em; color: rgb(168, 181, 55)">ext4</a><a href="/tags/file-system/" style="font-size: 1.15em; color: rgb(27, 100, 93)">File System</a><a href="/tags/ai/" style="font-size: 1.3em; color: rgb(48, 16, 150)">AI</a><a href="/tags/llm/" style="font-size: 1.3em; color: rgb(69, 3, 40)">LLM</a><a href="/tags/nlp/" style="font-size: 1.26em; color: rgb(152, 109, 181)">NLP</a><a href="/tags/python/" style="font-size: 1.15em; color: rgb(114, 11, 93)">Python</a><a href="/tags/fastapi/" style="font-size: 1.15em; color: rgb(12, 66, 18)">FastAPI</a><a href="/tags/uvicorn/" style="font-size: 1.15em; color: rgb(70, 63, 9)">Uvicorn</a><a href="/tags/chatgpt/" style="font-size: 1.15em; color: rgb(18, 86, 26)">ChatGPT</a><a href="/tags/machine-learning/" style="font-size: 1.17em; color: rgb(26, 7, 159)">Machine Learning</a><a href="/tags/rnn/" style="font-size: 1.15em; color: rgb(126, 38, 7)">RNN</a><a href="/tags/seq2seq/" style="font-size: 1.16em; color: rgb(162, 66, 18)">Seq2Seq</a><a href="/tags/word2vec/" style="font-size: 1.15em; color: rgb(170, 34, 2)">Word2Vec</a><a href="/tags/langchain/" style="font-size: 1.19em; color: rgb(29, 139, 28)">LangChain</a><a href="/tags/ai-agent/" style="font-size: 1.18em; color: rgb(141, 45, 2)">AI Agent</a><a href="/tags/rag/" style="font-size: 1.24em; color: rgb(87, 1, 108)">RAG</a><a href="/tags/lora/" style="font-size: 1.15em; color: rgb(125, 52, 107)">LoRA</a><a href="/tags/peft/" style="font-size: 1.15em; color: rgb(12, 105, 163)">PEFT</a><a href="/tags/faiss/" style="font-size: 1.15em; color: rgb(101, 178, 67)">Faiss</a><a href="/tags/math/" style="font-size: 1.16em; color: rgb(11, 60, 90)">Math</a><a href="/tags/microservices-governance/" style="font-size: 1.22em; color: rgb(29, 58, 177)">Microservices Governance</a><a href="/tags/config/" style="font-size: 1.17em; color: rgb(64, 130, 130)">Config</a><a href="/tags/configuration-center/" style="font-size: 1.17em; color: rgb(70, 11, 142)">Configuration Center</a><a href="/tags/apollo/" style="font-size: 1.17em; color: rgb(52, 92, 75)">Apollo</a><a href="/tags/oauth2/" style="font-size: 1.2em; color: rgb(84, 120, 181)">Oauth2</a><a href="/tags/spring-security/" style="font-size: 1.19em; color: rgb(146, 126, 129)">Spring Security</a><a href="/tags/spring-security-oauth2/" style="font-size: 1.19em; color: rgb(131, 40, 171)">Spring Security OAuth2</a><a href="/tags/vim/" style="font-size: 1.2em; color: rgb(2, 20, 53)">Vim</a><a href="/tags/web/" style="font-size: 1.21em; color: rgb(84, 189, 198)">Web</a><a href="/tags/javascript/" style="font-size: 1.19em; color: rgb(106, 142, 59)">JavaScript</a><a href="/tags/zookeeper/" style="font-size: 1.16em; color: rgb(171, 21, 131)">Zookeeper</a><a href="/tags/distributed-lock/" style="font-size: 1.15em; color: rgb(63, 111, 61)">Distributed Lock</a><a href="/tags/istio/" style="font-size: 1.17em; color: rgb(66, 88, 121)">Istio</a><a href="/tags/jwt/" style="font-size: 1.15em; color: rgb(83, 191, 49)">JWT</a><a href="/tags/bio/" style="font-size: 1.15em; color: rgb(125, 120, 92)">BIO</a><a href="/tags/tomcat/" style="font-size: 1.15em; color: rgb(140, 0, 84)">Tomcat</a><a href="/tags/select/" style="font-size: 1.15em; color: rgb(12, 25, 130)">Select</a><a href="/tags/poll/" style="font-size: 1.15em; color: rgb(177, 122, 19)">Poll</a><a href="/tags/zero-copy/" style="font-size: 1.15em; color: rgb(67, 132, 66)">Zero Copy</a><a href="/tags/mmap/" style="font-size: 1.15em; color: rgb(13, 182, 181)">mmap</a><a href="/tags/reactor/" style="font-size: 1.15em; color: rgb(152, 148, 67)">Reactor</a><a href="/tags/svm/" style="font-size: 1.15em; color: rgb(96, 58, 166)">SVM</a><a href="/tags/transformer/" style="font-size: 1.16em; color: rgb(44, 178, 4)">Transformer</a><a href="/tags/attention/" style="font-size: 1.15em; color: rgb(190, 81, 110)">Attention</a><a href="/tags/zab/" style="font-size: 1.15em; color: rgb(5, 93, 6)">ZAB</a><a href="/tags/etcd/" style="font-size: 1.15em; color: rgb(120, 180, 137)">etcd</a><a href="/tags/raft/" style="font-size: 1.15em; color: rgb(82, 160, 36)">raft</a><a href="/tags/iac/" style="font-size: 1.15em; color: rgb(85, 62, 164)">IaC</a><a href="/tags/terraform/" style="font-size: 1.15em; color: rgb(128, 104, 14)">Terraform</a><a href="/tags/crossplane/" style="font-size: 1.15em; color: rgb(132, 119, 13)">Crossplane</a><a href="/tags/pulumi/" style="font-size: 1.15em; color: rgb(65, 133, 30)">Pulumi</a><a href="/tags/argo-cd/" style="font-size: 1.15em; color: rgb(178, 163, 190)">Argo CD</a><a href="/tags/vpc/" style="font-size: 1.15em; color: rgb(1, 185, 173)">VPC</a><a href="/tags/helm/" style="font-size: 1.15em; color: rgb(28, 22, 118)">Helm</a><a href="/tags/runc/" style="font-size: 1.15em; color: rgb(155, 157, 47)">runc</a><a href="/tags/kustomize/" style="font-size: 1.15em; color: rgb(115, 54, 53)">Kustomize</a><a href="/tags/oci/" style="font-size: 1.15em; color: rgb(124, 14, 96)">OCI</a><a href="/tags/buildkit/" style="font-size: 1.15em; color: rgb(90, 175, 93)">BuildKit</a><a href="/tags/crane/" style="font-size: 1.15em; color: rgb(121, 46, 194)">crane</a><a href="/tags/oci-image/" style="font-size: 1.15em; color: rgb(93, 127, 99)">OCI Image</a><a href="/tags/oci-runtime/" style="font-size: 1.15em; color: rgb(22, 0, 119)">OCI Runtime</a><a href="/tags/linux-namespace/" style="font-size: 1.15em; color: rgb(187, 188, 54)">Linux Namespace</a><a href="/tags/linux-cgroup/" style="font-size: 1.15em; color: rgb(147, 152, 91)">Linux CGroup</a><a href="/tags/k8s-manifest/" style="font-size: 1.15em; color: rgb(8, 168, 63)">K8S Manifest</a><a href="/tags/performance-tuning/" style="font-size: 1.15em; color: rgb(29, 102, 7)">Performance Tuning</a><a href="/tags/api-gateway/" style="font-size: 1.15em; color: rgb(86, 166, 194)">API Gateway</a><a href="/tags/apisix/" style="font-size: 1.15em; color: rgb(33, 122, 31)">APISIX</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">August 2024</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">July 2024</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">June 2024</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">May 2023</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">April 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">February 2023</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">January 2023</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">December 2022</span><span class="card-archive-list-count">31</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">547</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2015-06-30T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">1042.7k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-09-02T14:56:18.322Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2024 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Stay hungry, stay foolish."])
  } else {
    document.getElementById("subtitle").innerHTML = 'Stay hungry, stay foolish.'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>