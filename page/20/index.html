<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Focus on Infrastructure">
<meta property="og:type" content="website">
<meta property="og:title" content="ByteCoding">
<meta property="og:url" content="https://blog.zhongmingmao.top/page/20/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="Focus on Infrastructure">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png">
<meta property="article:author" content="zhongmingmao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/page/20/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ByteCoding',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-12-13 01:22:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">488</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">125</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">65</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2022/10/16/13/53/early-morning-7525151_1280.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ByteCoding</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2021/06/22/k8s-app-dev-view/" title="Kubernetes -- 应用开发视角"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-16.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes -- 应用开发视角"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/22/k8s-app-dev-view/" title="Kubernetes -- 应用开发视角">Kubernetes -- 应用开发视角</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-22T02:45:47.000Z" title="Created 2021-06-22 10:45:47">2021-06-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">云原生架构Cloud Native App
Applications adopting the principles of Microservices packaged as Containers orchestracted by Platforms running on top of Cloud infrastructure, developed using practices such as Continous Delivery and DevOps.

云演进史


Kubernetes目标 Kubernetes本质上是为了简化微服务的开发和部署，解决微服务的公共关注点

架构

架构模式：Master-Slave
Node可以是物理机也可以是虚拟机
Master（为保证HA，Master也是多节点部署，但真正做调度决策的只有一个Master节点，因此涉及到选主）
etcd（单独部署）
基于KV的分布式存储，底层采用Raft协议，保存Kubernetes的状态数据


API Server
对外提供操作和获取Kubernetes集群资源的API，唯一可以操作etcd的组件 – 被Google和RedHa ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/06/19/k8s-container-orchestration-declarative-api-basic/" title="声明式API -- 基本概念"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-17.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="声明式API -- 基本概念"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/19/k8s-container-orchestration-declarative-api-basic/" title="声明式API -- 基本概念">声明式API -- 基本概念</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-19T08:47:42.000Z" title="Created 2021-06-19 16:47:42">2021-06-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">命令式 vs 声明式命令式12# kubectl create -f nginx.yaml# kubectl replace -f nginx.yaml

声明式1# kubectl apply -f nginx.yaml


所谓声明式，即只需要提交一个定义好的API对象来声明所期待的状态即可
声明式API允许多个API写端，以PATCH的方式对API对象进行修改，而无需关心本地原始YAML文件的内容


声明式API最主要的能力：_PATCH API_


声明式API是Kubernetes编排能力赖以生存的核心所在

本质区别



kubectl replace
kubectl apply



执行过程
使用新API对象替换旧API对象
执行对旧API对象的PATCH操作类似：kubectl set image、kubectl edit


kube-apiserver
一次只能处理一个写请求，否则可能产生冲突
一次能处理多个写请求，具备Merge能力


Kubernetes编程范式
使用控制器模式，与Kubernetes里API对象的『增、删、改、查』进行协作，进而完成用户业务逻辑的编写



 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/06/19/cloud-native-java/" title="Graal VM:云原生时代的Java（转载）"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-1.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Graal VM:云原生时代的Java（转载）"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/19/cloud-native-java/" title="Graal VM:云原生时代的Java（转载）">Graal VM:云原生时代的Java（转载）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-18T17:32:22.000Z" title="Created 2021-06-19 01:32:22">2021-06-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/java/">Java</a></span></div><div class="content">
    
</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/06/18/k8s-container-orchestration-job/" title="容器编排 -- Job"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-23.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器编排 -- Job"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/18/k8s-container-orchestration-job/" title="容器编排 -- Job">容器编排 -- Job</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-18T09:43:45.000Z" title="Created 2021-06-18 17:43:45">2021-06-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">编排对象
在线业务：Deployment、StatefulSet、DaemonSet
离线业务：Job、CronJob

Jobjob.yaml
Job对象不需要定义spec.selector（借助UUID）

job.yaml12345678910111213141516apiVersion: batch/v1kind: Jobmetadata:  name: pispec:  template:    spec:      containers:        - name: pi          image: resouer/ubuntu-bc          command:            - sh            - &#x27;-c&#x27;            - &quot;echo &#x27;scale=10000; 4*a(1)&#x27; | bc -l&quot;      restartPolicy: Never  backoffLimit: 4



创建Job123456# kubectl apply -f job.yamljob.batch/pi cre ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/06/18/k8s-container-orchestration-daemonset/" title="容器编排 -- DaemonSet"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-24.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器编排 -- DaemonSet"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/18/k8s-container-orchestration-daemonset/" title="容器编排 -- DaemonSet">容器编排 -- DaemonSet</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-17T17:35:19.000Z" title="Created 2021-06-18 01:35:19">2021-06-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">Daemon Pod特征
运行在Kubernetes集群的每个Node上
每个Node有且仅有一个Daemon Pod
新Node加入Kubernetes集群，Daemon Pod会自动在新Node上被创建
旧Node被删除后，上面的Daemon Pod也会被回收

场景
网络插件的Agent组件
存储插件的Agent组件
监控组件 + 日志组件

工作原理
循环控制：遍历所有Node，根据Node上是否有被管理Pod的情况，来决定是否需要创建或者删除Pod
DaemonSet在创建每个Pod时，做了两件额外的事情
自动给这个Pod加上一个nodeAffinity，来保证该Pod只会在指定节点上启动
自动给这个Pod加上一个Toleration，从而忽略Node上的unschedulable污点





API Object
该DaemonSet管理的是一个fluentd-elasticsearch镜像的Pod
fluentd-elasticsearch：通过fluentd将Docker容器里的日志转发到ElasticSearch
DaemonSet与Deployment非常类似，只是DaemonSet没有 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/06/17/k8s-container-orchestration-statefulset-principle/" title="容器编排 -- StatefulSet（原理）"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-17.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器编排 -- StatefulSet（原理）"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/17/k8s-container-orchestration-statefulset-principle/" title="容器编排 -- StatefulSet（原理）">容器编排 -- StatefulSet（原理）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-17T00:17:08.000Z" title="Created 2021-06-17 08:17:08">2021-06-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">背景
Deployment的短板：Deployment认为一个应用的所有Pod，是完全一样的
有状态应用（Stateful Application）
实例之间有不对等的关系 – 拓扑
实例对外部数据有依赖关系 – 存储


StatefulSet
Kubernetes在Deployment的基础上，扩展出对有状态应用的初步支持
StatefulSet是Kubernetes在作业编排的集大成者



状态抽象
分类
拓扑状态：应用的多个实例之间是不完全对等的关系
存储状态：应用的多个实例分别绑定了不同的存储数据


核心功能：通过某种方式记录状态，然后在Pod被重新创建时，能够为新Pod恢复这些状态

设计思想
StatefulSet是一种特殊的Deployment，独特之处：为每个Pod编号（代表创建顺序、网络标识等）
编号 + Headless Service &#x3D;&#x3D;&gt; 拓扑状态
编号 + Headless Service + PV&#x2F;PVC &#x3D;&#x3D;&gt; 存储状态



拓扑状态
StatefulSet控制器使用Pod模板创建Pod时，对它们进行编号，并 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/06/16/k8s-container-orchestration-deployment/" title="容器编排 -- Deployment"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-9.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器编排 -- Deployment"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/16/k8s-container-orchestration-deployment/" title="容器编排 -- Deployment">容器编排 -- Deployment</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-15T17:13:31.000Z" title="Created 2021-06-16 01:13:31">2021-06-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">基本概念
Deployment实现了Pod的水平伸缩（horizontal scaling out&#x2F;in） – 滚动更新（rolling update）
滚动更新依赖于ReplicaSet
Deployment控制ReplicaSet（版本），ReplicaSet控制Pod（副本数）！！

ReplicaSet
ReplicaSet的定义是Deployment的一个子集
Deployment控制器实际操纵对象是ReplicaSet，而非Pod，Deployment所管理的Pod的ownerReference为ReplicaSet

12345678910111213141516171819apiVersion: apps/v1kind: ReplicaSetmetadata:  name: nginx-set  labels:    app: nginxspec:  replicas: 3  selector:    matchLabels:      app: nginx  template:    metadata:      labels:        app: nginx    spec: ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/06/15/k8s-container-orchestration-controller-model/" title="容器编排 -- 控制器模型"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-10.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器编排 -- 控制器模型"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/15/k8s-container-orchestration-controller-model/" title="容器编排 -- 控制器模型">容器编排 -- 控制器模型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-15T01:00:00.000Z" title="Created 2021-06-15 09:00:00">2021-06-15</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">控制器
kube-controller-manager是一系列控制器的集合，每一种控制器都以独有的方式负责某种编排功能

1234567# cd kubernetes/pkg/controller# ls -d */apis/                   cronjob/                endpoint/               history/                nodelifecycle/          replication/            storageversiongc/       util/bootstrap/              daemon/                 endpointslice/          job/                    podautoscaler/          resourcequota/          testutil/               volume/certificates/           deployment/             endpoint ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/06/14/k8s-container-orchestration-pod/" title="容器编排 -- Pod"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-1.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器编排 -- Pod"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/14/k8s-container-orchestration-pod/" title="容器编排 -- Pod">容器编排 -- Pod</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-14T07:49:34.000Z" title="Created 2021-06-14 15:49:34">2021-06-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">基本概念
在Kubernetes中，Pod是一等公民
Pod是Kubernetes的原子调度单位，Kubernetes统一按照Pod（而非容器）的资源需求进行计算
容器的本质是进程
容器的单进程模型
并不是指容器里只能运行一个进程，而是指容器没有管理多个进程的能力
原因
容器里PID&#x3D;1的进程是应用本身，其它进程都是PID&#x3D;1进程的子进程
用户编写的应用，并不能像正常OS里面的init进程或者systemd进程那样拥有进程管理的功能




容器间具有『超亲密关系』的典型特征
互相之间会发生直接的文件交换
使用localhost或者Socket文件进行本地通信
会发生非常频繁的远程调用
需要共享某些Linux Namespace


并不是所有有关系的容器都属于同一个Pod，如Java应用容器和MySQL更适合做成两个Pod
Pod在Kubernetes中的重要意义 – 容器设计模式



实现原理
Pod只是一个逻辑概念
Kubernetes真正处理的，还是宿主机上Linux容器的Namespace和Cgroups，并不存在所谓的Pod的边界或者隔离环境


Pod里的所有容器，共享的是 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/06/09/k8s-clustering-containerization/" title="Kubernetes -- 集群搭建 &amp; 应用容器化"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes -- 集群搭建 &amp; 应用容器化"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/09/k8s-clustering-containerization/" title="Kubernetes -- 集群搭建 &amp; 应用容器化">Kubernetes -- 集群搭建 &amp; 应用容器化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-09T10:06:46.000Z" title="Created 2021-06-09 18:06:46">2021-06-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">kubeadm安装1$ apt-get install kubeadm

步骤12345# 创建一个Master节点$ kubeadm init# 将一个Worker节点加入到当前集群中$ kubeadm join &lt;Master节点的IP和端口&gt;

工作原理
直接容器化kubelet会面临很多问题，所以把kubelet直接运行在宿主机上，然后使用容器部署其它的Kubernetes组件



工作流程kubeadm initPreflight Checks
进行一系列的检查工作，确保该机器可以用来部署Kubernetes


Linux内核版本 ≥ 3.10
Linux Cgroups模块可用
机器的hostname标准（符合标准的DNS命名）
kubeadm与kubelet的版本匹配
机器上已经安装了Kubernetes的二进制文件
Kubernetes的工作端口（10250&#x2F;10251&#x2F;10252）没有被占用
ip、mount等Linux指令存在
Docker已经安装

生成证书
生成Kubernetes对外提供服务所需的各种证书和对应的目录
Kubernetes对外提供服 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/19/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/#content-inner">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/#content-inner">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/49/#content-inner">49</a><a class="extend next" rel="next" href="/page/21/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">488</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">125</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">65</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/01/30/go-paradigm-generation/" title="Go Paradigm - Generation"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/paradigm/go-generation.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Paradigm - Generation"/></a><div class="content"><a class="title" href="/2023/01/30/go-paradigm-generation/" title="Go Paradigm - Generation">Go Paradigm - Generation</a><time datetime="2023-01-29T16:06:25.000Z" title="Created 2023-01-30 00:06:25">2023-01-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/29/go-paradigm-map-reduce/" title="Go Paradigm - MapReduce"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/paradigm/image-20231212232811125.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Paradigm - MapReduce"/></a><div class="content"><a class="title" href="/2023/01/29/go-paradigm-map-reduce/" title="Go Paradigm - MapReduce">Go Paradigm - MapReduce</a><time datetime="2023-01-28T16:06:25.000Z" title="Created 2023-01-29 00:06:25">2023-01-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/28/go-paradigm-delegation-ioc/" title="Go Paradigm - Delegation + IoC"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/paradigm/go-ioc.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Paradigm - Delegation + IoC"/></a><div class="content"><a class="title" href="/2023/01/28/go-paradigm-delegation-ioc/" title="Go Paradigm - Delegation + IoC">Go Paradigm - Delegation + IoC</a><time datetime="2023-01-27T16:06:25.000Z" title="Created 2023-01-28 00:06:25">2023-01-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/27/go-paradigm-functional-options/" title="Go Paradigm - Functional Options"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/paradigm/functional-options-in-go.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Paradigm - Functional Options"/></a><div class="content"><a class="title" href="/2023/01/27/go-paradigm-functional-options/" title="Go Paradigm - Functional Options">Go Paradigm - Functional Options</a><time datetime="2023-01-26T16:06:25.000Z" title="Created 2023-01-27 00:06:25">2023-01-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/26/go-foundation-pointer/" title="Go - Pointer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/go-pointer.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go - Pointer"/></a><div class="content"><a class="title" href="/2023/01/26/go-foundation-pointer/" title="Go - Pointer">Go - Pointer</a><time datetime="2023-01-25T16:06:25.000Z" title="Created 2023-01-26 00:06:25">2023-01-26</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/career/"><span class="card-category-list-name">Career</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/"><span class="card-category-list-name">Cloud Computing</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/iaas/"><span class="card-category-list-name">IaaS</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/paas/"><span class="card-category-list-name">PaaS</span><span class="card-category-list-count">5</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/"><span class="card-category-list-name">Cloud Native</span><span class="card-category-list-count">115</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/"><span class="card-category-list-name">Cloud Native Foundation</span><span class="card-category-list-count">89</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/"><span class="card-category-list-name">Container</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">2</span></a></li></ul></li></ul></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/cloud-computing/" style="font-size: 1.24em; color: rgb(22, 100, 26)">Cloud Computing</a><a href="/tags/iaas/" style="font-size: 1.19em; color: rgb(26, 93, 163)">IaaS</a><a href="/tags/paas/" style="font-size: 1.19em; color: rgb(77, 164, 78)">PaaS</a><a href="/tags/cloud-native/" style="font-size: 1.45em; color: rgb(94, 71, 147)">Cloud Native</a><a href="/tags/container/" style="font-size: 1.28em; color: rgb(126, 72, 41)">Container</a><a href="/tags/docker/" style="font-size: 1.29em; color: rgb(27, 159, 42)">Docker</a><a href="/tags/cloud-native-foundation/" style="font-size: 1.32em; color: rgb(103, 45, 177)">Cloud Native Foundation</a><a href="/tags/go-core/" style="font-size: 1.17em; color: rgb(45, 166, 0)">Go Core</a><a href="/tags/go/" style="font-size: 1.43em; color: rgb(19, 138, 10)">Go</a><a href="/tags/go-engineering/" style="font-size: 1.31em; color: rgb(134, 192, 115)">Go Engineering</a><a href="/tags/rpc/" style="font-size: 1.16em; color: rgb(178, 159, 108)">RPC</a><a href="/tags/grpc/" style="font-size: 1.15em; color: rgb(19, 37, 29)">gRPC</a><a href="/tags/network/" style="font-size: 1.16em; color: rgb(184, 72, 51)">Network</a><a href="/tags/kubernetes/" style="font-size: 1.42em; color: rgb(2, 139, 116)">Kubernetes</a><a href="/tags/linux/" style="font-size: 1.29em; color: rgb(1, 8, 65)">Linux</a><a href="/tags/dockerfile/" style="font-size: 1.17em; color: rgb(162, 143, 133)">Dockerfile</a><a href="/tags/etcd/" style="font-size: 1.15em; color: rgb(54, 15, 176)">etcd</a><a href="/tags/raft/" style="font-size: 1.15em; color: rgb(75, 130, 53)">raft</a><a href="/tags/microservices/" style="font-size: 1.29em; color: rgb(74, 89, 11)">Microservices</a><a href="/tags/spring-cloud/" style="font-size: 1.22em; color: rgb(114, 91, 74)">Spring Cloud</a><a href="/tags/spring/" style="font-size: 1.25em; color: rgb(90, 192, 39)">Spring</a><a href="/tags/java/" style="font-size: 1.44em; color: rgb(89, 100, 67)">Java</a><a href="/tags/service-governance/" style="font-size: 1.17em; color: rgb(74, 177, 105)">Service Governance</a><a href="/tags/opa/" style="font-size: 1.22em; color: rgb(155, 93, 198)">OPA</a><a href="/tags/alibaba/" style="font-size: 1.23em; color: rgb(65, 140, 89)">Alibaba</a><a href="/tags/security/" style="font-size: 1.28em; color: rgb(85, 151, 165)">Security</a><a href="/tags/compliance/" style="font-size: 1.17em; color: rgb(59, 170, 69)">Compliance</a><a href="/tags/computer-basics/" style="font-size: 1.35em; color: rgb(29, 144, 58)">Computer Basics</a><a href="/tags/computer-organization/" style="font-size: 1.35em; color: rgb(44, 49, 117)">Computer Organization</a><a href="/tags/knowledge-map/" style="font-size: 1.15em; color: rgb(75, 24, 137)">Knowledge Map</a><a href="/tags/architecture/" style="font-size: 1.28em; color: rgb(36, 69, 43)">Architecture</a><a href="/tags/devops/" style="font-size: 1.15em; color: rgb(175, 84, 159)">DevOps</a><a href="/tags/tool/" style="font-size: 1.24em; color: rgb(26, 50, 188)">Tool</a><a href="/tags/git/" style="font-size: 1.24em; color: rgb(56, 7, 12)">Git</a><a href="/tags/cloud/" style="font-size: 1.34em; color: rgb(104, 183, 137)">Cloud</a><a href="/tags/native/" style="font-size: 1.34em; color: rgb(19, 186, 131)">Native</a><a href="/tags/infrastructure/" style="font-size: 1.27em; color: rgb(93, 35, 82)">Infrastructure</a><a href="/tags/authentication/" style="font-size: 1.17em; color: rgb(48, 133, 158)">Authentication</a><a href="/tags/jwt/" style="font-size: 1.15em; color: rgb(20, 171, 25)">JWT</a><a href="/tags/ldap/" style="font-size: 1.15em; color: rgb(112, 85, 75)">LDAP</a><a href="/tags/oauth-2-0/" style="font-size: 1.22em; color: rgb(68, 92, 188)">OAuth 2.0</a><a href="/tags/storage/" style="font-size: 1.39em; color: rgb(100, 106, 34)">Storage</a><a href="/tags/mysql/" style="font-size: 1.41em; color: rgb(72, 104, 72)">MySQL</a><a href="/tags/innodb/" style="font-size: 1.21em; color: rgb(82, 2, 158)">InnoDB</a><a href="/tags/java-concurrent/" style="font-size: 1.37em; color: rgb(52, 191, 99)">Java Concurrent</a><a href="/tags/actor/" style="font-size: 1.15em; color: rgb(31, 30, 108)">Actor</a><a href="/tags/akka/" style="font-size: 1.15em; color: rgb(130, 58, 150)">Akka</a><a href="/tags/coroutine/" style="font-size: 1.16em; color: rgb(158, 159, 20)">Coroutine</a><a href="/tags/disruptor/" style="font-size: 1.15em; color: rgb(107, 67, 47)">Disruptor</a><a href="/tags/csp/" style="font-size: 1.15em; color: rgb(88, 88, 84)">CSP</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(16, 63, 160)">Netty</a><a href="/tags/stm/" style="font-size: 1.15em; color: rgb(188, 168, 91)">STM</a><a href="/tags/mvcc/" style="font-size: 1.15em; color: rgb(124, 145, 132)">MVCC</a><a href="/tags/java-core/" style="font-size: 1.22em; color: rgb(198, 98, 199)">Java Core</a><a href="/tags/java-performance/" style="font-size: 1.33em; color: rgb(190, 130, 173)">Java Performance</a><a href="/tags/cas/" style="font-size: 1.15em; color: rgb(183, 154, 143)">CAS</a><a href="/tags/consistency/" style="font-size: 1.15em; color: rgb(147, 143, 81)">Consistency</a><a href="/tags/hashtable/" style="font-size: 1.15em; color: rgb(11, 164, 157)">HashTable</a><a href="/tags/concurrenthashmap/" style="font-size: 1.15em; color: rgb(173, 93, 62)">ConcurrentHashMap</a><a href="/tags/concurrentskiplistmap/" style="font-size: 1.15em; color: rgb(176, 124, 164)">ConcurrentSkipListMap</a><a href="/tags/design-pattern/" style="font-size: 1.18em; color: rgb(91, 48, 113)">Design Pattern</a><a href="/tags/hashmap/" style="font-size: 1.15em; color: rgb(83, 23, 21)">HashMap</a><a href="/tags/jvm/" style="font-size: 1.36em; color: rgb(183, 88, 25)">JVM</a><a href="/tags/gc/" style="font-size: 1.16em; color: rgb(130, 69, 56)">GC</a><a href="/tags/jit/" style="font-size: 1.15em; color: rgb(84, 113, 181)">JIT</a><a href="/tags/io/" style="font-size: 1.15em; color: rgb(132, 159, 139)">IO</a><a href="/tags/nio/" style="font-size: 1.16em; color: rgb(72, 103, 169)">NIO</a><a href="/tags/aio/" style="font-size: 1.16em; color: rgb(75, 139, 87)">AIO</a><a href="/tags/epoll/" style="font-size: 1.16em; color: rgb(160, 169, 95)">Epoll</a><a href="/tags/bio/" style="font-size: 1.15em; color: rgb(157, 175, 23)">BIO</a><a href="/tags/tomcat/" style="font-size: 1.15em; color: rgb(66, 6, 33)">Tomcat</a><a href="/tags/select/" style="font-size: 1.15em; color: rgb(64, 137, 170)">Select</a><a href="/tags/poll/" style="font-size: 1.15em; color: rgb(77, 146, 10)">Poll</a><a href="/tags/zero-copy/" style="font-size: 1.15em; color: rgb(194, 54, 156)">Zero Copy</a><a href="/tags/mmap/" style="font-size: 1.15em; color: rgb(87, 180, 43)">mmap</a><a href="/tags/reactor/" style="font-size: 1.15em; color: rgb(7, 153, 76)">Reactor</a><a href="/tags/synchronized/" style="font-size: 1.16em; color: rgb(169, 191, 32)">synchronized</a><a href="/tags/lock/" style="font-size: 1.15em; color: rgb(27, 12, 193)">Lock</a><a href="/tags/reentrantreadwritelock/" style="font-size: 1.15em; color: rgb(107, 120, 98)">ReentrantReadWriteLock</a><a href="/tags/stampedlock/" style="font-size: 1.15em; color: rgb(38, 101, 66)">StampedLock</a><a href="/tags/serialization/" style="font-size: 1.15em; color: rgb(167, 190, 186)">Serialization</a><a href="/tags/protobuf/" style="font-size: 1.15em; color: rgb(110, 175, 58)">ProtoBuf</a><a href="/tags/java-stream/" style="font-size: 1.15em; color: rgb(101, 110, 154)">Java Stream</a><a href="/tags/thread-pool/" style="font-size: 1.15em; color: rgb(32, 75, 175)">Thread Pool</a><a href="/tags/mark-word/" style="font-size: 1.15em; color: rgb(17, 142, 39)">Mark Word</a><a href="/tags/monitor/" style="font-size: 1.15em; color: rgb(102, 56, 184)">Monitor</a><a href="/tags/context-switch/" style="font-size: 1.15em; color: rgb(35, 184, 13)">Context Switch</a><a href="/tags/lambda/" style="font-size: 1.15em; color: rgb(80, 14, 35)">Lambda</a><a href="/tags/bytecode-manipulation/" style="font-size: 1.17em; color: rgb(84, 122, 74)">Bytecode Manipulation</a><a href="/tags/asm/" style="font-size: 1.15em; color: rgb(32, 29, 79)">ASM</a><a href="/tags/jol/" style="font-size: 1.17em; color: rgb(18, 24, 67)">JOL</a><a href="/tags/middleware/" style="font-size: 1.38em; color: rgb(186, 120, 29)">Middleware</a><a href="/tags/mq/" style="font-size: 1.38em; color: rgb(62, 104, 74)">MQ</a><a href="/tags/kafka/" style="font-size: 1.38em; color: rgb(166, 198, 40)">Kafka</a><a href="/tags/stream/" style="font-size: 1.38em; color: rgb(39, 122, 136)">Stream</a><a href="/tags/rebalance/" style="font-size: 1.17em; color: rgb(184, 102, 196)">Rebalance</a><a href="/tags/avro/" style="font-size: 1.18em; color: rgb(8, 198, 138)">Avro</a><a href="/tags/compression/" style="font-size: 1.15em; color: rgb(3, 87, 28)">Compression</a><a href="/tags/consumer-group/" style="font-size: 1.15em; color: rgb(17, 40, 81)">Consumer Group</a><a href="/tags/tcp/" style="font-size: 1.16em; color: rgb(170, 121, 98)">TCP</a><a href="/tags/idempotence/" style="font-size: 1.15em; color: rgb(169, 45, 140)">Idempotence</a><a href="/tags/producer/" style="font-size: 1.15em; color: rgb(81, 87, 188)">Producer</a><a href="/tags/load-balance/" style="font-size: 1.15em; color: rgb(23, 92, 59)">Load Balance</a><a href="/tags/distributed-architecture/" style="font-size: 1.15em; color: rgb(71, 200, 124)">Distributed Architecture</a><a href="/tags/distributed-design-pattern/" style="font-size: 1.17em; color: rgb(153, 29, 140)">Distributed Design Pattern</a><a href="/tags/career/" style="font-size: 1.15em; color: rgb(163, 130, 36)">Career</a><a href="/tags/linux-performance/" style="font-size: 1.17em; color: rgb(175, 64, 74)">Linux Performance</a><a href="/tags/linux-practice/" style="font-size: 1.26em; color: rgb(32, 43, 95)">Linux Practice</a><a href="/tags/ext4/" style="font-size: 1.15em; color: rgb(172, 195, 177)">ext4</a><a href="/tags/file-system/" style="font-size: 1.15em; color: rgb(61, 36, 185)">File System</a><a href="/tags/math/" style="font-size: 1.16em; color: rgb(63, 51, 62)">Math</a><a href="/tags/microservices-governance/" style="font-size: 1.23em; color: rgb(70, 80, 151)">Microservices Governance</a><a href="/tags/config/" style="font-size: 1.17em; color: rgb(159, 65, 0)">Config</a><a href="/tags/configuration-center/" style="font-size: 1.17em; color: rgb(6, 146, 163)">Configuration Center</a><a href="/tags/apollo/" style="font-size: 1.17em; color: rgb(200, 11, 8)">Apollo</a><a href="/tags/oauth2/" style="font-size: 1.21em; color: rgb(178, 115, 56)">Oauth2</a><a href="/tags/spring-security/" style="font-size: 1.19em; color: rgb(52, 157, 29)">Spring Security</a><a href="/tags/spring-security-oauth2/" style="font-size: 1.19em; color: rgb(154, 148, 196)">Spring Security OAuth2</a><a href="/tags/vim/" style="font-size: 1.21em; color: rgb(49, 158, 14)">Vim</a><a href="/tags/web/" style="font-size: 1.22em; color: rgb(190, 79, 151)">Web</a><a href="/tags/javascript/" style="font-size: 1.19em; color: rgb(15, 187, 170)">JavaScript</a><a href="/tags/performance-tuning/" style="font-size: 1.15em; color: rgb(15, 127, 7)">Performance Tuning</a><a href="/tags/zookeeper/" style="font-size: 1.16em; color: rgb(45, 172, 133)">Zookeeper</a><a href="/tags/distributed-lock/" style="font-size: 1.15em; color: rgb(6, 120, 196)">Distributed Lock</a><a href="/tags/zab/" style="font-size: 1.15em; color: rgb(38, 83, 165)">ZAB</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">January 2023</span><span class="card-archive-list-count">30</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">December 2022</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">November 2022</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">October 2022</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">September 2022</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">July 2022</span><span class="card-archive-list-count">18</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">May 2022</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">April 2022</span><span class="card-archive-list-count">9</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">488</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2015-06-30T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">856.9k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-12-12T17:22:03.109Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2023 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Stay hungry, stay foolish."])
  } else {
    document.getElementById("subtitle").innerHTML = 'Stay hungry, stay foolish.'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>