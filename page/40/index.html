<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Focus on Infrastructure">
<meta property="og:type" content="website">
<meta property="og:title" content="ByteCoding">
<meta property="og:url" content="https://blog.zhongmingmao.top/page/40/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="Focus on Infrastructure">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png">
<meta property="article:author" content="zhongmingmao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/page/40/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ByteCoding',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-11-11 15:31:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">462</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">125</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">65</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2022/10/16/13/53/early-morning-7525151_1280.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ByteCoding</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2019/01/14/mysql-architecture/" title="MySQL -- 基础架构"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-5.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL -- 基础架构"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/14/mysql-architecture/" title="MySQL -- 基础架构">MySQL -- 基础架构</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-14T12:10:55.000Z" title="Created 2019-01-14 20:10:55">2019-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/storage/">Storage</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/storage/mysql/">MySQL</a></span></div><div class="content">查询语句1mysql&gt; select * from T where ID=10;

基本架构





大体上，MySQL可以分为Server层和存储引擎层
Server层包括连接器、查询缓存、分析器、优化器和执行器等
涵盖MySQL的大多数核心服务功能，以及所有的内置函数
所有的跨存储引擎的功能都在这一层实现，例如存储过程、触发器和视图等


存储引擎层负责数据的存储和提取，架构模式为插件式
支持InnoDB、MyISAM和Memory等存储引擎
最常用为InnoDB（Since 5.5.5，默认）



连接器连接器负责跟客户端建立连接、获取权限、维持和管理连接，命令如下
1$ mysql -h$host -P$port -u$user -p

权限
mysql是客户端工具，用来与服务端建立连接
在完成TCP三次握手之后，连接器就要开始认证身份，即-u和-p
如果账号密码不对，客户端会收到Access denied for user的错误
如果账号密码认证通过，连接器会到权限表里查询拥有的权限
之后在这个连接里的权限判断，都依赖于此时读取的权限
因此即使用管理员账号对权限进行修改，也不会影响到已经存 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/01/12/jvm-advanced-agent/" title="JVM进阶 -- 浅谈Java Agent"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-9.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM进阶 -- 浅谈Java Agent"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/12/jvm-advanced-agent/" title="JVM进阶 -- 浅谈Java Agent">JVM进阶 -- 浅谈Java Agent</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-12T10:40:27.000Z" title="Created 2019-01-12 18:40:27">2019-01-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="content">Java Agent的运行方式
JVM并不会限制Java Agent的数量
可以在JVM参数中包含多个-javaagent参数
也可以远程attach多个Java Agent


JVM会按照参数的顺序或者attach的顺序，逐个执行Java Agent
JRebal&#x2F;Btrace&#x2F;arthas等工具都是基于Java Agent实现的

premain以JVM参数（-javaagent）的方式启动，在Java程序的main方法执行之前执行


MyAgent12345678package me.zhongmingmao;public class MyAgent &#123;    // JVM能识别的premain方法接收的是字符串类型的参数，并非类似main方法的字符串数组    public static void premain(String args) &#123;        System.out.println(&quot;premain&quot;);    &#125;&#125;

manifest.txt12345678910# 写入两行数据，最后一行为空行$ ech ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/01/12/jvm-advanced-jni/" title="JVM进阶 -- 浅谈JNI"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-20.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM进阶 -- 浅谈JNI"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/12/jvm-advanced-jni/" title="JVM进阶 -- 浅谈JNI">JVM进阶 -- 浅谈JNI</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-12T03:05:52.000Z" title="Created 2019-01-12 11:05:52">2019-01-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="content">native方法123public class Object &#123;    public native int hashCode();&#125;
当Java代码调用native方法时，JVM将通过JNI，调用至对应的C函数Object.hashCode()就是一个native方法，对应的C函数将计算对象的哈希值，并缓存在对象头、栈上锁记录（轻量级锁）或者对象监视锁（重量级锁，monitor）中，以确保该值在对象的生命周期之内不会变更


链接方式在调用native方法之前，JVM需要将该native方法链接至对应的C函数上
自动链接JVM自动查找符合默认命名规范的C函数，并且链接起来
Java代码12345678package me.zhongmingmao.advanced.jni;public class Foo &#123;    int i = 0xDEADBEEF;    public static native void foo();    public native void bar(int i, long j);    public native void bar(String s,  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/01/10/jvm-advanced-gui-mat/" title="JVM进阶 -- MAT"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-17.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM进阶 -- MAT"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/10/jvm-advanced-gui-mat/" title="JVM进阶 -- MAT">JVM进阶 -- MAT</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-10T15:18:43.000Z" title="Created 2019-01-10 23:18:43">2019-01-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="content">概念Shallow Heap + Retained HeapShallow HeapShallow heap is the memory consumed by one object. An object needs 32 or 64 bits (depending on the OS architecture) per reference, 4 bytes per Integer, 8 bytes per Long, etc. Depending on the heap dump format the size may be adjusted (e.g. aligned to 8, etc…) to model better the real consumption of the VM.
Retained SetRetained set of X is the set of objects which would be removed by GC when X is garbage collected.
Retained HeapRetained heap of X is the sum of shallo ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/01/08/jvm-advanced-command/" title="JVM进阶 -- JDK命令"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-12.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM进阶 -- JDK命令"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/08/jvm-advanced-command/" title="JVM进阶 -- JDK命令">JVM进阶 -- JDK命令</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-08T12:54:58.000Z" title="Created 2019-01-08 20:54:58">2019-01-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="content">jpsLists the instrumented Java Virtual Machines (JVMs) on the target system.如果Java进程关闭了默认开启的UsePerfData参数（**-XX:-UsePerfData），那么jps&#x2F;jstat将无法探知**到该Java进程
123$ jps1408 Jps19 LiveCoverMain



参数
备注



m
Displays the arguments passed to the main method. The output may be null for embedded JVMs.


l
Displays the full package name for the application’s main class or the full path name to the application’s JAR file.


v
Displays the arguments passed to the JVM.




jstatMonitors Java Virtual Machine (JVM) sta ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/01/07/jvm-advanced-annotation-processor/" title="JVM进阶 -- 浅谈注解处理器"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM进阶 -- 浅谈注解处理器"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/07/jvm-advanced-annotation-processor/" title="JVM进阶 -- 浅谈注解处理器">JVM进阶 -- 浅谈注解处理器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-07T13:43:41.000Z" title="Created 2019-01-07 21:43:41">2019-01-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="content">注解与注解处理器
注解是Java 5引入，用来为类、方法、字段和参数等Java结构提供额外信息的机制
@Override仅对Java编译器有用，为Java编译器引用一条新的编译规则，编译完成后，它的使命也结束了
Java的注解机制允许开发人员自定义注解，这些自定义注解同样可以为Java编译器添加编译规则
这种功能需要由开发人员提供，并且以插件的形式接入Java编译器中，这些插件被称之为注解处理器


除了引入新的编译规则外，注解处理器还可以用于修改已有的Java源文件（不推荐）和生成新的Java源文件

123456789@Target(ElementType.METHOD)@Retention(RetentionPolicy.SOURCE)public @interface Override &#123;&#125;// 元注解@Target：用来限定目标注解所能标注的Java结构// 元注解@Retention：用来限定目标注解的生命周期//      SOURCE：源代码，一旦源代码被编译为字节码，注解便会被擦除//      CLASS：源代码+字节码//      RUNTIME：源代码+字节码+运 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/01/06/jvm-advanced-optimization-loop/" title="JVM进阶 -- 浅谈循环优化"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM进阶 -- 浅谈循环优化"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/06/jvm-advanced-optimization-loop/" title="JVM进阶 -- 浅谈循环优化">JVM进阶 -- 浅谈循环优化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-06T08:16:48.000Z" title="Created 2019-01-06 16:16:48">2019-01-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="content">循环无关代码外提外提无关代码
循环无关代码：循环中值不变的表达式
在不改变程序语义的情况下，将循环无关代码提出循环外
那么程序将避免重复执行这些表达式，从而达到性能提升的效果



1234567int foo(int x, int y, int[] a) &#123;    int sum = 0;    for (int i = 0; i &lt; a.length; i++) &#123;        sum += x * y + a[i];    &#125;    return sum;&#125;



123456789101112131415161718192021222324252627// 对应的字节码int foo(int, int, int[]);  Code:     0: iconst_0     1: istore 4     3: iconst_0     4: istore 5     6: goto 25// 循环体开始     9: iload 4        // load sum    11: iload_1        // load x    12: ilo ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/01/06/jvm-advanced-optimization-filed-access/" title="JVM进阶 -- 浅谈字段访问优化"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM进阶 -- 浅谈字段访问优化"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/06/jvm-advanced-optimization-filed-access/" title="JVM进阶 -- 浅谈字段访问优化">JVM进阶 -- 浅谈字段访问优化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-06T04:02:53.000Z" title="Created 2019-01-06 12:02:53">2019-01-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="content">概念在实际中，Java程序中的对象或许本身就是逃逸的，或许因为方法内联不够彻底而被即时编译器当成是逃逸的，这两种情况都将导致即时编译器无法进行标量替换，这时，针对对象字段访问的优化显得更为重要。
1234static int bar(Foo o, int x) &#123;    o.a = x;    return o.a;&#125;




对象o是传入参数，不属于逃逸分析的范围（JVM中的逃逸分析针对的是新建对象）
该方法会将所传入的int型参数x的值存储至实例字段Foo.a中，然后再读取并返回同一字段的值
这段代码涉及两次内存访问操作：存储和读取实例字段Foo.a
代码可以手工优化成如下

1234static int bar(Foo o, int x) &#123;    o.a = x;    return x;&#125;
即时编译器也能作出类似的自动优化
字段读取优化
即时编译器会优化实例字段和静态字段的访问，以减少总的内存访问次数
即时编译器将沿着控制流，缓存各个字段存储节点将要存储的值，或者字段读取节点所得到的值
当即时编译器遇到对同一字段的读取节点时，如果缓存值还没有失效，那么将读取节 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/01/05/jvm-advanced-escape/" title="JVM进阶 -- 浅谈逃逸分析"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-12.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM进阶 -- 浅谈逃逸分析"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/05/jvm-advanced-escape/" title="JVM进阶 -- 浅谈逃逸分析">JVM进阶 -- 浅谈逃逸分析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-05T13:21:51.000Z" title="Created 2019-01-05 21:21:51">2019-01-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="content">概念
在JVM即时编译语境下，逃逸分析将判断新建的对象是否逃逸
即时编译器判断对象是否逃逸的依据
对象是否被存入堆中（静态字段或者堆中对象的实例字段）
堆是线程共享的，其他线程可以获得该对象的引用


对象是否被传入未知代码
JVM即时编译是以方法为单位的
对于方法中未被内联的方法调用，即时编译器会将其当做未知代码
方法调用的调用者以及参数是逃逸的




注：方法内联可以简单理解，在即时编译过程中遇到方法调用时
将目标方法的方法体纳入到编译范围之中，并取代原方法调用的优化手段





foreach语法糖
12345public void forEach(ArrayList&lt;Object&gt; list, Consumer&lt;Object&gt; f) &#123;    for (Object obj : list) &#123;        f.accept(obj);    &#125;&#125;

等价代码
1234567public void forEach(ArrayList&lt;Object&gt; list, Consumer&lt;Object&gt; f) &#123 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/01/03/jvm-basic-bytecode/" title="JVM基础 -- 字节码"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM基础 -- 字节码"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/03/jvm-basic-bytecode/" title="JVM基础 -- 字节码">JVM基础 -- 字节码</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-03T15:15:14.000Z" title="Created 2019-01-03 23:15:14">2019-01-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/baisc/">Baisc</a></span></div><div class="content">操作数栈
JVM是基于栈的计算模型
在解析过程中，每当为Java方法分配栈帧时
执行每条执行之前，JVM要求该指令的操作数已被压入操作数栈中
在执行指令时，JVM会将该指令所需要的操作数弹出，并将该指令的结果重新压入栈中





iadd
执行iadd之前，栈顶的元素为int值1和int值2
执行iadd指令会将弹出这两个int，并将求得的和int值3压入栈中
iadd只消耗栈顶的两个元素，iadd并不关心更远的元素，也不会对它们进行修改




dup + pop
dup和pop只能处理非long和非double类型的值
long类型和double类型需要占据两个栈单元，对应使用dup2和pop2

dup
dup：复制栈顶元素
dup指令常用于复制new指令生成的未经初始化的引用

123456789101112131415public void dup() &#123;    Object o = new Object();&#125;// 对应的字节码public void dup();  descriptor: ()V  flags: ACC_PUBLIC  Code:    stack=2, l ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/39/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/39/#content-inner">39</a><span class="page-number current">40</span><a class="page-number" href="/page/41/#content-inner">41</a><span class="space">&hellip;</span><a class="page-number" href="/page/47/#content-inner">47</a><a class="extend next" rel="next" href="/page/41/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">462</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">125</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">65</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/01/04/go-foundation-switch/" title="Go - switch"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/go-switch.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go - switch"/></a><div class="content"><a class="title" href="/2023/01/04/go-foundation-switch/" title="Go - switch">Go - switch</a><time datetime="2023-01-03T16:06:25.000Z" title="Created 2023-01-04 00:06:25">2023-01-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/03/go-foundation-for/" title="Go - for"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/go-for-loop.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go - for"/></a><div class="content"><a class="title" href="/2023/01/03/go-foundation-for/" title="Go - for">Go - for</a><time datetime="2023-01-02T16:06:25.000Z" title="Created 2023-01-03 00:06:25">2023-01-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/02/go-foundation-if/" title="Go - if"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/golang-if-else.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go - if"/></a><div class="content"><a class="title" href="/2023/01/02/go-foundation-if/" title="Go - if">Go - if</a><time datetime="2023-01-01T16:06:25.000Z" title="Created 2023-01-02 00:06:25">2023-01-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/01/go-foundation-struct/" title="Go - Struct"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/go-struct.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go - Struct"/></a><div class="content"><a class="title" href="/2023/01/01/go-foundation-struct/" title="Go - Struct">Go - Struct</a><time datetime="2022-12-31T16:06:25.000Z" title="Created 2023-01-01 00:06:25">2023-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/31/go-foundation-map/" title="Go - Map"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/gomap.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go - Map"/></a><div class="content"><a class="title" href="/2022/12/31/go-foundation-map/" title="Go - Map">Go - Map</a><time datetime="2022-12-30T16:06:25.000Z" title="Created 2022-12-31 00:06:25">2022-12-31</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/career/"><span class="card-category-list-name">Career</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/"><span class="card-category-list-name">Cloud Computing</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/iaas/"><span class="card-category-list-name">IaaS</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/paas/"><span class="card-category-list-name">PaaS</span><span class="card-category-list-count">5</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/"><span class="card-category-list-name">Cloud Native</span><span class="card-category-list-count">115</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/"><span class="card-category-list-name">Cloud Native Foundation</span><span class="card-category-list-count">89</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/"><span class="card-category-list-name">Container</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">2</span></a></li></ul></li></ul></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/cloud-computing/" style="font-size: 1.25em; color: rgb(186, 9, 146)">Cloud Computing</a><a href="/tags/paas/" style="font-size: 1.19em; color: rgb(86, 173, 54)">PaaS</a><a href="/tags/iaas/" style="font-size: 1.19em; color: rgb(51, 97, 45)">IaaS</a><a href="/tags/cloud-native/" style="font-size: 1.45em; color: rgb(196, 67, 115)">Cloud Native</a><a href="/tags/container/" style="font-size: 1.29em; color: rgb(62, 156, 38)">Container</a><a href="/tags/docker/" style="font-size: 1.31em; color: rgb(113, 25, 184)">Docker</a><a href="/tags/go-core/" style="font-size: 1.17em; color: rgb(193, 25, 15)">Go Core</a><a href="/tags/go/" style="font-size: 1.42em; color: rgb(41, 61, 184)">Go</a><a href="/tags/go-engineering/" style="font-size: 1.32em; color: rgb(181, 127, 15)">Go Engineering</a><a href="/tags/rpc/" style="font-size: 1.16em; color: rgb(163, 136, 75)">RPC</a><a href="/tags/grpc/" style="font-size: 1.15em; color: rgb(3, 105, 180)">gRPC</a><a href="/tags/network/" style="font-size: 1.16em; color: rgb(192, 127, 9)">Network</a><a href="/tags/kubernetes/" style="font-size: 1.43em; color: rgb(60, 199, 16)">Kubernetes</a><a href="/tags/cloud-native-foundation/" style="font-size: 1.33em; color: rgb(189, 143, 92)">Cloud Native Foundation</a><a href="/tags/linux/" style="font-size: 1.31em; color: rgb(30, 107, 18)">Linux</a><a href="/tags/dockerfile/" style="font-size: 1.17em; color: rgb(41, 86, 118)">Dockerfile</a><a href="/tags/microservices/" style="font-size: 1.31em; color: rgb(199, 110, 180)">Microservices</a><a href="/tags/spring-cloud/" style="font-size: 1.22em; color: rgb(5, 57, 116)">Spring Cloud</a><a href="/tags/spring/" style="font-size: 1.26em; color: rgb(50, 38, 85)">Spring</a><a href="/tags/java/" style="font-size: 1.44em; color: rgb(151, 52, 183)">Java</a><a href="/tags/service-governance/" style="font-size: 1.17em; color: rgb(169, 55, 66)">Service Governance</a><a href="/tags/alibaba/" style="font-size: 1.24em; color: rgb(178, 159, 155)">Alibaba</a><a href="/tags/security/" style="font-size: 1.29em; color: rgb(186, 188, 186)">Security</a><a href="/tags/compliance/" style="font-size: 1.17em; color: rgb(96, 29, 156)">Compliance</a><a href="/tags/opa/" style="font-size: 1.22em; color: rgb(76, 165, 186)">OPA</a><a href="/tags/computer-basics/" style="font-size: 1.35em; color: rgb(200, 140, 39)">Computer Basics</a><a href="/tags/computer-organization/" style="font-size: 1.35em; color: rgb(152, 89, 17)">Computer Organization</a><a href="/tags/knowledge-map/" style="font-size: 1.15em; color: rgb(104, 39, 187)">Knowledge Map</a><a href="/tags/architecture/" style="font-size: 1.29em; color: rgb(171, 118, 64)">Architecture</a><a href="/tags/devops/" style="font-size: 1.15em; color: rgb(11, 140, 73)">DevOps</a><a href="/tags/tool/" style="font-size: 1.25em; color: rgb(72, 177, 142)">Tool</a><a href="/tags/git/" style="font-size: 1.25em; color: rgb(21, 127, 29)">Git</a><a href="/tags/cloud/" style="font-size: 1.23em; color: rgb(200, 200, 17)">Cloud</a><a href="/tags/native/" style="font-size: 1.23em; color: rgb(9, 172, 4)">Native</a><a href="/tags/infrastructure/" style="font-size: 1.28em; color: rgb(20, 200, 93)">Infrastructure</a><a href="/tags/authentication/" style="font-size: 1.17em; color: rgb(193, 60, 21)">Authentication</a><a href="/tags/ldap/" style="font-size: 1.15em; color: rgb(151, 144, 123)">LDAP</a><a href="/tags/oauth-2-0/" style="font-size: 1.22em; color: rgb(123, 91, 3)">OAuth 2.0</a><a href="/tags/storage/" style="font-size: 1.39em; color: rgb(180, 72, 164)">Storage</a><a href="/tags/mysql/" style="font-size: 1.41em; color: rgb(183, 148, 157)">MySQL</a><a href="/tags/innodb/" style="font-size: 1.21em; color: rgb(154, 107, 118)">InnoDB</a><a href="/tags/java-concurrent/" style="font-size: 1.37em; color: rgb(56, 162, 28)">Java Concurrent</a><a href="/tags/actor/" style="font-size: 1.15em; color: rgb(174, 148, 23)">Actor</a><a href="/tags/akka/" style="font-size: 1.15em; color: rgb(132, 187, 77)">Akka</a><a href="/tags/coroutine/" style="font-size: 1.16em; color: rgb(0, 105, 24)">Coroutine</a><a href="/tags/csp/" style="font-size: 1.15em; color: rgb(144, 119, 75)">CSP</a><a href="/tags/disruptor/" style="font-size: 1.15em; color: rgb(29, 64, 196)">Disruptor</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(181, 95, 129)">Netty</a><a href="/tags/stm/" style="font-size: 1.15em; color: rgb(153, 0, 162)">STM</a><a href="/tags/mvcc/" style="font-size: 1.15em; color: rgb(156, 147, 180)">MVCC</a><a href="/tags/java-core/" style="font-size: 1.22em; color: rgb(104, 72, 3)">Java Core</a><a href="/tags/java-performance/" style="font-size: 1.34em; color: rgb(116, 200, 111)">Java Performance</a><a href="/tags/cas/" style="font-size: 1.15em; color: rgb(194, 158, 130)">CAS</a><a href="/tags/design-pattern/" style="font-size: 1.18em; color: rgb(25, 185, 127)">Design Pattern</a><a href="/tags/hashtable/" style="font-size: 1.15em; color: rgb(194, 32, 168)">HashTable</a><a href="/tags/concurrenthashmap/" style="font-size: 1.15em; color: rgb(131, 105, 190)">ConcurrentHashMap</a><a href="/tags/concurrentskiplistmap/" style="font-size: 1.15em; color: rgb(55, 168, 167)">ConcurrentSkipListMap</a><a href="/tags/consistency/" style="font-size: 1.15em; color: rgb(18, 104, 58)">Consistency</a><a href="/tags/jvm/" style="font-size: 1.36em; color: rgb(111, 148, 167)">JVM</a><a href="/tags/gc/" style="font-size: 1.16em; color: rgb(51, 52, 181)">GC</a><a href="/tags/hashmap/" style="font-size: 1.15em; color: rgb(8, 33, 160)">HashMap</a><a href="/tags/io/" style="font-size: 1.15em; color: rgb(74, 13, 51)">IO</a><a href="/tags/nio/" style="font-size: 1.16em; color: rgb(60, 42, 39)">NIO</a><a href="/tags/aio/" style="font-size: 1.16em; color: rgb(172, 154, 140)">AIO</a><a href="/tags/epoll/" style="font-size: 1.16em; color: rgb(160, 196, 64)">Epoll</a><a href="/tags/jit/" style="font-size: 1.15em; color: rgb(26, 68, 90)">JIT</a><a href="/tags/synchronized/" style="font-size: 1.16em; color: rgb(91, 53, 71)">synchronized</a><a href="/tags/lock/" style="font-size: 1.15em; color: rgb(3, 73, 120)">Lock</a><a href="/tags/reentrantreadwritelock/" style="font-size: 1.15em; color: rgb(190, 127, 45)">ReentrantReadWriteLock</a><a href="/tags/stampedlock/" style="font-size: 1.15em; color: rgb(112, 22, 28)">StampedLock</a><a href="/tags/serialization/" style="font-size: 1.15em; color: rgb(110, 107, 102)">Serialization</a><a href="/tags/protobuf/" style="font-size: 1.15em; color: rgb(179, 47, 34)">ProtoBuf</a><a href="/tags/java-stream/" style="font-size: 1.15em; color: rgb(52, 174, 5)">Java Stream</a><a href="/tags/thread-pool/" style="font-size: 1.15em; color: rgb(131, 78, 13)">Thread Pool</a><a href="/tags/context-switch/" style="font-size: 1.15em; color: rgb(79, 194, 115)">Context Switch</a><a href="/tags/mark-word/" style="font-size: 1.15em; color: rgb(123, 182, 134)">Mark Word</a><a href="/tags/monitor/" style="font-size: 1.15em; color: rgb(107, 49, 171)">Monitor</a><a href="/tags/lambda/" style="font-size: 1.15em; color: rgb(170, 22, 193)">Lambda</a><a href="/tags/bytecode-manipulation/" style="font-size: 1.17em; color: rgb(116, 86, 134)">Bytecode Manipulation</a><a href="/tags/asm/" style="font-size: 1.15em; color: rgb(67, 52, 6)">ASM</a><a href="/tags/jol/" style="font-size: 1.17em; color: rgb(126, 29, 196)">JOL</a><a href="/tags/middleware/" style="font-size: 1.38em; color: rgb(4, 22, 7)">Middleware</a><a href="/tags/mq/" style="font-size: 1.38em; color: rgb(0, 26, 131)">MQ</a><a href="/tags/kafka/" style="font-size: 1.38em; color: rgb(132, 130, 177)">Kafka</a><a href="/tags/stream/" style="font-size: 1.38em; color: rgb(47, 62, 68)">Stream</a><a href="/tags/rebalance/" style="font-size: 1.17em; color: rgb(125, 49, 7)">Rebalance</a><a href="/tags/avro/" style="font-size: 1.18em; color: rgb(97, 100, 159)">Avro</a><a href="/tags/consumer-group/" style="font-size: 1.15em; color: rgb(198, 127, 81)">Consumer Group</a><a href="/tags/compression/" style="font-size: 1.15em; color: rgb(187, 63, 146)">Compression</a><a href="/tags/tcp/" style="font-size: 1.16em; color: rgb(43, 176, 121)">TCP</a><a href="/tags/idempotence/" style="font-size: 1.15em; color: rgb(193, 161, 42)">Idempotence</a><a href="/tags/producer/" style="font-size: 1.15em; color: rgb(106, 78, 153)">Producer</a><a href="/tags/load-balance/" style="font-size: 1.15em; color: rgb(147, 164, 30)">Load Balance</a><a href="/tags/distributed-architecture/" style="font-size: 1.15em; color: rgb(71, 154, 25)">Distributed Architecture</a><a href="/tags/distributed-design-pattern/" style="font-size: 1.17em; color: rgb(40, 77, 45)">Distributed Design Pattern</a><a href="/tags/career/" style="font-size: 1.15em; color: rgb(152, 177, 189)">Career</a><a href="/tags/linux-performance/" style="font-size: 1.17em; color: rgb(93, 14, 142)">Linux Performance</a><a href="/tags/linux-practice/" style="font-size: 1.27em; color: rgb(181, 150, 106)">Linux Practice</a><a href="/tags/ext4/" style="font-size: 1.15em; color: rgb(134, 189, 132)">ext4</a><a href="/tags/file-system/" style="font-size: 1.15em; color: rgb(133, 138, 115)">File System</a><a href="/tags/math/" style="font-size: 1.16em; color: rgb(110, 8, 39)">Math</a><a href="/tags/microservices-governance/" style="font-size: 1.24em; color: rgb(107, 8, 189)">Microservices Governance</a><a href="/tags/config/" style="font-size: 1.17em; color: rgb(97, 92, 150)">Config</a><a href="/tags/configuration-center/" style="font-size: 1.17em; color: rgb(136, 60, 71)">Configuration Center</a><a href="/tags/apollo/" style="font-size: 1.17em; color: rgb(69, 146, 11)">Apollo</a><a href="/tags/oauth2/" style="font-size: 1.21em; color: rgb(30, 83, 68)">Oauth2</a><a href="/tags/spring-security/" style="font-size: 1.19em; color: rgb(73, 142, 8)">Spring Security</a><a href="/tags/spring-security-oauth2/" style="font-size: 1.19em; color: rgb(200, 126, 154)">Spring Security OAuth2</a><a href="/tags/vim/" style="font-size: 1.21em; color: rgb(18, 190, 166)">Vim</a><a href="/tags/web/" style="font-size: 1.22em; color: rgb(21, 52, 157)">Web</a><a href="/tags/javascript/" style="font-size: 1.19em; color: rgb(89, 112, 144)">JavaScript</a><a href="/tags/zookeeper/" style="font-size: 1.16em; color: rgb(5, 175, 114)">Zookeeper</a><a href="/tags/distributed-lock/" style="font-size: 1.15em; color: rgb(13, 148, 189)">Distributed Lock</a><a href="/tags/jwt/" style="font-size: 1.15em; color: rgb(75, 131, 137)">JWT</a><a href="/tags/bio/" style="font-size: 1.15em; color: rgb(151, 170, 115)">BIO</a><a href="/tags/tomcat/" style="font-size: 1.15em; color: rgb(128, 3, 52)">Tomcat</a><a href="/tags/select/" style="font-size: 1.15em; color: rgb(133, 171, 107)">Select</a><a href="/tags/poll/" style="font-size: 1.15em; color: rgb(95, 89, 74)">Poll</a><a href="/tags/zero-copy/" style="font-size: 1.15em; color: rgb(61, 178, 113)">Zero Copy</a><a href="/tags/mmap/" style="font-size: 1.15em; color: rgb(120, 74, 109)">mmap</a><a href="/tags/reactor/" style="font-size: 1.15em; color: rgb(51, 176, 21)">Reactor</a><a href="/tags/zab/" style="font-size: 1.15em; color: rgb(95, 198, 49)">ZAB</a><a href="/tags/etcd/" style="font-size: 1.15em; color: rgb(16, 200, 146)">etcd</a><a href="/tags/raft/" style="font-size: 1.15em; color: rgb(171, 119, 26)">raft</a><a href="/tags/performance-tuning/" style="font-size: 1.15em; color: rgb(158, 196, 180)">Performance Tuning</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">January 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">December 2022</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">November 2022</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">October 2022</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">September 2022</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">July 2022</span><span class="card-archive-list-count">18</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">May 2022</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">April 2022</span><span class="card-archive-list-count">9</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">462</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2015-06-30T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">811.9k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-11-11T07:31:23.148Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2023 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Stay hungry, stay foolish."])
  } else {
    document.getElementById("subtitle").innerHTML = 'Stay hungry, stay foolish.'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>