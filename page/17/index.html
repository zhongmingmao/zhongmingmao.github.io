<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Focus on Infrastructure">
<meta property="og:type" content="website">
<meta property="og:title" content="ByteCoding">
<meta property="og:url" content="https://blog.zhongmingmao.top/page/17/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="Focus on Infrastructure">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png">
<meta property="article:author" content="zhongmingmao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/page/17/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ByteCoding',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-11-17 17:02:40'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">585</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">180</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">74</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2022/10/16/13/53/early-morning-7525151_1280.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ByteCoding</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/30/cloud-native-foundation-k8s-pv/" title="Kubernetes - PersistentVolume"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/image-20230625163632509.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - PersistentVolume"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/30/cloud-native-foundation-k8s-pv/" title="Kubernetes - PersistentVolume">Kubernetes - PersistentVolume</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-29T16:06:25.000Z" title="Created 2022-10-30 00:06:25">2022-10-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">概述PersistentVolume
Pod 里的容器由镜像产生，镜像文件本身是只读的，进程要读写磁盘需要一个临时的存储空间
一旦 Pod 销毁，临时存储会被立即释放，数据也就丢失了


PersistentVolume
用来表示持久存储设备，隐藏了存储的底层实现
PersistentVolume 实际是一些存储设备和文件系统，如 Ceph、GlusterFS、NFS、本地磁盘
PersistentVolume 是属于集群的系统资源，是和 Node 平级的对象，Pod 只有使用权





PersistentVolumeClaim + StorageClass
PersistentVolumeClaim 和 StorageClass 是 Pod 与 PersistentVolume 之间的中间层


Pod 用 PersistentVolumeClaim 来向 Kubernetes 申请存储资源
bind：一旦资源申请成功，Kubernetes 会把 PV 和 PVC 关联在一起
StorageClass 类似于 IngressClass，抽象了特定类型的存储系统
在 PVC 和 PV 之间充当协调人的角色 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/29/cloud-native-foundation-k8s-wp-v2/" title="Kubernetes - Another example"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/wordpress.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Another example"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/29/cloud-native-foundation-k8s-wp-v2/" title="Kubernetes - Another example">Kubernetes - Another example</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-28T16:06:25.000Z" title="Created 2022-10-29 00:06:25">2022-10-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">架构


MariaDB
ConfigMap

maria-cm.yaml12345678910apiVersion: v1kind: ConfigMapmetadata:  name: maria-cmdata:  DATABASE: &#x27;db&#x27;  USER: &#x27;wp&#x27;  PASSWORD: &#x27;123&#x27;  ROOT_PASSWORD: &#x27;123&#x27;

12$ k apply -f maria-cm.yamlconfigmap/maria-cm created


Deployment

maria-deploy.yaml1234567891011121314151617181920212223242526apiVersion: apps/v1kind: Deploymentmetadata:  name: maria-deploy  labels:    app: maria-deployspec:  replicas: 1  selector:    matchLabels:      app: maria-deploy  tem ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/28/cloud-native-foundation-k8s-ingress/" title="Kubernetes - Ingress"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/617fae2d495f2526b09ce6fd_k8s-ingress-01-100841247-large.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Ingress"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/28/cloud-native-foundation-k8s-ingress/" title="Kubernetes - Ingress">Kubernetes - Ingress</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-27T16:06:25.000Z" title="Created 2022-10-28 00:06:25">2022-10-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">概述Service
Service 本质上是一个由 kube-proxy 控制的四层负载均衡，在 TCP/IP 协议栈转发流量


四层负载均衡，在功能上非常受限，只能依据 IP 地址和端口号做一些简单的判断和组合
Service 适合代理集群内的服务，如果要将服务暴露到集群外部，需要使用 NodePort 或者 LoadBalancer

Ingress
负责七层负载均衡

流量的总入口（南北向）：扇入流量 + 扇出流量

语义：集群内外边界上的入口





Ingress Controller
类比




-
-
-



四层
Service - iptables 规则
kube-proxy


七层
Ingress - HTTP 路由规则
Ingress Controller



Service 本身没有服务能力，只是一些 iptables 规则
真正配置和应用这些 iptables 规则的是 Node 上的 kube-proxy 组件


Ingress 也只是 HTTP 路由规则的集合，相当于是一份静态描述文件
真正使得规则在集群中运行，需要 Ingress Controller，相当于 S ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/27/cloud-native-foundation-k8s-service/" title="Kubernetes - Service"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/58-image-2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Service"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/27/cloud-native-foundation-k8s-service/" title="Kubernetes - Service">Kubernetes - Service</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-26T16:06:25.000Z" title="Created 2022-10-27 00:06:25">2022-10-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">概述
Service 是集群内部的负载均衡机制，用于解决服务发现的关键问题
工作原理
Kubernetes 为 Service 分配一个静态 IP，由 Service 自动管理和维护动态变化的 Pod 集合
当客户端访问 Service 时，Service 会根据某种策略，将流量转发到某个 Pod
Service 使用了 iptables
每个 Node 上的 kube-proxy 自动维护 iptables 规则
负载均衡：Service 会根据 iptables 规则转发请求给它管理的多个 Pod
Service 也可以使用其它技术实现负载均衡
性能更差的 userspace
性能更好的 ipvs










YAML
Service 为 Kubernetes 的核心对象，不关联业务应用

12345678910111213141516171819$ k api-resources --api-group=&quot;&quot;NAME                     SHORTNAMES   APIVERSION   NAMESPACED   KINDbindings          ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/26/cloud-native-foundation-k8s-daemonset/" title="Kubernetes - Daemonset"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/DaemonSets.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Daemonset"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/26/cloud-native-foundation-k8s-daemonset/" title="Kubernetes - Daemonset">Kubernetes - Daemonset</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-25T16:06:25.000Z" title="Created 2022-10-26 00:06:25">2022-10-26</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">YAML
与 Deployment 非常类似，但缺少 replicas，因为 Daemonset 的意图是在每个 Node 上部署一个 Pod

redis-ds.yml123456789101112131415161718192021apiVersion: apps/v1kind: DaemonSetmetadata:  name: redis-ds  labels:    app: redis-dsspec:  selector:    matchLabels:      name: redis-ds  template:    metadata:      labels:        name: redis-ds    spec:      containers:      - name: redis        image: redis:5-alpine        ports:        - containerPort: 6379




使用12345678910$ k apply -f redis-ds.ymldaemonset.apps/redis-ds created$ k get ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/25/cloud-native-foundation-k8s-deployment/" title="Kubernetes - Deployment"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/Kubernetes-Deployments-Rolling-Update-Configuration.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Deployment"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/25/cloud-native-foundation-k8s-deployment/" title="Kubernetes - Deployment">Kubernetes - Deployment</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-24T16:06:25.000Z" title="Created 2022-10-25 00:06:25">2022-10-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">API1234567$ k api-resources --api-group=appsNAME                  SHORTNAMES   APIVERSION   NAMESPACED   KINDcontrollerrevisions                apps/v1      true         ControllerRevisiondaemonsets            ds           apps/v1      true         DaemonSetdeployments           deploy       apps/v1      true         Deploymentreplicasets           rs           apps/v1      true         ReplicaSetstatefulsets          sts          apps/v1      true         StatefulSet



YAML12345678910111213141516171819202 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/24/cloud-native-foundation-k8s-kubeadm/" title="Kubernetes - Kubeadm"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/7f93bb49-1080x675.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Kubeadm"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/24/cloud-native-foundation-k8s-kubeadm/" title="Kubernetes - Kubeadm">Kubernetes - Kubeadm</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-23T16:06:25.000Z" title="Created 2022-10-24 00:06:25">2022-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">架构


准备
修改主机名，Kubernetes 使用主机名来区分集群中的节点，不能重名





hostname
ip



master
mac-master
192.168.191.144


worker
mac-worker
192.168.191.146


123456789101112131415161718192021$ ip a1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00    inet 127.0.0.1/8 scope host lo       valid_lft forever preferred_lft forever    inet6 ::1/128 scope host       valid_lft forever preferred_lft forever2: ens160: &lt;BROADCAST,MUL ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/23/cloud-native-foundation-k8s-wp-v1/" title="Kubernetes - An example"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/1604578891313.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - An example"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/23/cloud-native-foundation-k8s-wp-v1/" title="Kubernetes - An example">Kubernetes - An example</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-22T16:06:25.000Z" title="Created 2022-10-23 00:06:25">2022-10-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">架构


常见 API 对象
ConfigMap 和 Secret 只接受字符串类型


部署
MariaDBmaria-cm.yml12345678910apiVersion: v1kind: ConfigMapmetadata:  name: maria-cmdata:  DATABASE: &#x27;db&#x27;  USER: &#x27;wp&#x27;  PASSWORD: &#x27;123&#x27;  ROOT_PASSWORD: &#x27;123&#x27;


envFrom - 更简洁

maria-pod.yml12345678910111213141516171819apiVersion: v1kind: Podmetadata:  name: maria-pod  labels:    app: wordpress    role: databasespec:  containers:  - name: maria    image: mariadb:10    imagePullPolicy: IfNotPresent    ports:    - containerPo ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/22/cloud-native-foundation-k8s-cm-secret/" title="Kubernetes - ConfigMap + Secret"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/liwxn86e6gpynt9jk6fy.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - ConfigMap + Secret"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/22/cloud-native-foundation-k8s-cm-secret/" title="Kubernetes - ConfigMap + Secret">Kubernetes - ConfigMap + Secret</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-21T16:06:25.000Z" title="Created 2022-10-22 00:06:25">2022-10-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">定义ConfigMap
明文配置

12345678$ k create cm info --from-literal=name=zhongmingmao --dry-run=client -oyamlapiVersion: v1data:  name: zhongmingmaokind: ConfigMapmetadata:  creationTimestamp: null  name: info


ConfigMap 没有 spec，因为 ConfigMap 存储的是配置数据，并不是容器，因此没有运行时规格




ConfigMap 里的数据都是 Key-Value 结构

cm.yml12345678910apiVersion: v1kind: ConfigMapmetadata:  name: infodata:  name: zhongmingmao  city: guangzhou  greeting: |    hello kubernetes!

123456789101112131415161718192021222324252627282930$ k apply -f cm.ymlco ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/21/cloud-computing-serverless/" title="Cloud Computing - Serverless"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/serverless.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - Serverless"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/21/cloud-computing-serverless/" title="Cloud Computing - Serverless">Cloud Computing - Serverless</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-20T16:06:25.000Z" title="Created 2022-10-21 00:06:25">2022-10-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-computing/">Cloud Computing</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-computing/paas/">PaaS</a></span></div><div class="content">Serverless vs Container
Serverless 是云计算中资源抽象的极致体现：用户专注于业务逻辑，而无需关注基础设施


Container
给予了用户很大的定制空间，按需对应用进行拆分和封装


Serverless
完全屏蔽了计算资源，引导用户不再关注基础设施，只需遵循标准的方式编写业务代码即可
更细的拆分粒度
FaaS：将每一个具有独立功能的函数，作为一个单独的服务进行部署和运行







计费机制
底层没有固化的资源，一般会按照调用次数和调用时长来计费，可以精确到毫秒
从成本上，非常适合那些偶尔触发、短时间运行的工作负载

事件模型
事件模型是 Serverless 的核心编程模型和运行逻辑，非常适合基于事件驱动的开发场景


上游：触发器
Serverless 一般都会提供多种触发器：API 触发器、OSS 触发器、MQ 触发器、定时触发器等


下游
在函数内访问其他云服务（如 RDS、MQ 等外部存储）
Serverless Computing 本身是无状态的，所有持久化需求都需要借助外部存储来实现


架构范式
FaaS + MQ：关注数据流，是数据的传递和流向
当  ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/16/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/#content-inner">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/#content-inner">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/#content-inner">59</a><a class="extend next" rel="next" href="/page/18/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">585</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">180</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">74</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/09/15/bigdata-lambda/" title="Big Data - Lambda"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://big-data-1253868755.cos.ap-guangzhou.myqcloud.com/bigdata-lambda.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Big Data - Lambda"/></a><div class="content"><a class="title" href="/2024/09/15/bigdata-lambda/" title="Big Data - Lambda">Big Data - Lambda</a><time datetime="2024-09-14T16:06:25.000Z" title="Created 2024-09-15 00:06:25">2024-09-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/14/bigdata-cap/" title="Big Data - CAP"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://big-data-1253868755.cos.ap-guangzhou.myqcloud.com/bigdata-cap.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Big Data - CAP"/></a><div class="content"><a class="title" href="/2024/09/14/bigdata-cap/" title="Big Data - CAP">Big Data - CAP</a><time datetime="2024-09-13T16:06:25.000Z" title="Created 2024-09-14 00:06:25">2024-09-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/13/bigdata-pub-sub/" title="Big Data - Pub + Sub"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://big-data-1253868755.cos.ap-guangzhou.myqcloud.com/bigdata-pub-sub.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Big Data - Pub + Sub"/></a><div class="content"><a class="title" href="/2024/09/13/bigdata-pub-sub/" title="Big Data - Pub + Sub">Big Data - Pub + Sub</a><time datetime="2024-09-12T16:06:25.000Z" title="Created 2024-09-13 00:06:25">2024-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/12/bigdata-workflow/" title="Big Data - Workflow"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://big-data-1253868755.cos.ap-guangzhou.myqcloud.com/bigdata-1692816749106.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Big Data - Workflow"/></a><div class="content"><a class="title" href="/2024/09/12/bigdata-workflow/" title="Big Data - Workflow">Big Data - Workflow</a><time datetime="2024-09-11T16:06:25.000Z" title="Created 2024-09-12 00:06:25">2024-09-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/11/bigdata-batch-stream/" title="Big Data - Batch + Stream"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://big-data-1253868755.cos.ap-guangzhou.myqcloud.com/image-20241115160715474.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Big Data - Batch + Stream"/></a><div class="content"><a class="title" href="/2024/09/11/bigdata-batch-stream/" title="Big Data - Batch + Stream">Big Data - Batch + Stream</a><time datetime="2024-09-10T16:06:25.000Z" title="Created 2024-09-11 00:06:25">2024-09-11</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/"><span class="card-category-list-name">AI</span><span class="card-category-list-count">34</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/llm/"><span class="card-category-list-name">LLM</span><span class="card-category-list-count">16</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/rag/"><span class="card-category-list-name">RAG</span><span class="card-category-list-count">18</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/big-data/"><span class="card-category-list-name">Big Data</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/career/"><span class="card-category-list-name">Career</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/"><span class="card-category-list-name">Cloud Computing</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/iaas/"><span class="card-category-list-name">IaaS</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/paas/"><span class="card-category-list-name">PaaS</span><span class="card-category-list-count">5</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/big-data/" style="font-size: 1.2em; color: rgb(180, 71, 8)">Big Data</a><a href="/tags/cloud-computing/" style="font-size: 1.22em; color: rgb(118, 190, 64)">Cloud Computing</a><a href="/tags/iaas/" style="font-size: 1.19em; color: rgb(7, 114, 102)">IaaS</a><a href="/tags/paas/" style="font-size: 1.19em; color: rgb(11, 171, 57)">PaaS</a><a href="/tags/cloud-native/" style="font-size: 1.45em; color: rgb(152, 136, 134)">Cloud Native</a><a href="/tags/kubernetes/" style="font-size: 1.43em; color: rgb(88, 134, 47)">Kubernetes</a><a href="/tags/devops/" style="font-size: 1.18em; color: rgb(52, 166, 143)">DevOps</a><a href="/tags/container/" style="font-size: 1.26em; color: rgb(47, 37, 52)">Container</a><a href="/tags/docker/" style="font-size: 1.28em; color: rgb(191, 59, 192)">Docker</a><a href="/tags/go-core/" style="font-size: 1.17em; color: rgb(66, 192, 133)">Go Core</a><a href="/tags/go/" style="font-size: 1.42em; color: rgb(132, 0, 155)">Go</a><a href="/tags/go-engineering/" style="font-size: 1.34em; color: rgb(172, 160, 184)">Go Engineering</a><a href="/tags/swagger/" style="font-size: 1.15em; color: rgb(135, 170, 50)">Swagger</a><a href="/tags/rpc/" style="font-size: 1.16em; color: rgb(87, 20, 121)">RPC</a><a href="/tags/grpc/" style="font-size: 1.16em; color: rgb(91, 172, 3)">gRPC</a><a href="/tags/ci/" style="font-size: 1.15em; color: rgb(10, 158, 25)">CI</a><a href="/tags/makefile/" style="font-size: 1.15em; color: rgb(162, 39, 18)">Makefile</a><a href="/tags/network/" style="font-size: 1.16em; color: rgb(1, 84, 54)">Network</a><a href="/tags/cloud-native-foundation/" style="font-size: 1.33em; color: rgb(3, 151, 62)">Cloud Native Foundation</a><a href="/tags/linux/" style="font-size: 1.27em; color: rgb(116, 72, 140)">Linux</a><a href="/tags/dockerfile/" style="font-size: 1.17em; color: rgb(198, 147, 115)">Dockerfile</a><a href="/tags/service-mesh/" style="font-size: 1.18em; color: rgb(72, 54, 67)">Service Mesh</a><a href="/tags/microservices/" style="font-size: 1.27em; color: rgb(82, 8, 171)">Microservices</a><a href="/tags/spring-cloud/" style="font-size: 1.21em; color: rgb(37, 52, 82)">Spring Cloud</a><a href="/tags/spring/" style="font-size: 1.23em; color: rgb(72, 51, 198)">Spring</a><a href="/tags/java/" style="font-size: 1.44em; color: rgb(8, 117, 64)">Java</a><a href="/tags/service-governance/" style="font-size: 1.17em; color: rgb(96, 10, 16)">Service Governance</a><a href="/tags/opa/" style="font-size: 1.21em; color: rgb(195, 22, 130)">OPA</a><a href="/tags/alibaba/" style="font-size: 1.22em; color: rgb(4, 40, 12)">Alibaba</a><a href="/tags/security/" style="font-size: 1.26em; color: rgb(51, 156, 68)">Security</a><a href="/tags/compliance/" style="font-size: 1.17em; color: rgb(178, 170, 144)">Compliance</a><a href="/tags/infrastructure/" style="font-size: 1.31em; color: rgb(193, 16, 52)">Infrastructure</a><a href="/tags/architecture/" style="font-size: 1.32em; color: rgb(78, 174, 148)">Architecture</a><a href="/tags/serverless/" style="font-size: 1.22em; color: rgb(195, 69, 19)">Serverless</a><a href="/tags/faas/" style="font-size: 1.22em; color: rgb(74, 179, 28)">FaaS</a><a href="/tags/computer-basics/" style="font-size: 1.36em; color: rgb(36, 122, 115)">Computer Basics</a><a href="/tags/computer-organization/" style="font-size: 1.36em; color: rgb(1, 160, 101)">Computer Organization</a><a href="/tags/knowledge-map/" style="font-size: 1.15em; color: rgb(16, 89, 134)">Knowledge Map</a><a href="/tags/tool/" style="font-size: 1.22em; color: rgb(66, 110, 9)">Tool</a><a href="/tags/git/" style="font-size: 1.22em; color: rgb(130, 128, 191)">Git</a><a href="/tags/concurrency/" style="font-size: 1.15em; color: rgb(21, 191, 167)">Concurrency</a><a href="/tags/cloud/" style="font-size: 1.37em; color: rgb(176, 5, 89)">Cloud</a><a href="/tags/native/" style="font-size: 1.37em; color: rgb(148, 175, 140)">Native</a><a href="/tags/authentication/" style="font-size: 1.17em; color: rgb(102, 60, 53)">Authentication</a><a href="/tags/ldap/" style="font-size: 1.15em; color: rgb(129, 32, 191)">LDAP</a><a href="/tags/oauth-2-0/" style="font-size: 1.21em; color: rgb(33, 116, 122)">OAuth 2.0</a><a href="/tags/storage/" style="font-size: 1.4em; color: rgb(51, 176, 92)">Storage</a><a href="/tags/mysql/" style="font-size: 1.41em; color: rgb(130, 199, 85)">MySQL</a><a href="/tags/innodb/" style="font-size: 1.2em; color: rgb(151, 155, 65)">InnoDB</a><a href="/tags/java-concurrent/" style="font-size: 1.38em; color: rgb(184, 50, 26)">Java Concurrent</a><a href="/tags/actor/" style="font-size: 1.15em; color: rgb(2, 115, 193)">Actor</a><a href="/tags/akka/" style="font-size: 1.15em; color: rgb(82, 81, 188)">Akka</a><a href="/tags/coroutine/" style="font-size: 1.16em; color: rgb(130, 185, 157)">Coroutine</a><a href="/tags/csp/" style="font-size: 1.15em; color: rgb(99, 13, 123)">CSP</a><a href="/tags/disruptor/" style="font-size: 1.15em; color: rgb(185, 22, 17)">Disruptor</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(116, 27, 34)">Netty</a><a href="/tags/stm/" style="font-size: 1.15em; color: rgb(128, 39, 96)">STM</a><a href="/tags/mvcc/" style="font-size: 1.15em; color: rgb(169, 160, 114)">MVCC</a><a href="/tags/java-core/" style="font-size: 1.21em; color: rgb(97, 187, 93)">Java Core</a><a href="/tags/java-performance/" style="font-size: 1.34em; color: rgb(70, 3, 2)">Java Performance</a><a href="/tags/cas/" style="font-size: 1.15em; color: rgb(176, 107, 16)">CAS</a><a href="/tags/design-pattern/" style="font-size: 1.18em; color: rgb(148, 105, 167)">Design Pattern</a><a href="/tags/consistency/" style="font-size: 1.15em; color: rgb(183, 58, 36)">Consistency</a><a href="/tags/jvm/" style="font-size: 1.38em; color: rgb(57, 12, 51)">JVM</a><a href="/tags/gc/" style="font-size: 1.16em; color: rgb(18, 29, 93)">GC</a><a href="/tags/hashmap/" style="font-size: 1.15em; color: rgb(22, 86, 8)">HashMap</a><a href="/tags/hashtable/" style="font-size: 1.15em; color: rgb(87, 18, 110)">HashTable</a><a href="/tags/concurrenthashmap/" style="font-size: 1.15em; color: rgb(104, 92, 47)">ConcurrentHashMap</a><a href="/tags/concurrentskiplistmap/" style="font-size: 1.15em; color: rgb(132, 178, 33)">ConcurrentSkipListMap</a><a href="/tags/jit/" style="font-size: 1.15em; color: rgb(87, 144, 188)">JIT</a><a href="/tags/synchronized/" style="font-size: 1.16em; color: rgb(165, 196, 32)">synchronized</a><a href="/tags/lock/" style="font-size: 1.15em; color: rgb(131, 104, 158)">Lock</a><a href="/tags/reentrantreadwritelock/" style="font-size: 1.15em; color: rgb(181, 113, 182)">ReentrantReadWriteLock</a><a href="/tags/stampedlock/" style="font-size: 1.15em; color: rgb(16, 164, 188)">StampedLock</a><a href="/tags/io/" style="font-size: 1.15em; color: rgb(157, 46, 9)">IO</a><a href="/tags/nio/" style="font-size: 1.16em; color: rgb(78, 85, 140)">NIO</a><a href="/tags/aio/" style="font-size: 1.16em; color: rgb(40, 71, 130)">AIO</a><a href="/tags/epoll/" style="font-size: 1.16em; color: rgb(136, 179, 113)">Epoll</a><a href="/tags/serialization/" style="font-size: 1.15em; color: rgb(102, 51, 140)">Serialization</a><a href="/tags/protobuf/" style="font-size: 1.15em; color: rgb(163, 125, 138)">ProtoBuf</a><a href="/tags/java-stream/" style="font-size: 1.15em; color: rgb(154, 187, 73)">Java Stream</a><a href="/tags/mark-word/" style="font-size: 1.15em; color: rgb(56, 78, 47)">Mark Word</a><a href="/tags/monitor/" style="font-size: 1.15em; color: rgb(103, 33, 187)">Monitor</a><a href="/tags/context-switch/" style="font-size: 1.15em; color: rgb(197, 79, 152)">Context Switch</a><a href="/tags/thread-pool/" style="font-size: 1.15em; color: rgb(162, 108, 53)">Thread Pool</a><a href="/tags/lambda/" style="font-size: 1.15em; color: rgb(73, 73, 82)">Lambda</a><a href="/tags/bytecode-manipulation/" style="font-size: 1.17em; color: rgb(37, 182, 70)">Bytecode Manipulation</a><a href="/tags/asm/" style="font-size: 1.15em; color: rgb(138, 85, 45)">ASM</a><a href="/tags/jol/" style="font-size: 1.17em; color: rgb(127, 11, 133)">JOL</a><a href="/tags/middleware/" style="font-size: 1.39em; color: rgb(18, 193, 13)">Middleware</a><a href="/tags/mq/" style="font-size: 1.39em; color: rgb(88, 110, 22)">MQ</a><a href="/tags/kafka/" style="font-size: 1.39em; color: rgb(35, 165, 76)">Kafka</a><a href="/tags/stream/" style="font-size: 1.39em; color: rgb(40, 90, 90)">Stream</a><a href="/tags/rebalance/" style="font-size: 1.17em; color: rgb(158, 186, 155)">Rebalance</a><a href="/tags/avro/" style="font-size: 1.18em; color: rgb(117, 7, 142)">Avro</a><a href="/tags/compression/" style="font-size: 1.15em; color: rgb(41, 25, 162)">Compression</a><a href="/tags/consumer-group/" style="font-size: 1.15em; color: rgb(148, 181, 76)">Consumer Group</a><a href="/tags/tcp/" style="font-size: 1.16em; color: rgb(14, 19, 101)">TCP</a><a href="/tags/idempotence/" style="font-size: 1.15em; color: rgb(172, 64, 163)">Idempotence</a><a href="/tags/producer/" style="font-size: 1.15em; color: rgb(196, 120, 144)">Producer</a><a href="/tags/load-balance/" style="font-size: 1.15em; color: rgb(61, 185, 123)">Load Balance</a><a href="/tags/distributed-design-pattern/" style="font-size: 1.17em; color: rgb(189, 160, 75)">Distributed Design Pattern</a><a href="/tags/distributed-architecture/" style="font-size: 1.15em; color: rgb(61, 167, 95)">Distributed Architecture</a><a href="/tags/career/" style="font-size: 1.15em; color: rgb(40, 12, 124)">Career</a><a href="/tags/linux-performance/" style="font-size: 1.17em; color: rgb(149, 36, 126)">Linux Performance</a><a href="/tags/linux-practice/" style="font-size: 1.24em; color: rgb(55, 108, 98)">Linux Practice</a><a href="/tags/ext4/" style="font-size: 1.15em; color: rgb(148, 199, 147)">ext4</a><a href="/tags/file-system/" style="font-size: 1.15em; color: rgb(149, 126, 68)">File System</a><a href="/tags/ai/" style="font-size: 1.35em; color: rgb(168, 144, 181)">AI</a><a href="/tags/llm/" style="font-size: 1.35em; color: rgb(65, 16, 200)">LLM</a><a href="/tags/nlp/" style="font-size: 1.25em; color: rgb(179, 76, 121)">NLP</a><a href="/tags/python/" style="font-size: 1.3em; color: rgb(183, 146, 183)">Python</a><a href="/tags/fastapi/" style="font-size: 1.15em; color: rgb(62, 144, 157)">FastAPI</a><a href="/tags/uvicorn/" style="font-size: 1.15em; color: rgb(103, 117, 106)">Uvicorn</a><a href="/tags/chatgpt/" style="font-size: 1.15em; color: rgb(92, 74, 37)">ChatGPT</a><a href="/tags/machine-learning/" style="font-size: 1.17em; color: rgb(53, 37, 79)">Machine Learning</a><a href="/tags/seq2seq/" style="font-size: 1.16em; color: rgb(56, 59, 146)">Seq2Seq</a><a href="/tags/rnn/" style="font-size: 1.15em; color: rgb(165, 145, 105)">RNN</a><a href="/tags/word2vec/" style="font-size: 1.15em; color: rgb(131, 66, 175)">Word2Vec</a><a href="/tags/langchain/" style="font-size: 1.19em; color: rgb(93, 179, 131)">LangChain</a><a href="/tags/ai-agent/" style="font-size: 1.18em; color: rgb(171, 124, 53)">AI Agent</a><a href="/tags/rag/" style="font-size: 1.29em; color: rgb(55, 38, 93)">RAG</a><a href="/tags/lora/" style="font-size: 1.15em; color: rgb(118, 148, 120)">LoRA</a><a href="/tags/peft/" style="font-size: 1.15em; color: rgb(103, 182, 133)">PEFT</a><a href="/tags/faiss/" style="font-size: 1.15em; color: rgb(165, 29, 28)">Faiss</a><a href="/tags/math/" style="font-size: 1.16em; color: rgb(163, 57, 44)">Math</a><a href="/tags/microservices-governance/" style="font-size: 1.22em; color: rgb(183, 106, 149)">Microservices Governance</a><a href="/tags/config/" style="font-size: 1.17em; color: rgb(148, 111, 106)">Config</a><a href="/tags/configuration-center/" style="font-size: 1.17em; color: rgb(148, 135, 30)">Configuration Center</a><a href="/tags/apollo/" style="font-size: 1.17em; color: rgb(190, 68, 66)">Apollo</a><a href="/tags/oauth2/" style="font-size: 1.2em; color: rgb(195, 16, 4)">Oauth2</a><a href="/tags/spring-security/" style="font-size: 1.19em; color: rgb(129, 67, 193)">Spring Security</a><a href="/tags/spring-security-oauth2/" style="font-size: 1.19em; color: rgb(157, 41, 199)">Spring Security OAuth2</a><a href="/tags/chatops/" style="font-size: 1.15em; color: rgb(200, 192, 110)">ChatOps</a><a href="/tags/chatbot/" style="font-size: 1.15em; color: rgb(110, 164, 26)">Chatbot</a><a href="/tags/graphrag/" style="font-size: 1.15em; color: rgb(110, 141, 0)">GraphRAG</a><a href="/tags/rerank/" style="font-size: 1.15em; color: rgb(32, 8, 133)">Rerank</a><a href="/tags/kg-rag/" style="font-size: 1.15em; color: rgb(112, 139, 115)">KG-RAG</a><a href="/tags/prompting/" style="font-size: 1.15em; color: rgb(189, 71, 44)">Prompting</a><a href="/tags/vector/" style="font-size: 1.16em; color: rgb(153, 49, 146)">Vector</a><a href="/tags/vim/" style="font-size: 1.2em; color: rgb(124, 131, 58)">Vim</a><a href="/tags/web/" style="font-size: 1.21em; color: rgb(10, 80, 47)">Web</a><a href="/tags/javascript/" style="font-size: 1.19em; color: rgb(130, 102, 4)">JavaScript</a><a href="/tags/zookeeper/" style="font-size: 1.16em; color: rgb(155, 76, 42)">Zookeeper</a><a href="/tags/distributed-lock/" style="font-size: 1.15em; color: rgb(47, 23, 126)">Distributed Lock</a><a href="/tags/istio/" style="font-size: 1.17em; color: rgb(97, 140, 17)">Istio</a><a href="/tags/jwt/" style="font-size: 1.15em; color: rgb(6, 80, 178)">JWT</a><a href="/tags/bio/" style="font-size: 1.15em; color: rgb(150, 90, 189)">BIO</a><a href="/tags/tomcat/" style="font-size: 1.15em; color: rgb(151, 150, 12)">Tomcat</a><a href="/tags/select/" style="font-size: 1.15em; color: rgb(166, 37, 91)">Select</a><a href="/tags/poll/" style="font-size: 1.15em; color: rgb(77, 85, 116)">Poll</a><a href="/tags/zero-copy/" style="font-size: 1.15em; color: rgb(188, 159, 6)">Zero Copy</a><a href="/tags/mmap/" style="font-size: 1.15em; color: rgb(102, 125, 48)">mmap</a><a href="/tags/reactor/" style="font-size: 1.15em; color: rgb(144, 43, 76)">Reactor</a><a href="/tags/transformer/" style="font-size: 1.16em; color: rgb(56, 123, 152)">Transformer</a><a href="/tags/svm/" style="font-size: 1.15em; color: rgb(186, 116, 109)">SVM</a><a href="/tags/attention/" style="font-size: 1.15em; color: rgb(200, 111, 13)">Attention</a><a href="/tags/zab/" style="font-size: 1.15em; color: rgb(64, 78, 95)">ZAB</a><a href="/tags/etcd/" style="font-size: 1.15em; color: rgb(159, 108, 200)">etcd</a><a href="/tags/raft/" style="font-size: 1.15em; color: rgb(90, 151, 29)">raft</a><a href="/tags/iac/" style="font-size: 1.15em; color: rgb(175, 190, 141)">IaC</a><a href="/tags/terraform/" style="font-size: 1.15em; color: rgb(6, 40, 136)">Terraform</a><a href="/tags/crossplane/" style="font-size: 1.15em; color: rgb(126, 71, 76)">Crossplane</a><a href="/tags/pulumi/" style="font-size: 1.15em; color: rgb(108, 192, 24)">Pulumi</a><a href="/tags/argo-cd/" style="font-size: 1.15em; color: rgb(145, 167, 66)">Argo CD</a><a href="/tags/vpc/" style="font-size: 1.15em; color: rgb(112, 61, 168)">VPC</a><a href="/tags/helm/" style="font-size: 1.15em; color: rgb(175, 40, 1)">Helm</a><a href="/tags/runc/" style="font-size: 1.15em; color: rgb(0, 33, 193)">runc</a><a href="/tags/kustomize/" style="font-size: 1.15em; color: rgb(158, 22, 74)">Kustomize</a><a href="/tags/oci/" style="font-size: 1.15em; color: rgb(17, 112, 160)">OCI</a><a href="/tags/buildkit/" style="font-size: 1.15em; color: rgb(177, 118, 123)">BuildKit</a><a href="/tags/crane/" style="font-size: 1.15em; color: rgb(118, 82, 177)">crane</a><a href="/tags/oci-image/" style="font-size: 1.15em; color: rgb(166, 37, 189)">OCI Image</a><a href="/tags/oci-runtime/" style="font-size: 1.15em; color: rgb(42, 6, 185)">OCI Runtime</a><a href="/tags/linux-namespace/" style="font-size: 1.15em; color: rgb(133, 37, 144)">Linux Namespace</a><a href="/tags/linux-cgroup/" style="font-size: 1.15em; color: rgb(113, 15, 22)">Linux CGroup</a><a href="/tags/k8s-manifest/" style="font-size: 1.15em; color: rgb(37, 94, 54)">K8S Manifest</a><a href="/tags/performance-tuning/" style="font-size: 1.15em; color: rgb(194, 88, 46)">Performance Tuning</a><a href="/tags/api-gateway/" style="font-size: 1.15em; color: rgb(148, 119, 70)">API Gateway</a><a href="/tags/apisix/" style="font-size: 1.15em; color: rgb(191, 133, 40)">APISIX</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">September 2024</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">August 2024</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">July 2024</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">June 2024</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">May 2023</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">April 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">February 2023</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">January 2023</span><span class="card-archive-list-count">31</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">585</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2015-06-30T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">1110k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-11-17T09:02:36.305Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2024 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Stay hungry, stay foolish."])
  } else {
    document.getElementById("subtitle").innerHTML = 'Stay hungry, stay foolish.'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>