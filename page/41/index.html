<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Focus on Infrastructure">
<meta property="og:type" content="website">
<meta property="og:title" content="ByteCoding">
<meta property="og:url" content="https://blog.zhongmingmao.top/page/41/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="Focus on Infrastructure">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png">
<meta property="article:author" content="zhongmingmao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/page/41/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ByteCoding',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-10-31 11:35:03'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">568</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">179</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">73</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2022/10/16/13/53/early-morning-7525151_1280.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ByteCoding</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2019/06/22/kafka-term/" title="Kafka -- 术语"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kafka -- 术语"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/06/22/kafka-term/" title="Kafka -- 术语">Kafka -- 术语</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-06-22T11:35:39.000Z" title="Created 2019-06-22 19:35:39">2019-06-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/middleware/">Middleware</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/middleware/mq/">MQ</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/middleware/mq/kafka/">Kafka</a></span></div><div class="content">主题 + 客户端
发布订阅的对象是主题（Topic）
向主题发布消息的客户端应用程序称为生产者（Producer），生产者可以持续不断地向多个主题发送消息
订阅这些主题消息的客户端应用程序称为消费者（Consumer），消费者能够同时订阅多个主题的消息
生产者和消费者统称为客户端



服务端
Kafka的服务端由被称为Broker的服务进程构成，一个Kafka集群由多个Broker组成
Broker负责接收和处理客户端发送过来的请求，以及对消息进行持久化
多个Broker进程能够运行在同一台机器上，但更常见的做法是将不同的Broker分散运行在不同的机器上
这样如果集群中某一台机器宕机了，即使在它上面运行的所有Broker进程都挂掉了
其他机器上的Broker也依然能够对外提供服务，这是Kafka提供高可用的手段之一



备份
实现高可用的另一个手段是备份机制（Replication）
备份：把相同的数据拷贝到多台机器上，这些相同的数据拷贝在Kafka中被称为副本（Replica）
副本的数量是可以配置的，Kafka定义了两类副本：领导者副本（Leader Replica）和追随者副本（Follower  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/06/18/kafka-messaging-system/" title="Kafka -- 消息引擎系统"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-18.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kafka -- 消息引擎系统"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/06/18/kafka-messaging-system/" title="Kafka -- 消息引擎系统">Kafka -- 消息引擎系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-06-18T00:15:26.000Z" title="Created 2019-06-18 08:15:26">2019-06-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/middleware/">Middleware</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/middleware/mq/">MQ</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/middleware/mq/kafka/">Kafka</a></span></div><div class="content">术语
Apache Kafka是一款开源的消息引擎系统
消息队列：给人某种暗示，仿佛Kafka是利用队列实现的
消息中间件：过度强调中间件，而不能清晰地表达实际解决的问题



解决的问题
系统A发送消息给消息引擎系统，系统B从消息引擎系统中读取A发送的消息
消息引擎传输的对象是消息
如何传输消息属于消息引擎设计机制的一部分

消息格式
成熟解决方案：CSV、XML、JSON
序列化框架：Google Protocol Buffer、Facebook Thrift
Kafka：纯二进制的字节序列

消息引擎模型
点对点模型
即消息队列模型，系统A发送的消息只能被系统B接收，其他任何系统不能读取A发送的消息


发布订阅模型
主题（Topic）、发布者（Publisher）、订阅者（Subscriber）
多个发布者可以向相同的主题发送消息，多个订阅者可以接收相同主题的消息


Kafka同时支持上面两种消息引擎模型

JMS
JMS：Java Message Service
JMS也支持上面的两种消息引擎模型
JMS并非传输协议，而是一组API
JMS非常出名，很多主流的消息引擎系统都支持JMS规范
Acti ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/06/12/java-concurrent-csp/" title="Java并发 -- CSP模型"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-13.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java并发 -- CSP模型"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/06/12/java-concurrent-csp/" title="Java并发 -- CSP模型">Java并发 -- CSP模型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-06-12T06:46:47.000Z" title="Created 2019-06-12 14:46:47">2019-06-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/concurrent/">Concurrent</a></span></div><div class="content">Go
Go是一门号称从语言层面支持并发的编程语言，支持并发也是Go非常重要的特性之一
Go支持协程，协程可以类比Java中的线程，解决并发问题的难点在于线程（协程）之间的协作
Go提供了两种方案
支持协程之间以共享内存的方式通信，Go提供了管程和原子类来对协程进行同步控制，该方案与Java类似
支持协程之间以消息传递的方式通信，本质上是要避免共享，该方案是基于CSP模型实现的，Go推荐该方案





CSP模型
CSP：Communicating Sequential Processes
Do not communicate by sharing memory; instead, share memory by communicating.

累加器12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455package mainimport (    &quot;fmt&quot;    &quot;time&quot;)func main() &#123;    ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/06/09/java-performance-string/" title="Java性能 -- 字符串"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-22.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java性能 -- 字符串"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/06/09/java-performance-string/" title="Java性能 -- 字符串">Java性能 -- 字符串</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-06-09T12:41:38.000Z" title="Created 2019-06-09 20:41:38">2019-06-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/performance/">Performance</a></span></div><div class="content">实现




在Java 6以及之前的版本中，String对象是对char数组进行了封装实现的对象
主要四个成员变量：char数组、偏移量offset、字符数量count、哈希值hash
String对象通过offset和count两个属性来定位char数组，获取字符串
这样可以高效快速地共享数组对象，同时节省内存空间，但也有可能会导致内存泄露




Java 7&#x2F;8，String类中不再有offset和count两个变量
这样String对象占用的内存稍微少了一点
另外，String.substring不再共享char[]，从而解决了使用该方法可能导致的内存泄露问题


从Java 9开始，将char[]修改为byte[]，同时维护了一个新的属性coder，它是一个编码格式的标识
一个char字符占用16位，2个字节，用一个char去存储单字节编码的字符会非常浪费
Java 9的String类为了节约内存空间，使用了占用8位，1个字节的byte数组来存放字符串
coder的作用：使用length()或者indexOf()
coder有两个默认值：0代表LATIN1，1代表UTF16





不 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/06/08/java-concurrent-coroutine/" title="Java并发 -- 协程"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java并发 -- 协程"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/06/08/java-concurrent-coroutine/" title="Java并发 -- 协程">Java并发 -- 协程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-06-08T10:11:51.000Z" title="Created 2019-06-08 18:11:51">2019-06-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/concurrent/">Concurrent</a></span></div><div class="content">协程
协程可以理解为一种轻量级的线程
从操作系统的角度来看，线程是在内核态中调度的，而协程是在用户态调度的，协程的切换成本更低
协程栈比线程栈要小得多，典型的线程栈在1M左右，而协程栈一般在几K或者几十K左右
因此无论在时间维度还是在空间维度，协程都比线程轻量很多
支持协程的语言：Go、Python、Lua、Kotlin
Java OpenSDK的Loom项目的目标是为了支持协程





Go中的协程12345678910func hello(msg string) &#123;    fmt.Println(&quot;Hello &quot; + msg)&#125;func TestCoroutine(t *testing.T) &#123;    // 在新的协程中执行hello方法    go hello(&quot;Go&quot;)    // 等待100毫秒让协程执行结束    time.Sleep(100 * time.Millisecond)&#125;

Java中的线程是一个重量级对象，因此无法很好地实现Thread-Per-Message模式，而协程可以
Thread-Per-Me ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/06/06/java-concurrent-stm/" title="Java并发 -- 软件事务内存"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-19.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java并发 -- 软件事务内存"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/06/06/java-concurrent-stm/" title="Java并发 -- 软件事务内存">Java并发 -- 软件事务内存</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-06-06T15:38:37.000Z" title="Created 2019-06-06 23:38:37">2019-06-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/concurrent/">Concurrent</a></span></div><div class="content">STM
STM：Software Transactional Memory，软件事务内存，借鉴于数据库的事务管理
传统的数据库事务支持ACID，即原子性（A）、一致性（C）、隔离性（I）和持久性（D）
STM不支持持久化，即只支持ACI



数据库事务数据库保证在并发情况下不会发生死锁，而且还能保证ACID
1234567891011121314Connection conn = null;try&#123;    // 获取数据库连接    conn = DriverManager.getConnection();    // 设置手动提交事务    conn.setAutoCommit(false);    // 执行转账SQL    ...    // 提交事务    conn.commit();&#125; catch (Exception e) &#123;    // 出现异常回滚事务    conn.rollback();&#125;

synchronized转账12345678910111213141516@AllArgsConstructorpublic class UnsafeAcco ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/06/05/java-performance-opt-strategy/" title="Java性能 -- 性能调优策略"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-19.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java性能 -- 性能调优策略"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/06/05/java-performance-opt-strategy/" title="Java性能 -- 性能调优策略">Java性能 -- 性能调优策略</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-06-05T15:07:25.000Z" title="Created 2019-06-05 23:07:25">2019-06-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/performance/">Performance</a></span></div><div class="content">性能测试测试方法
微基准性能测试
可以精准定位到某个模块或者某个方法的性能问题，例如对比一个方法使用同步实现和非同步实现的性能差异


宏基准性能测试
宏基准性能测试是一个综合测试，需要考虑到测试环境、测试场景和测试目标
测试环境：模拟线上的真实环境
测试场景：在测试某个接口时，是否有其他业务的接口也在平行运行，进而造成干扰
测试目标
可以通过吞吐量和响应时间来衡量系统是否达标，如果不达标，就需要进行优化
如果达标，就继续加大测试的并发数，探底接口的TPS
除了关注接口的吞吐量和响应时间外，还需要关注CPU、内存和IO的使用率情况







干扰因素热身问题
在Java编程语言和环境中，.java文件编译成.class文件后，需要通过解析器将字节码转换成本地机器码才能运行
为了节约内存和执行效率，代码在最初被执行时，解析器会率先解析执行这段代码
随着代码被执行的次数增加，当JVM发现某个方法或代码块运行得很频繁时，就会把这些代码认定为热点代码
为了提高热点代码的执行效率，在运行时，JVM将通过即时编译器（JIT）把这些代码编译成与本地平台相关的机器码
并进行各层次的优化，然后存储在内存中，之后每次运行代码 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/06/04/java-concurrent-actor/" title="Java并发 -- Actor模型"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java并发 -- Actor模型"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/06/04/java-concurrent-actor/" title="Java并发 -- Actor模型">Java并发 -- Actor模型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-06-04T04:18:34.000Z" title="Created 2019-06-04 12:18:34">2019-06-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/concurrent/">Concurrent</a></span></div><div class="content">Actor模型
Actor模型在本质上是一种计算模型，基本的计算单元称为Actor，在Actor模型中，所有的计算都在Actor中执行
在面向对象编程里，一切都是对象，在Actor模型里，一切都是Actor，并且Actor之间是完全隔离的，不会共享任何变量
Java本身并不支持Actor模型，如果需要在Java里使用Actor模型，需要借助第三方类库，比较完备的是Akka



Hello Actor12345678910111213141516public class HelloActor extends UntypedAbstractActor &#123;    // 该Actor在收到消息message后，会打印Hello message    @Override    public void onReceive(Object message) throws Throwable &#123;        System.out.printf(&quot;Hello %s%n&quot;, message);    &#125;    public static void main(String[] a ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/06/02/java-performance-opt-std/" title="Java性能 -- 性能调优标准"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-9.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java性能 -- 性能调优标准"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/06/02/java-performance-opt-std/" title="Java性能 -- 性能调优标准">Java性能 -- 性能调优标准</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-06-02T12:10:05.000Z" title="Created 2019-06-02 20:10:05">2019-06-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/performance/">Performance</a></span></div><div class="content">性能瓶颈
CPU
如果应用需要大量计算，会长时间占用CPU资源，导致其它应用因无法争夺到CPU而响应缓慢
场景：代码递归导致的无限循环，JVM频繁的Full GC、多线程编程造成的大量上下文切换


内存
Java程序一般通过JVM对内存进行分配管理，主要使用JVM中的堆内存来存储Java创建的对象
但内存空间有限，当内存空间被占满，对象无法回收，会导致内存溢出，内存泄露等问题


磁盘IO
网络：带宽
异常：Java应用中，抛出异常需要构建异常栈，对异常进行捕获和处理，这个过程非常消耗系统性能
数据库：数据库的操作往往涉及到磁盘IO的读写，大量的数据库读写操作，会导致磁盘IO的性能瓶颈
锁竞争
在并发编程中，经常需要使用到多线程，并发读写同一个共享资源，为了保证数据原子性，会用到锁
锁的使用会带来上下文切换，从而给系统带来性能开销





性能指标响应时间


一个接口的响应时间一般在毫秒级
数据库响应时间：数据库操作所消耗的时间，往往是整个请求链中最耗时的
服务端响应时间：包括Nginx分发请求所消耗的时间以及服务端程序执行所消耗的时间
网络响应时间：在网络传输时，网络硬件对需要传输的请求进行解析等操作 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/05/31/java-concurrent-disruptor/" title="Java并发 -- Disruptor"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-16.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java并发 -- Disruptor"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/05/31/java-concurrent-disruptor/" title="Java并发 -- Disruptor">Java并发 -- Disruptor</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-05-31T07:49:44.000Z" title="Created 2019-05-31 15:49:44">2019-05-31</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/concurrent/">Concurrent</a></span></div><div class="content">有界队列
JUC中的有界队列ArrayBlockingQueue和LinkedBlockingQueue，都是基于ReentrantLock
在高并发场景下，锁的效率并不高，Disruptor是一款性能更高的有界内存队列
Disruptor高性能的原因
内存分配更合理，使用RingBuffer，数组元素在初始化时一次性全部创建
提升缓存命中率，对象循环利用，避免频繁GC


能够避免伪共享，提升缓存利用率
采用无锁算法，避免频繁加锁、解锁的性能消耗
支持批量消费，消费者可以以无锁的方式消费多个消息





简单使用123456789101112131415161718192021222324252627public class DisruptorExample &#123;    public static void main(String[] args) throws InterruptedException &#123;        // RingBuffer大小，必须是2的N次方        int bufferSize = 1024;        // 构建Disruptor        D ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/40/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/40/#content-inner">40</a><span class="page-number current">41</span><a class="page-number" href="/page/42/#content-inner">42</a><span class="space">&hellip;</span><a class="page-number" href="/page/57/#content-inner">57</a><a class="extend next" rel="next" href="/page/42/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">568</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">179</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">73</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/08/29/python-parameter-passing/" title="Python - Parameter Passing"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://python-1253868755.cos.ap-guangzhou.myqcloud.com/python-parameter-passing.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - Parameter Passing"/></a><div class="content"><a class="title" href="/2024/08/29/python-parameter-passing/" title="Python - Parameter Passing">Python - Parameter Passing</a><time datetime="2024-08-28T16:06:25.000Z" title="Created 2024-08-29 00:06:25">2024-08-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/28/python-compare-copy/" title="Python - Compare + Copy"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://python-1253868755.cos.ap-guangzhou.myqcloud.com/python-copy.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - Compare + Copy"/></a><div class="content"><a class="title" href="/2024/08/28/python-compare-copy/" title="Python - Compare + Copy">Python - Compare + Copy</a><time datetime="2024-08-27T16:06:25.000Z" title="Created 2024-08-28 00:06:25">2024-08-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/27/python-module/" title="Python - Module"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://python-1253868755.cos.ap-guangzhou.myqcloud.com/python-module.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - Module"/></a><div class="content"><a class="title" href="/2024/08/27/python-module/" title="Python - Module">Python - Module</a><time datetime="2024-08-26T16:06:25.000Z" title="Created 2024-08-27 00:06:25">2024-08-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/26/python-oop/" title="Python - OOP"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://python-1253868755.cos.ap-guangzhou.myqcloud.com/python-oop.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - OOP"/></a><div class="content"><a class="title" href="/2024/08/26/python-oop/" title="Python - OOP">Python - OOP</a><time datetime="2024-08-25T16:06:25.000Z" title="Created 2024-08-26 00:06:25">2024-08-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/25/python-lambda/" title="Python - Lambda"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://python-1253868755.cos.ap-guangzhou.myqcloud.com/python-lambda.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - Lambda"/></a><div class="content"><a class="title" href="/2024/08/25/python-lambda/" title="Python - Lambda">Python - Lambda</a><time datetime="2024-08-24T16:06:25.000Z" title="Created 2024-08-25 00:06:25">2024-08-25</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/"><span class="card-category-list-name">AI</span><span class="card-category-list-count">33</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/llm/"><span class="card-category-list-name">LLM</span><span class="card-category-list-count">16</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/rag/"><span class="card-category-list-name">RAG</span><span class="card-category-list-count">17</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/career/"><span class="card-category-list-name">Career</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/"><span class="card-category-list-name">Cloud Computing</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/iaas/"><span class="card-category-list-name">IaaS</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/paas/"><span class="card-category-list-name">PaaS</span><span class="card-category-list-count">5</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/"><span class="card-category-list-name">Cloud Native</span><span class="card-category-list-count">146</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/cloud-computing/" style="font-size: 1.23em; color: rgb(93, 82, 106)">Cloud Computing</a><a href="/tags/iaas/" style="font-size: 1.19em; color: rgb(155, 127, 15)">IaaS</a><a href="/tags/paas/" style="font-size: 1.19em; color: rgb(154, 73, 35)">PaaS</a><a href="/tags/cloud-native/" style="font-size: 1.45em; color: rgb(142, 196, 123)">Cloud Native</a><a href="/tags/kubernetes/" style="font-size: 1.43em; color: rgb(26, 14, 169)">Kubernetes</a><a href="/tags/devops/" style="font-size: 1.18em; color: rgb(186, 158, 172)">DevOps</a><a href="/tags/infrastructure/" style="font-size: 1.3em; color: rgb(126, 169, 6)">Infrastructure</a><a href="/tags/architecture/" style="font-size: 1.31em; color: rgb(98, 42, 22)">Architecture</a><a href="/tags/iac/" style="font-size: 1.15em; color: rgb(71, 64, 184)">IaC</a><a href="/tags/terraform/" style="font-size: 1.15em; color: rgb(87, 146, 137)">Terraform</a><a href="/tags/crossplane/" style="font-size: 1.15em; color: rgb(168, 200, 19)">Crossplane</a><a href="/tags/pulumi/" style="font-size: 1.15em; color: rgb(182, 61, 17)">Pulumi</a><a href="/tags/argo-cd/" style="font-size: 1.15em; color: rgb(46, 35, 20)">Argo CD</a><a href="/tags/vpc/" style="font-size: 1.15em; color: rgb(184, 62, 148)">VPC</a><a href="/tags/container/" style="font-size: 1.27em; color: rgb(66, 64, 145)">Container</a><a href="/tags/docker/" style="font-size: 1.29em; color: rgb(93, 151, 195)">Docker</a><a href="/tags/cloud-native-foundation/" style="font-size: 1.32em; color: rgb(65, 14, 192)">Cloud Native Foundation</a><a href="/tags/helm/" style="font-size: 1.15em; color: rgb(59, 47, 136)">Helm</a><a href="/tags/runc/" style="font-size: 1.15em; color: rgb(29, 171, 165)">runc</a><a href="/tags/kustomize/" style="font-size: 1.15em; color: rgb(116, 104, 148)">Kustomize</a><a href="/tags/oci/" style="font-size: 1.15em; color: rgb(5, 45, 10)">OCI</a><a href="/tags/buildkit/" style="font-size: 1.15em; color: rgb(118, 22, 109)">BuildKit</a><a href="/tags/crane/" style="font-size: 1.15em; color: rgb(169, 170, 0)">crane</a><a href="/tags/oci-image/" style="font-size: 1.15em; color: rgb(165, 180, 184)">OCI Image</a><a href="/tags/oci-runtime/" style="font-size: 1.15em; color: rgb(139, 10, 114)">OCI Runtime</a><a href="/tags/linux-namespace/" style="font-size: 1.15em; color: rgb(143, 18, 161)">Linux Namespace</a><a href="/tags/linux-cgroup/" style="font-size: 1.15em; color: rgb(69, 190, 86)">Linux CGroup</a><a href="/tags/k8s-manifest/" style="font-size: 1.15em; color: rgb(135, 170, 166)">K8S Manifest</a><a href="/tags/go-core/" style="font-size: 1.17em; color: rgb(109, 99, 173)">Go Core</a><a href="/tags/go/" style="font-size: 1.42em; color: rgb(85, 147, 123)">Go</a><a href="/tags/go-engineering/" style="font-size: 1.33em; color: rgb(38, 63, 9)">Go Engineering</a><a href="/tags/swagger/" style="font-size: 1.15em; color: rgb(93, 44, 67)">Swagger</a><a href="/tags/rpc/" style="font-size: 1.16em; color: rgb(178, 157, 196)">RPC</a><a href="/tags/grpc/" style="font-size: 1.16em; color: rgb(63, 21, 187)">gRPC</a><a href="/tags/ci/" style="font-size: 1.15em; color: rgb(38, 51, 6)">CI</a><a href="/tags/makefile/" style="font-size: 1.15em; color: rgb(153, 86, 197)">Makefile</a><a href="/tags/network/" style="font-size: 1.16em; color: rgb(174, 115, 137)">Network</a><a href="/tags/linux/" style="font-size: 1.28em; color: rgb(37, 65, 143)">Linux</a><a href="/tags/dockerfile/" style="font-size: 1.17em; color: rgb(3, 171, 61)">Dockerfile</a><a href="/tags/service-mesh/" style="font-size: 1.18em; color: rgb(35, 50, 90)">Service Mesh</a><a href="/tags/istio/" style="font-size: 1.17em; color: rgb(29, 5, 130)">Istio</a><a href="/tags/etcd/" style="font-size: 1.15em; color: rgb(176, 183, 91)">etcd</a><a href="/tags/raft/" style="font-size: 1.15em; color: rgb(187, 78, 56)">raft</a><a href="/tags/microservices/" style="font-size: 1.28em; color: rgb(169, 176, 195)">Microservices</a><a href="/tags/spring-cloud/" style="font-size: 1.21em; color: rgb(88, 59, 28)">Spring Cloud</a><a href="/tags/spring/" style="font-size: 1.24em; color: rgb(56, 170, 165)">Spring</a><a href="/tags/java/" style="font-size: 1.44em; color: rgb(159, 180, 90)">Java</a><a href="/tags/service-governance/" style="font-size: 1.17em; color: rgb(16, 135, 34)">Service Governance</a><a href="/tags/opa/" style="font-size: 1.21em; color: rgb(198, 177, 161)">OPA</a><a href="/tags/alibaba/" style="font-size: 1.22em; color: rgb(87, 193, 121)">Alibaba</a><a href="/tags/api-gateway/" style="font-size: 1.15em; color: rgb(163, 24, 174)">API Gateway</a><a href="/tags/apisix/" style="font-size: 1.15em; color: rgb(103, 52, 77)">APISIX</a><a href="/tags/security/" style="font-size: 1.27em; color: rgb(70, 164, 32)">Security</a><a href="/tags/compliance/" style="font-size: 1.17em; color: rgb(25, 9, 17)">Compliance</a><a href="/tags/serverless/" style="font-size: 1.22em; color: rgb(165, 58, 154)">Serverless</a><a href="/tags/faas/" style="font-size: 1.22em; color: rgb(198, 76, 198)">FaaS</a><a href="/tags/computer-basics/" style="font-size: 1.35em; color: rgb(70, 35, 50)">Computer Basics</a><a href="/tags/computer-organization/" style="font-size: 1.35em; color: rgb(144, 139, 46)">Computer Organization</a><a href="/tags/knowledge-map/" style="font-size: 1.15em; color: rgb(74, 91, 108)">Knowledge Map</a><a href="/tags/tool/" style="font-size: 1.23em; color: rgb(160, 66, 171)">Tool</a><a href="/tags/git/" style="font-size: 1.23em; color: rgb(185, 196, 158)">Git</a><a href="/tags/cloud/" style="font-size: 1.36em; color: rgb(180, 55, 13)">Cloud</a><a href="/tags/native/" style="font-size: 1.36em; color: rgb(116, 32, 25)">Native</a><a href="/tags/concurrency/" style="font-size: 1.15em; color: rgb(162, 129, 84)">Concurrency</a><a href="/tags/authentication/" style="font-size: 1.17em; color: rgb(114, 85, 34)">Authentication</a><a href="/tags/ldap/" style="font-size: 1.15em; color: rgb(198, 73, 117)">LDAP</a><a href="/tags/oauth-2-0/" style="font-size: 1.21em; color: rgb(6, 3, 187)">OAuth 2.0</a><a href="/tags/jwt/" style="font-size: 1.15em; color: rgb(184, 176, 37)">JWT</a><a href="/tags/storage/" style="font-size: 1.4em; color: rgb(25, 113, 37)">Storage</a><a href="/tags/mysql/" style="font-size: 1.41em; color: rgb(93, 138, 43)">MySQL</a><a href="/tags/innodb/" style="font-size: 1.2em; color: rgb(74, 45, 156)">InnoDB</a><a href="/tags/java-concurrent/" style="font-size: 1.38em; color: rgb(198, 71, 136)">Java Concurrent</a><a href="/tags/actor/" style="font-size: 1.15em; color: rgb(57, 130, 115)">Actor</a><a href="/tags/akka/" style="font-size: 1.15em; color: rgb(56, 121, 22)">Akka</a><a href="/tags/coroutine/" style="font-size: 1.16em; color: rgb(19, 46, 4)">Coroutine</a><a href="/tags/disruptor/" style="font-size: 1.15em; color: rgb(173, 30, 35)">Disruptor</a><a href="/tags/csp/" style="font-size: 1.15em; color: rgb(113, 178, 28)">CSP</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(177, 158, 55)">Netty</a><a href="/tags/stm/" style="font-size: 1.15em; color: rgb(7, 110, 79)">STM</a><a href="/tags/mvcc/" style="font-size: 1.15em; color: rgb(30, 112, 108)">MVCC</a><a href="/tags/java-core/" style="font-size: 1.21em; color: rgb(88, 131, 4)">Java Core</a><a href="/tags/java-performance/" style="font-size: 1.33em; color: rgb(68, 125, 24)">Java Performance</a><a href="/tags/cas/" style="font-size: 1.15em; color: rgb(106, 164, 184)">CAS</a><a href="/tags/hashtable/" style="font-size: 1.15em; color: rgb(1, 149, 155)">HashTable</a><a href="/tags/concurrenthashmap/" style="font-size: 1.15em; color: rgb(147, 54, 194)">ConcurrentHashMap</a><a href="/tags/concurrentskiplistmap/" style="font-size: 1.15em; color: rgb(170, 4, 166)">ConcurrentSkipListMap</a><a href="/tags/design-pattern/" style="font-size: 1.18em; color: rgb(149, 95, 168)">Design Pattern</a><a href="/tags/consistency/" style="font-size: 1.15em; color: rgb(11, 148, 164)">Consistency</a><a href="/tags/jvm/" style="font-size: 1.37em; color: rgb(2, 200, 17)">JVM</a><a href="/tags/gc/" style="font-size: 1.16em; color: rgb(141, 19, 95)">GC</a><a href="/tags/hashmap/" style="font-size: 1.15em; color: rgb(44, 32, 28)">HashMap</a><a href="/tags/io/" style="font-size: 1.15em; color: rgb(164, 39, 83)">IO</a><a href="/tags/nio/" style="font-size: 1.16em; color: rgb(158, 122, 194)">NIO</a><a href="/tags/aio/" style="font-size: 1.16em; color: rgb(74, 104, 136)">AIO</a><a href="/tags/epoll/" style="font-size: 1.16em; color: rgb(55, 135, 144)">Epoll</a><a href="/tags/jit/" style="font-size: 1.15em; color: rgb(153, 196, 180)">JIT</a><a href="/tags/synchronized/" style="font-size: 1.16em; color: rgb(38, 59, 172)">synchronized</a><a href="/tags/lock/" style="font-size: 1.15em; color: rgb(108, 90, 181)">Lock</a><a href="/tags/reentrantreadwritelock/" style="font-size: 1.15em; color: rgb(71, 126, 115)">ReentrantReadWriteLock</a><a href="/tags/stampedlock/" style="font-size: 1.15em; color: rgb(108, 76, 51)">StampedLock</a><a href="/tags/bio/" style="font-size: 1.15em; color: rgb(191, 138, 59)">BIO</a><a href="/tags/tomcat/" style="font-size: 1.15em; color: rgb(37, 67, 35)">Tomcat</a><a href="/tags/select/" style="font-size: 1.15em; color: rgb(64, 145, 92)">Select</a><a href="/tags/poll/" style="font-size: 1.15em; color: rgb(26, 1, 150)">Poll</a><a href="/tags/zero-copy/" style="font-size: 1.15em; color: rgb(191, 40, 44)">Zero Copy</a><a href="/tags/mmap/" style="font-size: 1.15em; color: rgb(92, 32, 166)">mmap</a><a href="/tags/reactor/" style="font-size: 1.15em; color: rgb(122, 108, 174)">Reactor</a><a href="/tags/java-stream/" style="font-size: 1.15em; color: rgb(156, 4, 140)">Java Stream</a><a href="/tags/mark-word/" style="font-size: 1.15em; color: rgb(50, 70, 151)">Mark Word</a><a href="/tags/monitor/" style="font-size: 1.15em; color: rgb(1, 165, 56)">Monitor</a><a href="/tags/context-switch/" style="font-size: 1.15em; color: rgb(199, 16, 19)">Context Switch</a><a href="/tags/thread-pool/" style="font-size: 1.15em; color: rgb(89, 147, 107)">Thread Pool</a><a href="/tags/lambda/" style="font-size: 1.15em; color: rgb(172, 124, 31)">Lambda</a><a href="/tags/serialization/" style="font-size: 1.15em; color: rgb(36, 134, 93)">Serialization</a><a href="/tags/protobuf/" style="font-size: 1.15em; color: rgb(195, 37, 13)">ProtoBuf</a><a href="/tags/bytecode-manipulation/" style="font-size: 1.17em; color: rgb(68, 114, 174)">Bytecode Manipulation</a><a href="/tags/asm/" style="font-size: 1.15em; color: rgb(159, 31, 126)">ASM</a><a href="/tags/jol/" style="font-size: 1.17em; color: rgb(84, 37, 182)">JOL</a><a href="/tags/middleware/" style="font-size: 1.39em; color: rgb(124, 103, 109)">Middleware</a><a href="/tags/mq/" style="font-size: 1.39em; color: rgb(52, 70, 176)">MQ</a><a href="/tags/kafka/" style="font-size: 1.39em; color: rgb(176, 43, 133)">Kafka</a><a href="/tags/avro/" style="font-size: 1.18em; color: rgb(147, 65, 137)">Avro</a><a href="/tags/stream/" style="font-size: 1.39em; color: rgb(161, 12, 87)">Stream</a><a href="/tags/rebalance/" style="font-size: 1.17em; color: rgb(130, 8, 153)">Rebalance</a><a href="/tags/compression/" style="font-size: 1.15em; color: rgb(73, 199, 143)">Compression</a><a href="/tags/tcp/" style="font-size: 1.16em; color: rgb(121, 47, 55)">TCP</a><a href="/tags/consumer-group/" style="font-size: 1.15em; color: rgb(28, 170, 3)">Consumer Group</a><a href="/tags/producer/" style="font-size: 1.15em; color: rgb(87, 153, 53)">Producer</a><a href="/tags/load-balance/" style="font-size: 1.15em; color: rgb(50, 49, 193)">Load Balance</a><a href="/tags/idempotence/" style="font-size: 1.15em; color: rgb(118, 162, 185)">Idempotence</a><a href="/tags/distributed-architecture/" style="font-size: 1.15em; color: rgb(66, 55, 4)">Distributed Architecture</a><a href="/tags/distributed-design-pattern/" style="font-size: 1.17em; color: rgb(200, 86, 12)">Distributed Design Pattern</a><a href="/tags/career/" style="font-size: 1.15em; color: rgb(85, 11, 89)">Career</a><a href="/tags/linux-performance/" style="font-size: 1.17em; color: rgb(70, 179, 54)">Linux Performance</a><a href="/tags/linux-practice/" style="font-size: 1.25em; color: rgb(84, 114, 198)">Linux Practice</a><a href="/tags/ext4/" style="font-size: 1.15em; color: rgb(78, 190, 142)">ext4</a><a href="/tags/file-system/" style="font-size: 1.15em; color: rgb(10, 188, 144)">File System</a><a href="/tags/ai/" style="font-size: 1.34em; color: rgb(115, 48, 145)">AI</a><a href="/tags/llm/" style="font-size: 1.34em; color: rgb(81, 85, 56)">LLM</a><a href="/tags/nlp/" style="font-size: 1.26em; color: rgb(46, 89, 154)">NLP</a><a href="/tags/python/" style="font-size: 1.25em; color: rgb(16, 96, 175)">Python</a><a href="/tags/fastapi/" style="font-size: 1.15em; color: rgb(189, 152, 178)">FastAPI</a><a href="/tags/uvicorn/" style="font-size: 1.15em; color: rgb(16, 85, 165)">Uvicorn</a><a href="/tags/chatgpt/" style="font-size: 1.15em; color: rgb(10, 82, 97)">ChatGPT</a><a href="/tags/transformer/" style="font-size: 1.16em; color: rgb(180, 61, 90)">Transformer</a><a href="/tags/machine-learning/" style="font-size: 1.17em; color: rgb(106, 161, 15)">Machine Learning</a><a href="/tags/svm/" style="font-size: 1.15em; color: rgb(108, 72, 173)">SVM</a><a href="/tags/rnn/" style="font-size: 1.15em; color: rgb(118, 125, 80)">RNN</a><a href="/tags/seq2seq/" style="font-size: 1.16em; color: rgb(82, 137, 55)">Seq2Seq</a><a href="/tags/attention/" style="font-size: 1.15em; color: rgb(79, 5, 67)">Attention</a><a href="/tags/word2vec/" style="font-size: 1.15em; color: rgb(198, 130, 117)">Word2Vec</a><a href="/tags/langchain/" style="font-size: 1.19em; color: rgb(137, 142, 49)">LangChain</a><a href="/tags/ai-agent/" style="font-size: 1.18em; color: rgb(17, 170, 182)">AI Agent</a><a href="/tags/rag/" style="font-size: 1.3em; color: rgb(145, 24, 106)">RAG</a><a href="/tags/lora/" style="font-size: 1.15em; color: rgb(31, 79, 48)">LoRA</a><a href="/tags/peft/" style="font-size: 1.15em; color: rgb(180, 181, 44)">PEFT</a><a href="/tags/faiss/" style="font-size: 1.15em; color: rgb(97, 133, 27)">Faiss</a><a href="/tags/math/" style="font-size: 1.16em; color: rgb(171, 100, 106)">Math</a><a href="/tags/microservices-governance/" style="font-size: 1.22em; color: rgb(27, 172, 50)">Microservices Governance</a><a href="/tags/config/" style="font-size: 1.17em; color: rgb(136, 61, 118)">Config</a><a href="/tags/configuration-center/" style="font-size: 1.17em; color: rgb(16, 109, 166)">Configuration Center</a><a href="/tags/apollo/" style="font-size: 1.17em; color: rgb(41, 29, 8)">Apollo</a><a href="/tags/oauth2/" style="font-size: 1.2em; color: rgb(114, 134, 169)">Oauth2</a><a href="/tags/spring-security/" style="font-size: 1.19em; color: rgb(108, 172, 143)">Spring Security</a><a href="/tags/spring-security-oauth2/" style="font-size: 1.19em; color: rgb(171, 191, 81)">Spring Security OAuth2</a><a href="/tags/performance-tuning/" style="font-size: 1.15em; color: rgb(62, 117, 183)">Performance Tuning</a><a href="/tags/chatops/" style="font-size: 1.15em; color: rgb(171, 194, 42)">ChatOps</a><a href="/tags/chatbot/" style="font-size: 1.15em; color: rgb(110, 114, 63)">Chatbot</a><a href="/tags/graphrag/" style="font-size: 1.15em; color: rgb(69, 196, 99)">GraphRAG</a><a href="/tags/rerank/" style="font-size: 1.15em; color: rgb(54, 141, 34)">Rerank</a><a href="/tags/kg-rag/" style="font-size: 1.15em; color: rgb(0, 192, 71)">KG-RAG</a><a href="/tags/prompting/" style="font-size: 1.15em; color: rgb(158, 58, 176)">Prompting</a><a href="/tags/vector/" style="font-size: 1.15em; color: rgb(132, 145, 195)">Vector</a><a href="/tags/vim/" style="font-size: 1.2em; color: rgb(44, 56, 29)">Vim</a><a href="/tags/web/" style="font-size: 1.21em; color: rgb(120, 123, 178)">Web</a><a href="/tags/javascript/" style="font-size: 1.19em; color: rgb(25, 33, 196)">JavaScript</a><a href="/tags/zookeeper/" style="font-size: 1.16em; color: rgb(139, 185, 62)">Zookeeper</a><a href="/tags/distributed-lock/" style="font-size: 1.15em; color: rgb(16, 130, 186)">Distributed Lock</a><a href="/tags/zab/" style="font-size: 1.15em; color: rgb(52, 111, 172)">ZAB</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">August 2024</span><span class="card-archive-list-count">29</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">July 2024</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">June 2024</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">May 2023</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">April 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">February 2023</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">January 2023</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">December 2022</span><span class="card-archive-list-count">31</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">568</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2015-06-30T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">1068.4k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-10-31T03:35:01.182Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2024 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Stay hungry, stay foolish."])
  } else {
    document.getElementById("subtitle").innerHTML = 'Stay hungry, stay foolish.'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>