<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Focus on Infrastructure">
<meta property="og:type" content="website">
<meta property="og:title" content="ByteCoding">
<meta property="og:url" content="https://blog.zhongmingmao.top/page/14/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="Focus on Infrastructure">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png">
<meta property="article:author" content="zhongmingmao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/page/14/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ByteCoding',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-10-31 14:23:47'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">569</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">179</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">73</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2022/10/16/13/53/early-morning-7525151_1280.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ByteCoding</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/12/05/cloud-native-foundation-k8s-controller-manager/" title="Kubernetes - Controller Manager"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/kdpv.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Controller Manager"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/12/05/cloud-native-foundation-k8s-controller-manager/" title="Kubernetes - Controller Manager">Kubernetes - Controller Manager</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-12-04T16:06:25.000Z" title="Created 2022-12-05 00:06:25">2022-12-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">工作流程
Informer Framework 和 Lister Framework 可以借助代码生成器生成


Lister 维护了一份 API Server 的缓存数据（减少对 API Server 的访问压力）


Informer 会通过 Indexer 为对象计算一个 Key，然后入队，Worker 会消费队列，并从 Lister 查询缓存数据





核心 Controller
Controller Manager 是 Controller 的集合




Controller
Desc
API



Job Controller
处理 Job



Cronjob Controller
处理 Cronjob



Pod AutoScaler
处理 Pod 的自动扩缩容
HorizontalPodAutoscaler


RelicaSet
依据 RelicaSet Spec 创建 Pod



Service Controller
依据 Service 的 LoadBalancer Type 创建 LB VIP



ServiceAccount Controller
确保 ServiceA ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/12/04/cloud-native-foundation-k8s-scheduler/" title="Kubernetes - Scheduler"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/rebalancing-8_qgh6ro.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Scheduler"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/12/04/cloud-native-foundation-k8s-scheduler/" title="Kubernetes - Scheduler">Kubernetes - Scheduler</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-12-03T16:06:25.000Z" title="Created 2022-12-04 00:06:25">2022-12-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">概述
kube-scheduler 负责分配调度 Pod 到集群内的 Node 上


监听 kube-apiserver，查询还未分配 Node 的 Pod，然后根据调度策略为这些 Pod 分配 Node

123456789$ k get po -n kube-system coredns-7f6cbbb7b8-njp2w -oyamlapiVersion: v1kind: Podmetadata:  ...spec:  ...  nodeName: mac-k8s  ...




阶段




Stage
Desc



predicate
过滤不符合条件的 Node


priority
优先级排序，选择优先级最高的 Node


Predicates
过滤

Strategy


Strategy
Desc



PodFitsHostPorts
检查是否有 Host Ports 冲突


PodFitsPorts
与 PodFitsHostPorts 一致


PodFitsResources
检查 Node 的资源是否充足


HostName
检查候选 Node 与 pod.Spec.Nod ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/12/03/cloud-native-foundation-k8s-apiserver/" title="Kubernetes - API Server"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/Screen-Shot-2022-01-22-at-10.52.54-AM.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - API Server"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/12/03/cloud-native-foundation-k8s-apiserver/" title="Kubernetes - API Server">Kubernetes - API Server</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-12-02T16:06:25.000Z" title="Created 2022-12-03 00:06:25">2022-12-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">概述
API Server


提供集群管理的 REST API
提供其它模块之间数据交互和通信的枢纽
其它模块通过 API Server 查询或者修改数据，只有 API Server 才能直接操作 etcd






访问控制：认证 + 鉴权 + 准入


Mutating Admission 可以修改对象，而 Validating Admission 不可以修改对象



认证
开启 TLS 时，所有请求都需要首先认证
Kubernetes 支持多种认证机制，并支持同时开启多个认证插件（只需要有 1 个认证通过即可）
如果认证成功，进入鉴权模块，如果认证失败，则返回 401


认证插件


X509 证书
在 API Server 启动时配置 --client-ca-file
CN 域（CommonName）用作用户名，而O 域（Organization）则用作 Group 名


静态 Token 文件
在 API Server 启动时配置 --token-auth-file
采用 csv 格式：token,user,uid,[group...]


引导 Token
目的：为了支持平滑地启动引导新 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/12/02/cloud-native-foundation-k8s-etcd/" title="Kubernetes - etcd"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/etcd-5874937.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - etcd"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/12/02/cloud-native-foundation-k8s-etcd/" title="Kubernetes - etcd">Kubernetes - etcd</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-12-01T16:06:25.000Z" title="Created 2022-12-02 00:06:25">2022-12-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">概述
CoreOS 基于 Raft 开发的分布式 KV 存储，可用于服务发现、共享配置和一致性保障（Leader 选举、分布式锁）


A distributed, reliable key-value store for the most critical data of a distributed system




Key
Desc



KV 存储
将数据存储在分层组织的目录中，类似于标准的文件系统


监测变更
监测特定的 Key 或者目录以进行变更，并对值的更改做出反应


简单
curl: HTTP + JSON


安全
TLS 客户端证书认证，有一套完备的授权认证体系，但 Kubernetes 并没有使用


快速
单实例：1000 TPS、2000 QPS


可靠
使用 Raft 算法保证分布式一致性





主要功能


基本的 KV 存储 - Kubernetes 使用最多
监听机制
Key 的过期和续约机制，用于监控和服务发现
原生支持 Compare And Swap 和 Compare And Delete，用于 Leader 选举和分布式锁


KV 存储


KV 存储 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/12/01/cloud-native-foundation-k8s-architectural-principles/" title="Kubernetes - Architectural principles"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/BLOG-Kubernets-1024x536.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Architectural principles"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/12/01/cloud-native-foundation-k8s-architectural-principles/" title="Kubernetes - Architectural principles">Kubernetes - Architectural principles</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-30T16:06:25.000Z" title="Created 2022-12-01 00:06:25">2022-12-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">主要功能



基于容器的应用部署、维护和滚动升级
服务发现和负载均衡
跨机器和跨地区的集群调度
自动伸缩
无状态服务和有状态服务
插件机制保证扩展性

命令式 vs 声明式
YAML


命令式关注：如何做
声明式关注：做什么

核心对象
Kubernetes 的所有管理能力是构建在对象抽象的基础上




对象
描述



Node
计算节点的抽象


Namespace
资源隔离的基本单位


Pod
用来描述应用实例，最为核心的对象


Service
如何将应用发布为服务，本质上是负载均衡和域名服务的声明


核心架构
核心组件
Scheduler关注没有与 Node 绑定的 Pod，完成调度后，会将信息写入 etcd，而 kubelet 会监听到


Master


组件
描述



API Server
API 网关


Cluster Data Store
etcd：分布式 kv 存储，K8S 将所有 API 对象持久存储在 etcd


Controller Manager
处理集群日常任务的控制器：节点控制器、副本控制器等


Scheduler
监控新建的 Pods 并将其分配给 No ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/11/08/cloud-native-foundation-k8s-cgroups/" title="Kubernetes - Cgroups"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/FrbadS8XgAAtfvr.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Cgroups"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/08/cloud-native-foundation-k8s-cgroups/" title="Kubernetes - Cgroups">Kubernetes - Cgroups</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-07T16:06:25.000Z" title="Created 2022-11-08 00:06:25">2022-11-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">Namespace
隔离不完备


在 Linux 内核中，有很多资源和对象是不能被 Namespace 化的，例如时间
如果在容器中使用 settimeofday(2) 的系统调用，整个宿主机的时间都会被修改



Cgroups
在 Linux 中，Cgroups 暴露给用户的操作接口是文件系统

1234567891011121314151617181920$ mount -t cgroupcgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,name=systemd)cgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)cgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpu,cpuacct)cgroup on /sys/fs/cgroup/devices type c ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/11/07/cloud-native-foundation-k8s-wp-v3/" title="Kubernetes - 3rd example"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/1_VpxbX3hVaUuz9jDNjBLUiQ-8148201.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - 3rd example"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/07/cloud-native-foundation-k8s-wp-v3/" title="Kubernetes - 3rd example">Kubernetes - 3rd example</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-06T16:06:25.000Z" title="Created 2022-11-07 00:06:25">2022-11-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">架构


MariaDB
ConfigMap

maria-cm.yaml12345678910apiVersion: v1kind: ConfigMapmetadata:  name: maria-cmdata:  DATABASE: &#x27;db&#x27;  USER: &#x27;wp&#x27;  PASSWORD: &#x27;123&#x27;  ROOT_PASSWORD: &#x27;123&#x27;

12$ k apply -f maria-cm.yamlconfigmap/maria-cm created


StatefulSet

maria-sts.yaml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748apiVersion: apps/v1kind: StatefulSetmetadata:  name: maria-sts  labels:    app: maria-stsspec:  # headless svc  serviceName:  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/11/06/cloud-native-foundation-k8s-cni/" title="Kubernetes - CNI"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/1_XIgjBfIvDNBp80DgTV6SAA.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - CNI"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/06/cloud-native-foundation-k8s-cni/" title="Kubernetes - CNI">Kubernetes - CNI</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-05T16:06:25.000Z" title="Created 2022-11-06 00:06:25">2022-11-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">网络模型
Docker bridge





Docker 会创建一个名为 docker0 的虚拟网桥，默认网段为172.17.0.0/16
每个容器上都会创建一个虚拟网卡对（veth pair）
两个虚拟网卡分别连接容器和虚拟网桥，从而实现容器间的网络互通


Docker 的网络方案只局限在单机环境下工作，Kubernetes 的网络模型：IP-per-pod


IP-per-pod



集群内的每个 Pod 都会有唯一的 IP 地址
Pod 内的所有容器共享这个 IP 地址
集群内的所有 Pod 都属于同一个网段
Pod 可以基于 IP 地址直接访问另一个 Pod，不需要做 NAT

CNI
Container Networking Interface


CNI 定义了一系列通用接口，开发者只需要遵循规范接入 Kubernetes
为 Pod 创建虚拟网卡、分配 IP 地址、设置路由规则，进而实现 Kubernetes 的 IP-per-pod 网络模型


依据实现技术分类，CNI 插件可以分为 3 类
Overlay
构建一个工作在底层网络之上的逻辑网络
把原始的 Pod 网络数据包封包，再 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/11/05/cloud-native-foundation-k8s-monitor/" title="Kubernetes - Monitor"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/Server-Monitoring-using-Prometheus.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Monitor"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/05/cloud-native-foundation-k8s-monitor/" title="Kubernetes - Monitor">Kubernetes - Monitor</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-04T16:06:25.000Z" title="Created 2022-11-05 00:06:25">2022-11-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">Metrics Server
用来收集 Kubernetes 核心资源的指标，定时从所有 Node 的 kubelet 采集信息对集群的整体性能影响极小，性价比很高，每个 Node 大约只会占用 1m vCPU 和 2MB 内存


Metrics Server 调用 kubelet 的 API，获取到 Node 和 Pod 的指标，再将这些信息交给 API Serverkubectl 和 HPA 可以通过 API Server 来读取指标


Metrics Server 早期的数据来源是 cAdvisor，原先是一个独立的应用程序，后来被集成进 kubelet





https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml


--kubelet-insecure-tls

1234567891011121314151617apiVersion: apps/v1kind: Deploymentmetadata:  labels:    k8s-app: metrics-serve ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/11/04/cloud-native-foundation-k8s-quota/" title="Kubernetes -  ResourceQuota"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/k8s-quota.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes -  ResourceQuota"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/04/cloud-native-foundation-k8s-quota/" title="Kubernetes -  ResourceQuota">Kubernetes -  ResourceQuota</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-03T16:06:25.000Z" title="Created 2022-11-04 00:06:25">2022-11-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">Namespace
Namespace 是一个 API 对象，但并不是一个实体对象，只是一个逻辑上的概念

123456$ k create ns test-nsnamespace/test-ns created$ k get ns test-ns -owideNAME      STATUS   AGEtest-ns   Active   8s



nginx-pod-ns.yaml12345678910apiVersion: v1kind: Podmetadata:  name: nginx  namespace: test-nsspec:  containers:  - name: nginx    image: nginx:alpine

123456789101112$ k apply -f nginx-pod-ns.yamlpod/nginx created$ k get po -ntest-ns -owideNAME    READY   STATUS    RESTARTS   AGE   IP            NODE         NOMINATED NODE   READINE ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/13/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/#content-inner">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/#content-inner">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/57/#content-inner">57</a><a class="extend next" rel="next" href="/page/15/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">569</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">179</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">73</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/08/30/python-decorator/" title="Python - Decorator"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://python-1253868755.cos.ap-guangzhou.myqcloud.com/python-decorator.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - Decorator"/></a><div class="content"><a class="title" href="/2024/08/30/python-decorator/" title="Python - Decorator">Python - Decorator</a><time datetime="2024-08-29T16:06:25.000Z" title="Created 2024-08-30 00:06:25">2024-08-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/29/python-parameter-passing/" title="Python - Parameter Passing"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://python-1253868755.cos.ap-guangzhou.myqcloud.com/python-parameter-passing.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - Parameter Passing"/></a><div class="content"><a class="title" href="/2024/08/29/python-parameter-passing/" title="Python - Parameter Passing">Python - Parameter Passing</a><time datetime="2024-08-28T16:06:25.000Z" title="Created 2024-08-29 00:06:25">2024-08-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/28/python-compare-copy/" title="Python - Compare + Copy"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://python-1253868755.cos.ap-guangzhou.myqcloud.com/python-copy.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - Compare + Copy"/></a><div class="content"><a class="title" href="/2024/08/28/python-compare-copy/" title="Python - Compare + Copy">Python - Compare + Copy</a><time datetime="2024-08-27T16:06:25.000Z" title="Created 2024-08-28 00:06:25">2024-08-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/27/python-module/" title="Python - Module"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://python-1253868755.cos.ap-guangzhou.myqcloud.com/python-module.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - Module"/></a><div class="content"><a class="title" href="/2024/08/27/python-module/" title="Python - Module">Python - Module</a><time datetime="2024-08-26T16:06:25.000Z" title="Created 2024-08-27 00:06:25">2024-08-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/26/python-oop/" title="Python - OOP"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://python-1253868755.cos.ap-guangzhou.myqcloud.com/python-oop.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python - OOP"/></a><div class="content"><a class="title" href="/2024/08/26/python-oop/" title="Python - OOP">Python - OOP</a><time datetime="2024-08-25T16:06:25.000Z" title="Created 2024-08-26 00:06:25">2024-08-26</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/"><span class="card-category-list-name">AI</span><span class="card-category-list-count">33</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/llm/"><span class="card-category-list-name">LLM</span><span class="card-category-list-count">16</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/rag/"><span class="card-category-list-name">RAG</span><span class="card-category-list-count">17</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/career/"><span class="card-category-list-name">Career</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/"><span class="card-category-list-name">Cloud Computing</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/iaas/"><span class="card-category-list-name">IaaS</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/paas/"><span class="card-category-list-name">PaaS</span><span class="card-category-list-count">5</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/"><span class="card-category-list-name">Cloud Native</span><span class="card-category-list-count">146</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/cloud-computing/" style="font-size: 1.22em; color: rgb(3, 0, 46)">Cloud Computing</a><a href="/tags/paas/" style="font-size: 1.19em; color: rgb(139, 115, 8)">PaaS</a><a href="/tags/iaas/" style="font-size: 1.19em; color: rgb(80, 92, 43)">IaaS</a><a href="/tags/cloud-native/" style="font-size: 1.45em; color: rgb(16, 51, 43)">Cloud Native</a><a href="/tags/kubernetes/" style="font-size: 1.43em; color: rgb(112, 15, 44)">Kubernetes</a><a href="/tags/devops/" style="font-size: 1.18em; color: rgb(74, 58, 12)">DevOps</a><a href="/tags/go-core/" style="font-size: 1.17em; color: rgb(59, 30, 31)">Go Core</a><a href="/tags/go/" style="font-size: 1.42em; color: rgb(62, 59, 108)">Go</a><a href="/tags/infrastructure/" style="font-size: 1.31em; color: rgb(118, 190, 59)">Infrastructure</a><a href="/tags/architecture/" style="font-size: 1.32em; color: rgb(176, 37, 171)">Architecture</a><a href="/tags/iac/" style="font-size: 1.15em; color: rgb(59, 103, 128)">IaC</a><a href="/tags/terraform/" style="font-size: 1.15em; color: rgb(127, 12, 177)">Terraform</a><a href="/tags/crossplane/" style="font-size: 1.15em; color: rgb(0, 172, 46)">Crossplane</a><a href="/tags/pulumi/" style="font-size: 1.15em; color: rgb(151, 96, 101)">Pulumi</a><a href="/tags/argo-cd/" style="font-size: 1.15em; color: rgb(149, 9, 182)">Argo CD</a><a href="/tags/vpc/" style="font-size: 1.15em; color: rgb(190, 144, 180)">VPC</a><a href="/tags/cloud-native-foundation/" style="font-size: 1.33em; color: rgb(88, 2, 20)">Cloud Native Foundation</a><a href="/tags/container/" style="font-size: 1.27em; color: rgb(165, 95, 28)">Container</a><a href="/tags/docker/" style="font-size: 1.29em; color: rgb(5, 116, 124)">Docker</a><a href="/tags/go-engineering/" style="font-size: 1.34em; color: rgb(120, 47, 103)">Go Engineering</a><a href="/tags/swagger/" style="font-size: 1.15em; color: rgb(53, 90, 148)">Swagger</a><a href="/tags/rpc/" style="font-size: 1.16em; color: rgb(148, 1, 143)">RPC</a><a href="/tags/grpc/" style="font-size: 1.16em; color: rgb(75, 133, 164)">gRPC</a><a href="/tags/helm/" style="font-size: 1.15em; color: rgb(4, 165, 142)">Helm</a><a href="/tags/runc/" style="font-size: 1.15em; color: rgb(66, 141, 163)">runc</a><a href="/tags/kustomize/" style="font-size: 1.15em; color: rgb(200, 158, 155)">Kustomize</a><a href="/tags/oci/" style="font-size: 1.15em; color: rgb(28, 166, 182)">OCI</a><a href="/tags/buildkit/" style="font-size: 1.15em; color: rgb(45, 101, 174)">BuildKit</a><a href="/tags/crane/" style="font-size: 1.15em; color: rgb(197, 110, 52)">crane</a><a href="/tags/oci-image/" style="font-size: 1.15em; color: rgb(60, 176, 86)">OCI Image</a><a href="/tags/oci-runtime/" style="font-size: 1.15em; color: rgb(4, 164, 111)">OCI Runtime</a><a href="/tags/linux-namespace/" style="font-size: 1.15em; color: rgb(169, 17, 4)">Linux Namespace</a><a href="/tags/linux-cgroup/" style="font-size: 1.15em; color: rgb(199, 136, 97)">Linux CGroup</a><a href="/tags/k8s-manifest/" style="font-size: 1.15em; color: rgb(42, 157, 155)">K8S Manifest</a><a href="/tags/ci/" style="font-size: 1.15em; color: rgb(173, 151, 62)">CI</a><a href="/tags/makefile/" style="font-size: 1.15em; color: rgb(0, 173, 172)">Makefile</a><a href="/tags/network/" style="font-size: 1.16em; color: rgb(177, 181, 150)">Network</a><a href="/tags/linux/" style="font-size: 1.28em; color: rgb(197, 101, 54)">Linux</a><a href="/tags/dockerfile/" style="font-size: 1.17em; color: rgb(101, 127, 182)">Dockerfile</a><a href="/tags/service-mesh/" style="font-size: 1.18em; color: rgb(27, 189, 142)">Service Mesh</a><a href="/tags/istio/" style="font-size: 1.17em; color: rgb(143, 200, 55)">Istio</a><a href="/tags/etcd/" style="font-size: 1.15em; color: rgb(129, 127, 105)">etcd</a><a href="/tags/raft/" style="font-size: 1.15em; color: rgb(117, 111, 169)">raft</a><a href="/tags/microservices/" style="font-size: 1.28em; color: rgb(70, 154, 99)">Microservices</a><a href="/tags/spring-cloud/" style="font-size: 1.21em; color: rgb(167, 72, 13)">Spring Cloud</a><a href="/tags/spring/" style="font-size: 1.23em; color: rgb(24, 60, 40)">Spring</a><a href="/tags/java/" style="font-size: 1.44em; color: rgb(111, 162, 4)">Java</a><a href="/tags/service-governance/" style="font-size: 1.17em; color: rgb(178, 150, 37)">Service Governance</a><a href="/tags/opa/" style="font-size: 1.21em; color: rgb(154, 145, 143)">OPA</a><a href="/tags/alibaba/" style="font-size: 1.22em; color: rgb(154, 134, 159)">Alibaba</a><a href="/tags/security/" style="font-size: 1.27em; color: rgb(0, 75, 62)">Security</a><a href="/tags/compliance/" style="font-size: 1.17em; color: rgb(124, 178, 93)">Compliance</a><a href="/tags/serverless/" style="font-size: 1.22em; color: rgb(196, 71, 165)">Serverless</a><a href="/tags/faas/" style="font-size: 1.22em; color: rgb(42, 118, 106)">FaaS</a><a href="/tags/api-gateway/" style="font-size: 1.15em; color: rgb(1, 5, 95)">API Gateway</a><a href="/tags/apisix/" style="font-size: 1.15em; color: rgb(147, 7, 138)">APISIX</a><a href="/tags/computer-basics/" style="font-size: 1.36em; color: rgb(47, 162, 190)">Computer Basics</a><a href="/tags/computer-organization/" style="font-size: 1.36em; color: rgb(10, 0, 142)">Computer Organization</a><a href="/tags/knowledge-map/" style="font-size: 1.15em; color: rgb(131, 133, 41)">Knowledge Map</a><a href="/tags/tool/" style="font-size: 1.22em; color: rgb(93, 159, 56)">Tool</a><a href="/tags/git/" style="font-size: 1.22em; color: rgb(182, 194, 43)">Git</a><a href="/tags/concurrency/" style="font-size: 1.15em; color: rgb(45, 189, 13)">Concurrency</a><a href="/tags/cloud/" style="font-size: 1.37em; color: rgb(164, 112, 112)">Cloud</a><a href="/tags/native/" style="font-size: 1.37em; color: rgb(46, 138, 176)">Native</a><a href="/tags/authentication/" style="font-size: 1.17em; color: rgb(194, 50, 46)">Authentication</a><a href="/tags/jwt/" style="font-size: 1.15em; color: rgb(27, 104, 35)">JWT</a><a href="/tags/oauth-2-0/" style="font-size: 1.21em; color: rgb(49, 177, 74)">OAuth 2.0</a><a href="/tags/ldap/" style="font-size: 1.15em; color: rgb(142, 48, 181)">LDAP</a><a href="/tags/storage/" style="font-size: 1.4em; color: rgb(63, 112, 8)">Storage</a><a href="/tags/mysql/" style="font-size: 1.41em; color: rgb(31, 4, 137)">MySQL</a><a href="/tags/innodb/" style="font-size: 1.2em; color: rgb(59, 159, 25)">InnoDB</a><a href="/tags/java-concurrent/" style="font-size: 1.38em; color: rgb(85, 138, 66)">Java Concurrent</a><a href="/tags/actor/" style="font-size: 1.15em; color: rgb(35, 5, 33)">Actor</a><a href="/tags/akka/" style="font-size: 1.15em; color: rgb(5, 32, 128)">Akka</a><a href="/tags/coroutine/" style="font-size: 1.16em; color: rgb(141, 38, 127)">Coroutine</a><a href="/tags/csp/" style="font-size: 1.15em; color: rgb(43, 84, 95)">CSP</a><a href="/tags/disruptor/" style="font-size: 1.15em; color: rgb(148, 78, 58)">Disruptor</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(180, 152, 147)">Netty</a><a href="/tags/stm/" style="font-size: 1.15em; color: rgb(190, 130, 163)">STM</a><a href="/tags/mvcc/" style="font-size: 1.15em; color: rgb(106, 162, 155)">MVCC</a><a href="/tags/java-core/" style="font-size: 1.21em; color: rgb(135, 40, 33)">Java Core</a><a href="/tags/java-performance/" style="font-size: 1.34em; color: rgb(117, 170, 86)">Java Performance</a><a href="/tags/cas/" style="font-size: 1.15em; color: rgb(77, 177, 115)">CAS</a><a href="/tags/design-pattern/" style="font-size: 1.18em; color: rgb(90, 101, 106)">Design Pattern</a><a href="/tags/hashtable/" style="font-size: 1.15em; color: rgb(16, 145, 177)">HashTable</a><a href="/tags/concurrenthashmap/" style="font-size: 1.15em; color: rgb(81, 128, 33)">ConcurrentHashMap</a><a href="/tags/concurrentskiplistmap/" style="font-size: 1.15em; color: rgb(43, 81, 19)">ConcurrentSkipListMap</a><a href="/tags/consistency/" style="font-size: 1.15em; color: rgb(142, 97, 143)">Consistency</a><a href="/tags/jvm/" style="font-size: 1.38em; color: rgb(84, 187, 39)">JVM</a><a href="/tags/gc/" style="font-size: 1.16em; color: rgb(196, 124, 189)">GC</a><a href="/tags/hashmap/" style="font-size: 1.15em; color: rgb(3, 137, 121)">HashMap</a><a href="/tags/io/" style="font-size: 1.15em; color: rgb(123, 89, 79)">IO</a><a href="/tags/nio/" style="font-size: 1.16em; color: rgb(141, 5, 104)">NIO</a><a href="/tags/aio/" style="font-size: 1.16em; color: rgb(179, 66, 129)">AIO</a><a href="/tags/epoll/" style="font-size: 1.16em; color: rgb(152, 143, 45)">Epoll</a><a href="/tags/jit/" style="font-size: 1.15em; color: rgb(110, 147, 88)">JIT</a><a href="/tags/synchronized/" style="font-size: 1.16em; color: rgb(199, 137, 198)">synchronized</a><a href="/tags/lock/" style="font-size: 1.15em; color: rgb(147, 28, 95)">Lock</a><a href="/tags/reentrantreadwritelock/" style="font-size: 1.15em; color: rgb(106, 188, 147)">ReentrantReadWriteLock</a><a href="/tags/stampedlock/" style="font-size: 1.15em; color: rgb(119, 197, 150)">StampedLock</a><a href="/tags/bio/" style="font-size: 1.15em; color: rgb(4, 17, 176)">BIO</a><a href="/tags/tomcat/" style="font-size: 1.15em; color: rgb(44, 102, 103)">Tomcat</a><a href="/tags/select/" style="font-size: 1.15em; color: rgb(103, 194, 65)">Select</a><a href="/tags/poll/" style="font-size: 1.15em; color: rgb(81, 147, 196)">Poll</a><a href="/tags/zero-copy/" style="font-size: 1.15em; color: rgb(87, 124, 86)">Zero Copy</a><a href="/tags/mmap/" style="font-size: 1.15em; color: rgb(24, 140, 113)">mmap</a><a href="/tags/reactor/" style="font-size: 1.15em; color: rgb(137, 109, 96)">Reactor</a><a href="/tags/serialization/" style="font-size: 1.15em; color: rgb(125, 29, 106)">Serialization</a><a href="/tags/protobuf/" style="font-size: 1.15em; color: rgb(75, 171, 70)">ProtoBuf</a><a href="/tags/java-stream/" style="font-size: 1.15em; color: rgb(37, 9, 146)">Java Stream</a><a href="/tags/mark-word/" style="font-size: 1.15em; color: rgb(198, 152, 175)">Mark Word</a><a href="/tags/monitor/" style="font-size: 1.15em; color: rgb(14, 146, 113)">Monitor</a><a href="/tags/context-switch/" style="font-size: 1.15em; color: rgb(99, 161, 149)">Context Switch</a><a href="/tags/thread-pool/" style="font-size: 1.15em; color: rgb(85, 147, 161)">Thread Pool</a><a href="/tags/lambda/" style="font-size: 1.15em; color: rgb(197, 81, 56)">Lambda</a><a href="/tags/bytecode-manipulation/" style="font-size: 1.17em; color: rgb(76, 183, 145)">Bytecode Manipulation</a><a href="/tags/asm/" style="font-size: 1.15em; color: rgb(150, 121, 38)">ASM</a><a href="/tags/jol/" style="font-size: 1.17em; color: rgb(18, 35, 46)">JOL</a><a href="/tags/middleware/" style="font-size: 1.39em; color: rgb(66, 67, 188)">Middleware</a><a href="/tags/mq/" style="font-size: 1.39em; color: rgb(73, 101, 32)">MQ</a><a href="/tags/kafka/" style="font-size: 1.39em; color: rgb(53, 15, 46)">Kafka</a><a href="/tags/stream/" style="font-size: 1.39em; color: rgb(46, 0, 10)">Stream</a><a href="/tags/rebalance/" style="font-size: 1.17em; color: rgb(133, 42, 109)">Rebalance</a><a href="/tags/avro/" style="font-size: 1.18em; color: rgb(0, 144, 171)">Avro</a><a href="/tags/compression/" style="font-size: 1.15em; color: rgb(18, 123, 53)">Compression</a><a href="/tags/consumer-group/" style="font-size: 1.15em; color: rgb(119, 162, 64)">Consumer Group</a><a href="/tags/tcp/" style="font-size: 1.16em; color: rgb(133, 25, 168)">TCP</a><a href="/tags/idempotence/" style="font-size: 1.15em; color: rgb(163, 174, 88)">Idempotence</a><a href="/tags/producer/" style="font-size: 1.15em; color: rgb(199, 181, 9)">Producer</a><a href="/tags/load-balance/" style="font-size: 1.15em; color: rgb(95, 23, 156)">Load Balance</a><a href="/tags/distributed-architecture/" style="font-size: 1.15em; color: rgb(196, 90, 125)">Distributed Architecture</a><a href="/tags/distributed-design-pattern/" style="font-size: 1.17em; color: rgb(188, 175, 59)">Distributed Design Pattern</a><a href="/tags/career/" style="font-size: 1.15em; color: rgb(134, 154, 117)">Career</a><a href="/tags/linux-performance/" style="font-size: 1.17em; color: rgb(9, 51, 123)">Linux Performance</a><a href="/tags/linux-practice/" style="font-size: 1.24em; color: rgb(124, 163, 170)">Linux Practice</a><a href="/tags/ext4/" style="font-size: 1.15em; color: rgb(155, 92, 152)">ext4</a><a href="/tags/file-system/" style="font-size: 1.15em; color: rgb(5, 111, 100)">File System</a><a href="/tags/ai/" style="font-size: 1.35em; color: rgb(171, 37, 39)">AI</a><a href="/tags/llm/" style="font-size: 1.35em; color: rgb(36, 163, 33)">LLM</a><a href="/tags/nlp/" style="font-size: 1.26em; color: rgb(90, 122, 159)">NLP</a><a href="/tags/python/" style="font-size: 1.25em; color: rgb(113, 73, 144)">Python</a><a href="/tags/fastapi/" style="font-size: 1.15em; color: rgb(114, 105, 26)">FastAPI</a><a href="/tags/uvicorn/" style="font-size: 1.15em; color: rgb(131, 33, 4)">Uvicorn</a><a href="/tags/machine-learning/" style="font-size: 1.17em; color: rgb(27, 163, 33)">Machine Learning</a><a href="/tags/svm/" style="font-size: 1.15em; color: rgb(183, 74, 116)">SVM</a><a href="/tags/rnn/" style="font-size: 1.15em; color: rgb(109, 142, 94)">RNN</a><a href="/tags/chatgpt/" style="font-size: 1.15em; color: rgb(179, 58, 198)">ChatGPT</a><a href="/tags/transformer/" style="font-size: 1.16em; color: rgb(174, 33, 73)">Transformer</a><a href="/tags/attention/" style="font-size: 1.15em; color: rgb(158, 22, 16)">Attention</a><a href="/tags/seq2seq/" style="font-size: 1.16em; color: rgb(148, 196, 130)">Seq2Seq</a><a href="/tags/word2vec/" style="font-size: 1.15em; color: rgb(96, 89, 174)">Word2Vec</a><a href="/tags/langchain/" style="font-size: 1.19em; color: rgb(86, 191, 148)">LangChain</a><a href="/tags/ai-agent/" style="font-size: 1.18em; color: rgb(92, 143, 85)">AI Agent</a><a href="/tags/rag/" style="font-size: 1.3em; color: rgb(81, 49, 26)">RAG</a><a href="/tags/faiss/" style="font-size: 1.15em; color: rgb(182, 168, 161)">Faiss</a><a href="/tags/microservices-governance/" style="font-size: 1.22em; color: rgb(132, 28, 52)">Microservices Governance</a><a href="/tags/config/" style="font-size: 1.17em; color: rgb(45, 150, 164)">Config</a><a href="/tags/configuration-center/" style="font-size: 1.17em; color: rgb(18, 192, 90)">Configuration Center</a><a href="/tags/apollo/" style="font-size: 1.17em; color: rgb(57, 154, 22)">Apollo</a><a href="/tags/math/" style="font-size: 1.16em; color: rgb(56, 191, 138)">Math</a><a href="/tags/oauth2/" style="font-size: 1.2em; color: rgb(0, 150, 144)">Oauth2</a><a href="/tags/spring-security/" style="font-size: 1.19em; color: rgb(188, 149, 185)">Spring Security</a><a href="/tags/spring-security-oauth2/" style="font-size: 1.19em; color: rgb(3, 74, 38)">Spring Security OAuth2</a><a href="/tags/lora/" style="font-size: 1.15em; color: rgb(142, 39, 133)">LoRA</a><a href="/tags/peft/" style="font-size: 1.15em; color: rgb(20, 194, 127)">PEFT</a><a href="/tags/performance-tuning/" style="font-size: 1.15em; color: rgb(28, 10, 138)">Performance Tuning</a><a href="/tags/chatops/" style="font-size: 1.15em; color: rgb(20, 37, 82)">ChatOps</a><a href="/tags/chatbot/" style="font-size: 1.15em; color: rgb(68, 121, 178)">Chatbot</a><a href="/tags/graphrag/" style="font-size: 1.15em; color: rgb(32, 190, 94)">GraphRAG</a><a href="/tags/rerank/" style="font-size: 1.15em; color: rgb(82, 19, 129)">Rerank</a><a href="/tags/kg-rag/" style="font-size: 1.15em; color: rgb(21, 154, 13)">KG-RAG</a><a href="/tags/prompting/" style="font-size: 1.15em; color: rgb(148, 107, 112)">Prompting</a><a href="/tags/vim/" style="font-size: 1.2em; color: rgb(197, 82, 15)">Vim</a><a href="/tags/vector/" style="font-size: 1.15em; color: rgb(137, 160, 167)">Vector</a><a href="/tags/web/" style="font-size: 1.21em; color: rgb(128, 149, 50)">Web</a><a href="/tags/javascript/" style="font-size: 1.19em; color: rgb(6, 34, 117)">JavaScript</a><a href="/tags/zookeeper/" style="font-size: 1.16em; color: rgb(93, 93, 163)">Zookeeper</a><a href="/tags/distributed-lock/" style="font-size: 1.15em; color: rgb(85, 195, 137)">Distributed Lock</a><a href="/tags/zab/" style="font-size: 1.15em; color: rgb(13, 149, 151)">ZAB</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">August 2024</span><span class="card-archive-list-count">30</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">July 2024</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">June 2024</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">May 2023</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">April 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">February 2023</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">January 2023</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">December 2022</span><span class="card-archive-list-count">31</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">569</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2015-06-30T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">1069.5k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-10-31T06:23:44.778Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2024 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Stay hungry, stay foolish."])
  } else {
    document.getElementById("subtitle").innerHTML = 'Stay hungry, stay foolish.'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>