<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Focus on Infrastructure">
<meta property="og:type" content="website">
<meta property="og:title" content="ByteCoding">
<meta property="og:url" content="https://blog.zhongmingmao.top/page/10/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="Focus on Infrastructure">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png">
<meta property="article:author" content="zhongmingmao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/page/10/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ByteCoding',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-06-08 23:58:09'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">513</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">149</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">69</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2022/10/16/13/53/early-morning-7525151_1280.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ByteCoding</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/28/cloud-native-foundation-k8s-ingress/" title="Kubernetes - Ingress"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/617fae2d495f2526b09ce6fd_k8s-ingress-01-100841247-large.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Ingress"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/28/cloud-native-foundation-k8s-ingress/" title="Kubernetes - Ingress">Kubernetes - Ingress</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-27T16:06:25.000Z" title="Created 2022-10-28 00:06:25">2022-10-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">概述Service
Service 本质上是一个由 kube-proxy 控制的四层负载均衡，在 TCP/IP 协议栈转发流量


四层负载均衡，在功能上非常受限，只能依据 IP 地址和端口号做一些简单的判断和组合
Service 适合代理集群内的服务，如果要将服务暴露到集群外部，需要使用 NodePort 或者 LoadBalancer

Ingress
负责七层负载均衡

流量的总入口（南北向）：扇入流量 + 扇出流量

语义：集群内外边界上的入口





Ingress Controller
类比




-
-
-



四层
Service - iptables 规则
kube-proxy


七层
Ingress - HTTP 路由规则
Ingress Controller



Service 本身没有服务能力，只是一些 iptables 规则
真正配置和应用这些 iptables 规则的是 Node 上的 kube-proxy 组件


Ingress 也只是 HTTP 路由规则的集合，相当于是一份静态描述文件
真正使得规则在集群中运行，需要 Ingress Controller，相当于 S ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/27/cloud-native-foundation-k8s-service/" title="Kubernetes - Service"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/58-image-2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Service"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/27/cloud-native-foundation-k8s-service/" title="Kubernetes - Service">Kubernetes - Service</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-26T16:06:25.000Z" title="Created 2022-10-27 00:06:25">2022-10-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">概述
Service 是集群内部的负载均衡机制，用于解决服务发现的关键问题
工作原理
Kubernetes 为 Service 分配一个静态 IP，由 Service 自动管理和维护动态变化的 Pod 集合
当客户端访问 Service 时，Service 会根据某种策略，将流量转发到某个 Pod
Service 使用了 iptables
每个 Node 上的 kube-proxy 自动维护 iptables 规则
负载均衡：Service 会根据 iptables 规则转发请求给它管理的多个 Pod
Service 也可以使用其它技术实现负载均衡
性能更差的 userspace
性能更好的 ipvs










YAML
Service 为 Kubernetes 的核心对象，不关联业务应用

12345678910111213141516171819$ k api-resources --api-group=&quot;&quot;NAME                     SHORTNAMES   APIVERSION   NAMESPACED   KINDbindings          ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/26/cloud-native-foundation-k8s-daemonset/" title="Kubernetes - Daemonset"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/DaemonSets.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Daemonset"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/26/cloud-native-foundation-k8s-daemonset/" title="Kubernetes - Daemonset">Kubernetes - Daemonset</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-25T16:06:25.000Z" title="Created 2022-10-26 00:06:25">2022-10-26</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">YAML
与 Deployment 非常类似，但缺少 replicas，因为 Daemonset 的意图是在每个 Node 上部署一个 Pod

redis-ds.yml123456789101112131415161718192021apiVersion: apps/v1kind: DaemonSetmetadata:  name: redis-ds  labels:    app: redis-dsspec:  selector:    matchLabels:      name: redis-ds  template:    metadata:      labels:        name: redis-ds    spec:      containers:      - name: redis        image: redis:5-alpine        ports:        - containerPort: 6379




使用12345678910$ k apply -f redis-ds.ymldaemonset.apps/redis-ds created$ k get ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/25/cloud-native-foundation-k8s-deployment/" title="Kubernetes - Deployment"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/Kubernetes-Deployments-Rolling-Update-Configuration.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Deployment"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/25/cloud-native-foundation-k8s-deployment/" title="Kubernetes - Deployment">Kubernetes - Deployment</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-24T16:06:25.000Z" title="Created 2022-10-25 00:06:25">2022-10-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">API1234567$ k api-resources --api-group=appsNAME                  SHORTNAMES   APIVERSION   NAMESPACED   KINDcontrollerrevisions                apps/v1      true         ControllerRevisiondaemonsets            ds           apps/v1      true         DaemonSetdeployments           deploy       apps/v1      true         Deploymentreplicasets           rs           apps/v1      true         ReplicaSetstatefulsets          sts          apps/v1      true         StatefulSet



YAML12345678910111213141516171819202 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/24/cloud-native-foundation-k8s-kubeadm/" title="Kubernetes - Kubeadm"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/7f93bb49-1080x675.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Kubeadm"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/24/cloud-native-foundation-k8s-kubeadm/" title="Kubernetes - Kubeadm">Kubernetes - Kubeadm</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-23T16:06:25.000Z" title="Created 2022-10-24 00:06:25">2022-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">架构


准备
修改主机名，Kubernetes 使用主机名来区分集群中的节点，不能重名





hostname
ip



master
mac-master
192.168.191.144


worker
mac-worker
192.168.191.146


123456789101112131415161718192021$ ip a1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00    inet 127.0.0.1/8 scope host lo       valid_lft forever preferred_lft forever    inet6 ::1/128 scope host       valid_lft forever preferred_lft forever2: ens160: &lt;BROADCAST,MUL ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/23/cloud-native-foundation-k8s-wp-v1/" title="Kubernetes - An example"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/1604578891313.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - An example"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/23/cloud-native-foundation-k8s-wp-v1/" title="Kubernetes - An example">Kubernetes - An example</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-22T16:06:25.000Z" title="Created 2022-10-23 00:06:25">2022-10-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">架构


常见 API 对象
ConfigMap 和 Secret 只接受字符串类型


部署
MariaDBmaria-cm.yml12345678910apiVersion: v1kind: ConfigMapmetadata:  name: maria-cmdata:  DATABASE: &#x27;db&#x27;  USER: &#x27;wp&#x27;  PASSWORD: &#x27;123&#x27;  ROOT_PASSWORD: &#x27;123&#x27;


envFrom - 更简洁

maria-pod.yml12345678910111213141516171819apiVersion: v1kind: Podmetadata:  name: maria-pod  labels:    app: wordpress    role: databasespec:  containers:  - name: maria    image: mariadb:10    imagePullPolicy: IfNotPresent    ports:    - containerPo ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/22/cloud-native-foundation-k8s-cm-secret/" title="Kubernetes - ConfigMap + Secret"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/liwxn86e6gpynt9jk6fy.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - ConfigMap + Secret"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/22/cloud-native-foundation-k8s-cm-secret/" title="Kubernetes - ConfigMap + Secret">Kubernetes - ConfigMap + Secret</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-21T16:06:25.000Z" title="Created 2022-10-22 00:06:25">2022-10-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/">Cloud Native Foundation</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/cloud-native-foundation/kubernetes/">Kubernetes</a></span></div><div class="content">定义ConfigMap
明文配置

12345678$ k create cm info --from-literal=name=zhongmingmao --dry-run=client -oyamlapiVersion: v1data:  name: zhongmingmaokind: ConfigMapmetadata:  creationTimestamp: null  name: info


ConfigMap 没有 spec，因为 ConfigMap 存储的是配置数据，并不是容器，因此没有运行时规格




ConfigMap 里的数据都是 Key-Value 结构

cm.yml12345678910apiVersion: v1kind: ConfigMapmetadata:  name: infodata:  name: zhongmingmao  city: guangzhou  greeting: |    hello kubernetes!

123456789101112131415161718192021222324252627282930$ k apply -f cm.ymlco ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/21/cloud-computing-serverless/" title="Cloud Computing - Serverless"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/serverless.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - Serverless"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/21/cloud-computing-serverless/" title="Cloud Computing - Serverless">Cloud Computing - Serverless</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-20T16:06:25.000Z" title="Created 2022-10-21 00:06:25">2022-10-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-computing/">Cloud Computing</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-computing/paas/">PaaS</a></span></div><div class="content">Serverless vs Container
Serverless 是云计算中资源抽象的极致体现：用户专注于业务逻辑，而无需关注基础设施


Container
给予了用户很大的定制空间，按需对应用进行拆分和封装


Serverless
完全屏蔽了计算资源，引导用户不再关注基础设施，只需遵循标准的方式编写业务代码即可
更细的拆分粒度
FaaS：将每一个具有独立功能的函数，作为一个单独的服务进行部署和运行







计费机制
底层没有固化的资源，一般会按照调用次数和调用时长来计费，可以精确到毫秒
从成本上，非常适合那些偶尔触发、短时间运行的工作负载

事件模型
事件模型是 Serverless 的核心编程模型和运行逻辑，非常适合基于事件驱动的开发场景


上游：触发器
Serverless 一般都会提供多种触发器：API 触发器、OSS 触发器、MQ 触发器、定时触发器等


下游
在函数内访问其他云服务（如 RDS、MQ 等外部存储）
Serverless Computing 本身是无状态的，所有持久化需求都需要借助外部存储来实现


架构范式
FaaS + MQ：关注数据流，是数据的传递和流向
当  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/20/cloud-computing-container/" title="Cloud Computing - Container"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/Xoriant-Modern-Container-Orchestration-Platform.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - Container"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/20/cloud-computing-container/" title="Cloud Computing - Container">Cloud Computing - Container</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-19T16:06:25.000Z" title="Created 2022-10-20 00:06:25">2022-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-computing/">Cloud Computing</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-computing/paas/">PaaS</a></span></div><div class="content">历史
相辅相成：云承载着容器的运行，容器生态驱动着云的发展


初期的首要目标：Docker 容器在云上能够顺畅运行
帮助用户创建底层虚拟机集群，免去用户自己手动管理虚拟机的麻烦


随着容器应用的复杂化，容器编排成为了用户最迫切的需求
Kubernetes 赢得了编排框架大战，成为了事实标准





自建 vs 托管
由于云端的多租户特性，云平台会统一提供和托管 Master 节点，降低运维成本
只需要创建 Worker 节点，并为之付费即可


Kubernetes 的抽象设计非常出色，能够支持大量灵活的扩展
云厂商会让尽量多的 IaaS 和 PaaS 功能组件，渗透到 Kubernetes 的体系中
Cloud Service Operator
通过云服务来扩展 Kubernetes 的能力，并反过来使用 Kubernetes 来管理这些云服务
成熟：容器和云一体化架构




多集群
降低了建立 Kubernetes 集群的门槛，如果业务关联较小，可以为不同的业务创建单独的 Kubernetes 集群



全托管
容器服务实例，无需关心底层基础设施


适合场景：只有一个容器镜像，且为无状态，只想 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/19/cloud-computing-cloud-database/" title="Cloud Computing - Cloud database"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/Cloud-Database-vs-Traditional-Database.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cloud Computing - Cloud database"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/19/cloud-computing-cloud-database/" title="Cloud Computing - Cloud database">Cloud Computing - Cloud database</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-10-18T16:06:25.000Z" title="Created 2022-10-19 00:06:25">2022-10-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-computing/">Cloud Computing</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-computing/paas/">PaaS</a></span></div><div class="content">RDS
Relational Database Service


一般针对每个数据库引擎，都会有对应的服务：RDS for MySQL、RDS for PostgreSQL
同一个数据库按照不同的版本，会有比较严格的分支选项，在创建时指定




RDS vs 传统关系型数据库


编程接口 + 使用体验：几乎完全一致
云厂商会把功能、内部机制完整地保留下来，获得最大程度的兼容性


运维（开箱即用）：智能化 + 自动化
读写分离
自动调优：自动发现性能热点，智能给出调整建议



云原生数据库
完全为云设计、充分发挥云的特点和优势


出于生态发展和降低学习难度的需要，绝大多数的云原生数据库仍然保留了 SQL 接口
不同领域的云原生数据库：关系型、键值型、文档型、图数据库、分析型
优势
更强的可扩展性
计算：可以利用云快速进行水平扩展
存储：基于原生设计的计算存储分离架构，可以支撑更大规模的数据量


更高的可用性和可靠性
原生机制：默认多副本高可用
基于原生数据同步机制的底层设计，可以方便地支持跨区域的实例复制（增强冗余 + 就近服务用户）


支持多种数据模型
兼容关系型数据库后，针对不同场景，推出不 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/9/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/#content-inner">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/#content-inner">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/52/#content-inner">52</a><a class="extend next" rel="next" href="/page/11/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">513</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">149</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">69</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/05/01/cloud-native-foundation-go-engineering-elegant-project/" title="Go Engineering - Elegant Project"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-elegant-project.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Engineering - Elegant Project"/></a><div class="content"><a class="title" href="/2023/05/01/cloud-native-foundation-go-engineering-elegant-project/" title="Go Engineering - Elegant Project">Go Engineering - Elegant Project</a><time datetime="2023-04-30T16:06:25.000Z" title="Created 2023-05-01 00:06:25">2023-05-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/01/go-concurrency-mutex-basic/" title="Go Concurrency - Mutex Basic"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/go-mutex.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Concurrency - Mutex Basic"/></a><div class="content"><a class="title" href="/2023/04/01/go-concurrency-mutex-basic/" title="Go Concurrency - Mutex Basic">Go Concurrency - Mutex Basic</a><time datetime="2023-03-31T16:06:25.000Z" title="Created 2023-04-01 00:06:25">2023-04-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/15/cloud-native-serverless-faas-workflow/" title="FaaS - Workflow"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://serverless-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/faas-workflow.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FaaS - Workflow"/></a><div class="content"><a class="title" href="/2023/02/15/cloud-native-serverless-faas-workflow/" title="FaaS - Workflow">FaaS - Workflow</a><time datetime="2023-02-14T16:06:25.000Z" title="Created 2023-02-15 00:06:25">2023-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/14/cloud-native-serverless-faas-web-ide/" title="FaaS - WebIDE"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://serverless-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/webide.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FaaS - WebIDE"/></a><div class="content"><a class="title" href="/2023/02/14/cloud-native-serverless-faas-web-ide/" title="FaaS - WebIDE">FaaS - WebIDE</a><time datetime="2023-02-13T16:06:25.000Z" title="Created 2023-02-14 00:06:25">2023-02-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/13/cloud-native-serverless-faas-function-invoke/" title="FaaS - Function Invoke"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://serverless-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/faas-function-invoke.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FaaS - Function Invoke"/></a><div class="content"><a class="title" href="/2023/02/13/cloud-native-serverless-faas-function-invoke/" title="FaaS - Function Invoke">FaaS - Function Invoke</a><time datetime="2023-02-12T16:06:25.000Z" title="Created 2023-02-13 00:06:25">2023-02-13</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/career/"><span class="card-category-list-name">Career</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/"><span class="card-category-list-name">Cloud Computing</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/iaas/"><span class="card-category-list-name">IaaS</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/paas/"><span class="card-category-list-name">PaaS</span><span class="card-category-list-count">5</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/"><span class="card-category-list-name">Cloud Native</span><span class="card-category-list-count">136</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/api-gateway/"><span class="card-category-list-name">API Gateway</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/"><span class="card-category-list-name">Cloud Native Foundation</span><span class="card-category-list-count">97</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/"><span class="card-category-list-name">Container</span><span class="card-category-list-count">2</span></a></li></ul></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/cloud-computing/" style="font-size: 1.23em; color: rgb(5, 146, 29)">Cloud Computing</a><a href="/tags/iaas/" style="font-size: 1.19em; color: rgb(22, 56, 156)">IaaS</a><a href="/tags/paas/" style="font-size: 1.19em; color: rgb(81, 16, 110)">PaaS</a><a href="/tags/cloud-native/" style="font-size: 1.45em; color: rgb(47, 116, 78)">Cloud Native</a><a href="/tags/kubernetes/" style="font-size: 1.43em; color: rgb(88, 23, 44)">Kubernetes</a><a href="/tags/devops/" style="font-size: 1.18em; color: rgb(98, 117, 12)">DevOps</a><a href="/tags/helm/" style="font-size: 1.15em; color: rgb(55, 154, 26)">Helm</a><a href="/tags/docker/" style="font-size: 1.28em; color: rgb(104, 88, 98)">Docker</a><a href="/tags/runc/" style="font-size: 1.15em; color: rgb(146, 191, 58)">runc</a><a href="/tags/kustomize/" style="font-size: 1.15em; color: rgb(61, 157, 68)">Kustomize</a><a href="/tags/oci/" style="font-size: 1.15em; color: rgb(48, 88, 51)">OCI</a><a href="/tags/buildkit/" style="font-size: 1.15em; color: rgb(122, 91, 19)">BuildKit</a><a href="/tags/crane/" style="font-size: 1.15em; color: rgb(51, 9, 32)">crane</a><a href="/tags/oci-image/" style="font-size: 1.15em; color: rgb(26, 23, 14)">OCI Image</a><a href="/tags/oci-runtime/" style="font-size: 1.15em; color: rgb(173, 52, 88)">OCI Runtime</a><a href="/tags/linux-namespace/" style="font-size: 1.15em; color: rgb(25, 122, 160)">Linux Namespace</a><a href="/tags/linux-cgroup/" style="font-size: 1.15em; color: rgb(182, 143, 47)">Linux CGroup</a><a href="/tags/k8s-manifest/" style="font-size: 1.15em; color: rgb(122, 92, 164)">K8S Manifest</a><a href="/tags/infrastructure/" style="font-size: 1.31em; color: rgb(108, 186, 103)">Infrastructure</a><a href="/tags/architecture/" style="font-size: 1.32em; color: rgb(162, 25, 17)">Architecture</a><a href="/tags/iac/" style="font-size: 1.15em; color: rgb(146, 192, 187)">IaC</a><a href="/tags/terraform/" style="font-size: 1.15em; color: rgb(49, 160, 52)">Terraform</a><a href="/tags/crossplane/" style="font-size: 1.15em; color: rgb(118, 124, 121)">Crossplane</a><a href="/tags/pulumi/" style="font-size: 1.15em; color: rgb(153, 175, 142)">Pulumi</a><a href="/tags/argo-cd/" style="font-size: 1.15em; color: rgb(173, 194, 34)">Argo CD</a><a href="/tags/vpc/" style="font-size: 1.15em; color: rgb(165, 84, 63)">VPC</a><a href="/tags/container/" style="font-size: 1.26em; color: rgb(42, 187, 139)">Container</a><a href="/tags/go-core/" style="font-size: 1.17em; color: rgb(174, 148, 135)">Go Core</a><a href="/tags/go/" style="font-size: 1.42em; color: rgb(181, 188, 170)">Go</a><a href="/tags/go-engineering/" style="font-size: 1.29em; color: rgb(158, 89, 123)">Go Engineering</a><a href="/tags/cloud-native-foundation/" style="font-size: 1.33em; color: rgb(189, 57, 56)">Cloud Native Foundation</a><a href="/tags/rpc/" style="font-size: 1.16em; color: rgb(24, 157, 144)">RPC</a><a href="/tags/grpc/" style="font-size: 1.15em; color: rgb(196, 61, 28)">gRPC</a><a href="/tags/network/" style="font-size: 1.16em; color: rgb(54, 100, 91)">Network</a><a href="/tags/linux/" style="font-size: 1.27em; color: rgb(111, 38, 13)">Linux</a><a href="/tags/dockerfile/" style="font-size: 1.17em; color: rgb(75, 182, 60)">Dockerfile</a><a href="/tags/service-mesh/" style="font-size: 1.18em; color: rgb(131, 119, 192)">Service Mesh</a><a href="/tags/etcd/" style="font-size: 1.15em; color: rgb(146, 106, 181)">etcd</a><a href="/tags/raft/" style="font-size: 1.15em; color: rgb(85, 173, 48)">raft</a><a href="/tags/istio/" style="font-size: 1.17em; color: rgb(30, 108, 196)">Istio</a><a href="/tags/microservices/" style="font-size: 1.27em; color: rgb(34, 160, 126)">Microservices</a><a href="/tags/spring-cloud/" style="font-size: 1.21em; color: rgb(136, 111, 48)">Spring Cloud</a><a href="/tags/spring/" style="font-size: 1.24em; color: rgb(139, 14, 89)">Spring</a><a href="/tags/java/" style="font-size: 1.44em; color: rgb(44, 33, 71)">Java</a><a href="/tags/service-governance/" style="font-size: 1.17em; color: rgb(36, 82, 199)">Service Governance</a><a href="/tags/opa/" style="font-size: 1.21em; color: rgb(22, 128, 112)">OPA</a><a href="/tags/alibaba/" style="font-size: 1.22em; color: rgb(29, 60, 172)">Alibaba</a><a href="/tags/security/" style="font-size: 1.26em; color: rgb(162, 141, 22)">Security</a><a href="/tags/compliance/" style="font-size: 1.17em; color: rgb(86, 130, 140)">Compliance</a><a href="/tags/api-gateway/" style="font-size: 1.15em; color: rgb(191, 81, 118)">API Gateway</a><a href="/tags/apisix/" style="font-size: 1.15em; color: rgb(196, 21, 163)">APISIX</a><a href="/tags/serverless/" style="font-size: 1.22em; color: rgb(175, 174, 66)">Serverless</a><a href="/tags/faas/" style="font-size: 1.22em; color: rgb(37, 161, 41)">FaaS</a><a href="/tags/computer-basics/" style="font-size: 1.35em; color: rgb(174, 53, 102)">Computer Basics</a><a href="/tags/computer-organization/" style="font-size: 1.35em; color: rgb(39, 22, 35)">Computer Organization</a><a href="/tags/knowledge-map/" style="font-size: 1.15em; color: rgb(149, 96, 13)">Knowledge Map</a><a href="/tags/tool/" style="font-size: 1.23em; color: rgb(72, 68, 141)">Tool</a><a href="/tags/git/" style="font-size: 1.23em; color: rgb(31, 130, 90)">Git</a><a href="/tags/concurrency/" style="font-size: 1.15em; color: rgb(8, 170, 45)">Concurrency</a><a href="/tags/cloud/" style="font-size: 1.36em; color: rgb(30, 196, 84)">Cloud</a><a href="/tags/native/" style="font-size: 1.36em; color: rgb(107, 160, 34)">Native</a><a href="/tags/authentication/" style="font-size: 1.17em; color: rgb(107, 117, 169)">Authentication</a><a href="/tags/ldap/" style="font-size: 1.15em; color: rgb(29, 119, 125)">LDAP</a><a href="/tags/jwt/" style="font-size: 1.15em; color: rgb(48, 73, 56)">JWT</a><a href="/tags/oauth-2-0/" style="font-size: 1.21em; color: rgb(67, 57, 87)">OAuth 2.0</a><a href="/tags/storage/" style="font-size: 1.4em; color: rgb(36, 91, 103)">Storage</a><a href="/tags/mysql/" style="font-size: 1.41em; color: rgb(182, 97, 197)">MySQL</a><a href="/tags/innodb/" style="font-size: 1.2em; color: rgb(92, 9, 122)">InnoDB</a><a href="/tags/java-concurrent/" style="font-size: 1.38em; color: rgb(181, 162, 123)">Java Concurrent</a><a href="/tags/actor/" style="font-size: 1.15em; color: rgb(189, 123, 136)">Actor</a><a href="/tags/akka/" style="font-size: 1.15em; color: rgb(62, 185, 11)">Akka</a><a href="/tags/coroutine/" style="font-size: 1.16em; color: rgb(141, 16, 123)">Coroutine</a><a href="/tags/csp/" style="font-size: 1.15em; color: rgb(53, 69, 94)">CSP</a><a href="/tags/disruptor/" style="font-size: 1.15em; color: rgb(66, 114, 31)">Disruptor</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(156, 47, 160)">Netty</a><a href="/tags/stm/" style="font-size: 1.15em; color: rgb(176, 34, 31)">STM</a><a href="/tags/mvcc/" style="font-size: 1.15em; color: rgb(62, 22, 110)">MVCC</a><a href="/tags/java-core/" style="font-size: 1.21em; color: rgb(198, 47, 174)">Java Core</a><a href="/tags/java-performance/" style="font-size: 1.34em; color: rgb(83, 17, 100)">Java Performance</a><a href="/tags/hashtable/" style="font-size: 1.15em; color: rgb(58, 185, 143)">HashTable</a><a href="/tags/concurrenthashmap/" style="font-size: 1.15em; color: rgb(199, 112, 41)">ConcurrentHashMap</a><a href="/tags/concurrentskiplistmap/" style="font-size: 1.15em; color: rgb(28, 176, 28)">ConcurrentSkipListMap</a><a href="/tags/cas/" style="font-size: 1.15em; color: rgb(35, 176, 174)">CAS</a><a href="/tags/consistency/" style="font-size: 1.15em; color: rgb(192, 138, 174)">Consistency</a><a href="/tags/design-pattern/" style="font-size: 1.18em; color: rgb(39, 183, 35)">Design Pattern</a><a href="/tags/hashmap/" style="font-size: 1.15em; color: rgb(85, 64, 180)">HashMap</a><a href="/tags/jvm/" style="font-size: 1.37em; color: rgb(111, 148, 78)">JVM</a><a href="/tags/gc/" style="font-size: 1.16em; color: rgb(33, 62, 173)">GC</a><a href="/tags/io/" style="font-size: 1.15em; color: rgb(109, 160, 83)">IO</a><a href="/tags/nio/" style="font-size: 1.16em; color: rgb(151, 15, 37)">NIO</a><a href="/tags/aio/" style="font-size: 1.16em; color: rgb(135, 169, 140)">AIO</a><a href="/tags/epoll/" style="font-size: 1.16em; color: rgb(138, 41, 98)">Epoll</a><a href="/tags/jit/" style="font-size: 1.15em; color: rgb(10, 20, 153)">JIT</a><a href="/tags/synchronized/" style="font-size: 1.16em; color: rgb(12, 198, 198)">synchronized</a><a href="/tags/lock/" style="font-size: 1.15em; color: rgb(109, 68, 81)">Lock</a><a href="/tags/reentrantreadwritelock/" style="font-size: 1.15em; color: rgb(171, 152, 44)">ReentrantReadWriteLock</a><a href="/tags/stampedlock/" style="font-size: 1.15em; color: rgb(94, 27, 167)">StampedLock</a><a href="/tags/bio/" style="font-size: 1.15em; color: rgb(52, 111, 64)">BIO</a><a href="/tags/tomcat/" style="font-size: 1.15em; color: rgb(174, 99, 84)">Tomcat</a><a href="/tags/select/" style="font-size: 1.15em; color: rgb(147, 105, 114)">Select</a><a href="/tags/poll/" style="font-size: 1.15em; color: rgb(149, 17, 194)">Poll</a><a href="/tags/zero-copy/" style="font-size: 1.15em; color: rgb(40, 37, 26)">Zero Copy</a><a href="/tags/mmap/" style="font-size: 1.15em; color: rgb(114, 103, 83)">mmap</a><a href="/tags/reactor/" style="font-size: 1.15em; color: rgb(11, 135, 47)">Reactor</a><a href="/tags/serialization/" style="font-size: 1.15em; color: rgb(10, 77, 60)">Serialization</a><a href="/tags/protobuf/" style="font-size: 1.15em; color: rgb(162, 171, 0)">ProtoBuf</a><a href="/tags/java-stream/" style="font-size: 1.15em; color: rgb(104, 105, 172)">Java Stream</a><a href="/tags/mark-word/" style="font-size: 1.15em; color: rgb(186, 89, 51)">Mark Word</a><a href="/tags/monitor/" style="font-size: 1.15em; color: rgb(12, 176, 168)">Monitor</a><a href="/tags/context-switch/" style="font-size: 1.15em; color: rgb(153, 109, 192)">Context Switch</a><a href="/tags/thread-pool/" style="font-size: 1.15em; color: rgb(176, 175, 142)">Thread Pool</a><a href="/tags/lambda/" style="font-size: 1.15em; color: rgb(102, 174, 161)">Lambda</a><a href="/tags/bytecode-manipulation/" style="font-size: 1.17em; color: rgb(63, 179, 10)">Bytecode Manipulation</a><a href="/tags/asm/" style="font-size: 1.15em; color: rgb(161, 50, 119)">ASM</a><a href="/tags/jol/" style="font-size: 1.17em; color: rgb(27, 180, 180)">JOL</a><a href="/tags/middleware/" style="font-size: 1.39em; color: rgb(199, 11, 61)">Middleware</a><a href="/tags/mq/" style="font-size: 1.39em; color: rgb(1, 3, 61)">MQ</a><a href="/tags/kafka/" style="font-size: 1.39em; color: rgb(121, 168, 109)">Kafka</a><a href="/tags/stream/" style="font-size: 1.39em; color: rgb(154, 78, 121)">Stream</a><a href="/tags/rebalance/" style="font-size: 1.17em; color: rgb(18, 115, 9)">Rebalance</a><a href="/tags/avro/" style="font-size: 1.18em; color: rgb(164, 150, 123)">Avro</a><a href="/tags/compression/" style="font-size: 1.15em; color: rgb(50, 172, 16)">Compression</a><a href="/tags/consumer-group/" style="font-size: 1.15em; color: rgb(0, 79, 82)">Consumer Group</a><a href="/tags/tcp/" style="font-size: 1.16em; color: rgb(107, 24, 151)">TCP</a><a href="/tags/idempotence/" style="font-size: 1.15em; color: rgb(170, 193, 138)">Idempotence</a><a href="/tags/producer/" style="font-size: 1.15em; color: rgb(189, 14, 194)">Producer</a><a href="/tags/load-balance/" style="font-size: 1.15em; color: rgb(142, 155, 132)">Load Balance</a><a href="/tags/distributed-design-pattern/" style="font-size: 1.17em; color: rgb(134, 165, 17)">Distributed Design Pattern</a><a href="/tags/distributed-architecture/" style="font-size: 1.15em; color: rgb(155, 66, 178)">Distributed Architecture</a><a href="/tags/career/" style="font-size: 1.15em; color: rgb(190, 37, 92)">Career</a><a href="/tags/linux-performance/" style="font-size: 1.17em; color: rgb(45, 66, 104)">Linux Performance</a><a href="/tags/linux-practice/" style="font-size: 1.25em; color: rgb(1, 185, 66)">Linux Practice</a><a href="/tags/ext4/" style="font-size: 1.15em; color: rgb(67, 157, 13)">ext4</a><a href="/tags/file-system/" style="font-size: 1.15em; color: rgb(156, 95, 88)">File System</a><a href="/tags/math/" style="font-size: 1.16em; color: rgb(36, 54, 162)">Math</a><a href="/tags/microservices-governance/" style="font-size: 1.22em; color: rgb(61, 157, 8)">Microservices Governance</a><a href="/tags/config/" style="font-size: 1.17em; color: rgb(193, 183, 159)">Config</a><a href="/tags/configuration-center/" style="font-size: 1.17em; color: rgb(20, 91, 140)">Configuration Center</a><a href="/tags/apollo/" style="font-size: 1.17em; color: rgb(174, 48, 115)">Apollo</a><a href="/tags/oauth2/" style="font-size: 1.2em; color: rgb(58, 119, 96)">Oauth2</a><a href="/tags/spring-security/" style="font-size: 1.19em; color: rgb(138, 49, 39)">Spring Security</a><a href="/tags/spring-security-oauth2/" style="font-size: 1.19em; color: rgb(145, 188, 82)">Spring Security OAuth2</a><a href="/tags/vim/" style="font-size: 1.2em; color: rgb(163, 142, 154)">Vim</a><a href="/tags/performance-tuning/" style="font-size: 1.15em; color: rgb(71, 28, 93)">Performance Tuning</a><a href="/tags/web/" style="font-size: 1.21em; color: rgb(4, 156, 31)">Web</a><a href="/tags/javascript/" style="font-size: 1.19em; color: rgb(108, 111, 13)">JavaScript</a><a href="/tags/zookeeper/" style="font-size: 1.16em; color: rgb(140, 137, 130)">Zookeeper</a><a href="/tags/distributed-lock/" style="font-size: 1.15em; color: rgb(143, 10, 174)">Distributed Lock</a><a href="/tags/zab/" style="font-size: 1.15em; color: rgb(130, 85, 92)">ZAB</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">May 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">April 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">February 2023</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">January 2023</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">December 2022</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">November 2022</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">October 2022</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">September 2022</span><span class="card-archive-list-count">15</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">513</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2015-06-30T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">951.6k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-06-08T15:58:07.992Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2024 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Stay hungry, stay foolish."])
  } else {
    document.getElementById("subtitle").innerHTML = 'Stay hungry, stay foolish.'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>