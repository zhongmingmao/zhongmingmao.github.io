<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Focus on Infrastructure">
<meta property="og:type" content="website">
<meta property="og:title" content="ByteCoding">
<meta property="og:url" content="https://blog.zhongmingmao.top/page/42/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="Focus on Infrastructure">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png">
<meta property="article:author" content="zhongmingmao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/page/42/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ByteCoding',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-12-13 01:22:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">488</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">125</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">65</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2022/10/16/13/53/early-morning-7525151_1280.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ByteCoding</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2019/01/29/mysql-index-unique-common/" title="MySQL -- 普通索引与唯一索引"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-14.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL -- 普通索引与唯一索引"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/29/mysql-index-unique-common/" title="MySQL -- 普通索引与唯一索引">MySQL -- 普通索引与唯一索引</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-29T02:15:49.000Z" title="Created 2019-01-29 10:15:49">2019-01-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/storage/">Storage</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/storage/mysql/">MySQL</a></span></div><div class="content">场景
维护一个市民系统，有一个字段为身份证号
业务代码能保证不会写入两个重复的身份证号（如果业务无法保证，可以依赖数据库的唯一索引来进行约束）
常用SQL查询语句：SELECT name FROM CUser WHERE id_card = &#39;XXX&#39;
建立索引
身份证号比较大，不建议设置为主键
从性能角度出发，选择普通索引还是唯一索引？





假设字段k上的值都不重复
查询过程
查询语句：SELECT id FROM T WHERE k=5
查询过程
通过B+树从树根开始，按层搜索到叶子节点，即上图中右下角的数据页
在数据页内部通过二分法来定位具体的记录


针对普通索引
查找满足条件的第一个记录(5,500)，然后查找下一个记录，直到找到第一个不满足k=5的记录


针对唯一索引
由于索引定义了唯一性，查找到第一个满足条件的记录后，就会停止继续查找



性能差异
性能差异：微乎其微
InnoDB的数据是按照数据页为单位进行读写的，默认为16KB
当需要读取一条记录时，并不是将这个记录本身从磁盘读出来，而是以数据页为单位进行读取的
当找到k&#x3D;5的记录时，它所在的数据页都已经在 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/01/28/mysql-transaction-isolation-rr-rc/" title="MySQL -- RR隔离与RC隔离"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL -- RR隔离与RC隔离"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/28/mysql-transaction-isolation-rr-rc/" title="MySQL -- RR隔离与RC隔离">MySQL -- RR隔离与RC隔离</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-28T01:35:04.000Z" title="Created 2019-01-28 09:35:04">2019-01-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/storage/">Storage</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/storage/mysql/">MySQL</a></span></div><div class="content">视图
虚拟表 – 本文不关心
在调用的时候执行查询语句并生成执行结果
SQL语句：CREATE VIEW


InnoDB在实现MVCC时用到的一致性读视图（consistent read view）
用于支持RC和RR隔离级别的实现
没有对应的物理结构
主要作用：在事务执行期间，事务能看到怎样的数据





快照
在RR隔离级别下，事务在启动的时候保存了一个快照，快照是基于整库的
在InnoDB，每个事务都有一个唯一的事务ID（transaction id）
在事务开始的时候向InnoDB的事务系统申请的，按申请的顺序严格递增


每行数据都有多个版本，每次事务更新数据的时候，都会生成一个新的数据版本
事务会把自己的transaction id赋值给这个数据版本的事务ID，记为row trx_id
每个数据版本都有对应的row trx_id


同时也要逻辑保留旧的数据版本，通过新的数据版本和undolog可以计算出旧的数据版本



多版本


虚线框是同一行记录的4个版本
当前最新版本为V4，k&#x3D;22，是被transaction id为25的事务所更新的，因此它的row trx_id为25
 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/01/25/mysql-lock/" title="MySQL -- 锁"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-16.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL -- 锁"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/25/mysql-lock/" title="MySQL -- 锁">MySQL -- 锁</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-25T10:43:15.000Z" title="Created 2019-01-25 18:43:15">2019-01-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/storage/">Storage</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/storage/mysql/">MySQL</a></span></div><div class="content">全局锁
全局锁：对整个数据库实例加锁
加全局读锁：FLUSH TABLES WITH READ LOCK，阻塞其他线程的下列语句
数据更新语句（增删改）
数据定义语句（建表、修改表结构）
更新类事务的提交语句


主动解锁：UNLOCK TABLES
典型使用场景：全库逻辑备份
把整库每个表都SELECT出来，然后存成文本


缺点
如果在主库上执行逻辑备份，备份期间不能执行更新操作，导致业务停摆
如果在备库上执行逻辑备份，备份期间从库不能执行由主库同步过来的binlog，导致主从延时


备份加全局锁的必要性
保证全局视图是逻辑一致的





mysqldump
--single-transaction
导数据之前启动一个事务，确保拿到_一致性视图_
由于MVCC的支持，在这个过程中是可以正常更新数据的


需要存储引擎支持_RR的事务隔离级别_
MyISAM不支持事务，如果备份过程中有更新，总是能取到最新的数据，破坏了备份的一致性
因此MyISAM只能依赖于FLUSH TABLES WITH READ LOCK，不能使用--single-transaction


针对全库逻辑备份的场景，--singl ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/01/21/mysql-index/" title="MySQL -- 索引"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL -- 索引"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/21/mysql-index/" title="MySQL -- 索引">MySQL -- 索引</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-21T15:52:16.000Z" title="Created 2019-01-21 23:52:16">2019-01-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/storage/">Storage</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/storage/mysql/">MySQL</a></span></div><div class="content">索引模型哈希表实现上类似于java.util.HashMap，哈希表适合只有等值查询的场景


有序数组有序数组只适用于静态存储引擎（针对不会再修改的数据）
查找
等值查询：可以采用二分法，时间复杂度为O(log(N))
范围查询：查找[ID_card_X,ID_card_Y]
首先通过二分法找到第一个大于等于ID_card_X的记录
然后向右遍历，直到找到第一个大于ID_card_Y的记录



更新在中间插入或删除一个纪录就得挪动后面的所有的记录
搜索树平衡二叉树查询的时间复杂度：O(log(N))，更新的时间复杂度：O(log(N))（维持树的平衡）
N叉树
大多数的数据库存储并没有采用二叉树，原因：索引不仅仅存在于内存中，还要写到磁盘上
对于有100W节点的平衡二叉树，树高为20，即一次查询可能需要访问20个数据块
假设HDD，随机读取一个数据块需要10ms左右的寻址时间
即一次查询可能需要200ms – 慢成狗


为了让一个查询尽量少的读取磁盘，就必须让查询过程访问尽量少的数据块，因此采用N叉树
N的大小取决于数据页的大小和索引大小
在InnoDB中，以INT（4 Bytes）字段为索引，假设页大 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/01/16/mysql-transaction-isolation/" title="MySQL -- 事务隔离"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-14.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL -- 事务隔离"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/16/mysql-transaction-isolation/" title="MySQL -- 事务隔离">MySQL -- 事务隔离</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-16T14:36:07.000Z" title="Created 2019-01-16 22:36:07">2019-01-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/storage/">Storage</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/storage/mysql/">MySQL</a></span></div><div class="content">概念
事务：保证一组数据库操作，要么全部成功，要么全部失败
在MySQL中，事务支持是在存储引擎层实现的
MyISAM不支持事务
InnoDB支持事务



隔离性与隔离级别


事务特性：ACID（Atomicity、Consistency、Isolation、Durability）
如果多个事务并发执行时，就可能会出现脏读、不可重复读、幻读（phantom read）等问题
解决方案：隔离级别
隔离级别越高，效率就会越低


SQL标准的事务隔离级别
READ-UNCOMMITTED
一个事务还未提交时，它所做的变更能被别的事务看到


READ-COMMITTED
一个事务提交之后，它所做的变更才会被其他事务看到


REPEATABLE-READ
一个事务在执行过程中所看到的数据，总是跟这个事务在启动时看到的数据是一致的
同样，在RR隔离级别下，未提交的变更对其他事务也是不可见的


SERIALIZABLE
对同一行记录，写会加写锁，读会加读锁，锁级别是行锁
当出现读写锁冲突时，后访问的事务必须等前一个事务执行完成，才能继续执行




默认隔离级别
Oracle：READ-COMMITTED
My ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/01/15/mysql-redolog-binlog/" title="MySQL -- redolog + binlog"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-23.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL -- redolog + binlog"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/15/mysql-redolog-binlog/" title="MySQL -- redolog + binlog">MySQL -- redolog + binlog</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-15T11:11:56.000Z" title="Created 2019-01-15 19:11:56">2019-01-15</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/storage/">Storage</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/storage/mysql/">MySQL</a></span></div><div class="content">更新语句123mysql&gt; CREATE TABLE T (id INT PRIMARY KEY, c INT);mysql&gt; UPDATE T SET c=c+1 WHERE id=2;

执行过程





通过连接器，客户端与MySQL建立连接
update语句会把T表上的所有查询缓存清空
分析器会通过词法分析和语法分析识别这是一条更新语句
优化器会决定使用id这个索引（聚簇索引）
执行器负责具体执行，找到匹配的一行，然后更新
更新过程中还会涉及redolog（重做日志）和binlog（归档日志）的操作

redolog – InnoDB
如果每次更新操作都需要直接写入磁盘（在磁盘中找到相关的记录并更新），整个过程的IO成本和查找成本都很高
针对这种情况，MySQL采用的是WAL技术（Write-Ahead Logging）：_先写日志，再写磁盘_
当有一条记录需要更新的时候，InnoDB会先把记录写到redolog（redolog buffer），并更新内存（buffer pool）
InnoDB会在适当的时候（例如系统空闲），将这个操作记录到磁盘里面（刷脏页）


InnoDB的redo ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/01/14/mysql-architecture/" title="MySQL -- 基础架构"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL -- 基础架构"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/14/mysql-architecture/" title="MySQL -- 基础架构">MySQL -- 基础架构</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-14T12:10:55.000Z" title="Created 2019-01-14 20:10:55">2019-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/storage/">Storage</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/storage/mysql/">MySQL</a></span></div><div class="content">查询语句1mysql&gt; select * from T where ID=10;

基本架构





大体上，MySQL可以分为Server层和存储引擎层
Server层包括连接器、查询缓存、分析器、优化器和执行器等
涵盖MySQL的大多数核心服务功能，以及所有的内置函数
所有的跨存储引擎的功能都在这一层实现，例如存储过程、触发器和视图等


存储引擎层负责数据的存储和提取，架构模式为插件式
支持InnoDB、MyISAM和Memory等存储引擎
最常用为InnoDB（Since 5.5.5，默认）



连接器连接器负责跟客户端建立连接、获取权限、维持和管理连接，命令如下
1$ mysql -h$host -P$port -u$user -p

权限
mysql是客户端工具，用来与服务端建立连接
在完成TCP三次握手之后，连接器就要开始认证身份，即-u和-p
如果账号密码不对，客户端会收到Access denied for user的错误
如果账号密码认证通过，连接器会到权限表里查询拥有的权限
之后在这个连接里的权限判断，都依赖于此时读取的权限
因此即使用管理员账号对权限进行修改，也不会影响到已经存 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/01/12/jvm-advanced-agent/" title="JVM进阶 -- 浅谈Java Agent"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-23.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM进阶 -- 浅谈Java Agent"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/12/jvm-advanced-agent/" title="JVM进阶 -- 浅谈Java Agent">JVM进阶 -- 浅谈Java Agent</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-12T10:40:27.000Z" title="Created 2019-01-12 18:40:27">2019-01-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="content">Java Agent的运行方式
JVM并不会限制Java Agent的数量
可以在JVM参数中包含多个-javaagent参数
也可以远程attach多个Java Agent


JVM会按照参数的顺序或者attach的顺序，逐个执行Java Agent
JRebal&#x2F;Btrace&#x2F;arthas等工具都是基于Java Agent实现的

premain以JVM参数（-javaagent）的方式启动，在Java程序的main方法执行之前执行


MyAgent12345678package me.zhongmingmao;public class MyAgent &#123;    // JVM能识别的premain方法接收的是字符串类型的参数，并非类似main方法的字符串数组    public static void premain(String args) &#123;        System.out.println(&quot;premain&quot;);    &#125;&#125;

manifest.txt12345678910# 写入两行数据，最后一行为空行$ ech ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2019/01/12/jvm-advanced-jni/" title="JVM进阶 -- 浅谈JNI"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-18.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM进阶 -- 浅谈JNI"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/12/jvm-advanced-jni/" title="JVM进阶 -- 浅谈JNI">JVM进阶 -- 浅谈JNI</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-12T03:05:52.000Z" title="Created 2019-01-12 11:05:52">2019-01-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="content">native方法123public class Object &#123;    public native int hashCode();&#125;
当Java代码调用native方法时，JVM将通过JNI，调用至对应的C函数Object.hashCode()就是一个native方法，对应的C函数将计算对象的哈希值，并缓存在对象头、栈上锁记录（轻量级锁）或者对象监视锁（重量级锁，monitor）中，以确保该值在对象的生命周期之内不会变更


链接方式在调用native方法之前，JVM需要将该native方法链接至对应的C函数上
自动链接JVM自动查找符合默认命名规范的C函数，并且链接起来
Java代码12345678package me.zhongmingmao.advanced.jni;public class Foo &#123;    int i = 0xDEADBEEF;    public static native void foo();    public native void bar(int i, long j);    public native void bar(String s,  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2019/01/10/jvm-advanced-gui-mat/" title="JVM进阶 -- MAT"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-17.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM进阶 -- MAT"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/01/10/jvm-advanced-gui-mat/" title="JVM进阶 -- MAT">JVM进阶 -- MAT</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2019-01-10T15:18:43.000Z" title="Created 2019-01-10 23:18:43">2019-01-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/">JVM</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/java/jvm/advanced/">Advanced</a></span></div><div class="content">概念Shallow Heap + Retained HeapShallow HeapShallow heap is the memory consumed by one object. An object needs 32 or 64 bits (depending on the OS architecture) per reference, 4 bytes per Integer, 8 bytes per Long, etc. Depending on the heap dump format the size may be adjusted (e.g. aligned to 8, etc…) to model better the real consumption of the VM.
Retained SetRetained set of X is the set of objects which would be removed by GC when X is garbage collected.
Retained HeapRetained heap of X is the sum of shallo ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/41/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/41/#content-inner">41</a><span class="page-number current">42</span><a class="page-number" href="/page/43/#content-inner">43</a><span class="space">&hellip;</span><a class="page-number" href="/page/49/#content-inner">49</a><a class="extend next" rel="next" href="/page/43/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">488</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">125</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">65</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/01/30/go-paradigm-generation/" title="Go Paradigm - Generation"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/paradigm/go-generation.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Paradigm - Generation"/></a><div class="content"><a class="title" href="/2023/01/30/go-paradigm-generation/" title="Go Paradigm - Generation">Go Paradigm - Generation</a><time datetime="2023-01-29T16:06:25.000Z" title="Created 2023-01-30 00:06:25">2023-01-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/29/go-paradigm-map-reduce/" title="Go Paradigm - MapReduce"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/paradigm/image-20231212232811125.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Paradigm - MapReduce"/></a><div class="content"><a class="title" href="/2023/01/29/go-paradigm-map-reduce/" title="Go Paradigm - MapReduce">Go Paradigm - MapReduce</a><time datetime="2023-01-28T16:06:25.000Z" title="Created 2023-01-29 00:06:25">2023-01-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/28/go-paradigm-delegation-ioc/" title="Go Paradigm - Delegation + IoC"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/paradigm/go-ioc.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Paradigm - Delegation + IoC"/></a><div class="content"><a class="title" href="/2023/01/28/go-paradigm-delegation-ioc/" title="Go Paradigm - Delegation + IoC">Go Paradigm - Delegation + IoC</a><time datetime="2023-01-27T16:06:25.000Z" title="Created 2023-01-28 00:06:25">2023-01-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/27/go-paradigm-functional-options/" title="Go Paradigm - Functional Options"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/paradigm/functional-options-in-go.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Paradigm - Functional Options"/></a><div class="content"><a class="title" href="/2023/01/27/go-paradigm-functional-options/" title="Go Paradigm - Functional Options">Go Paradigm - Functional Options</a><time datetime="2023-01-26T16:06:25.000Z" title="Created 2023-01-27 00:06:25">2023-01-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/26/go-foundation-pointer/" title="Go - Pointer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/go-pointer.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go - Pointer"/></a><div class="content"><a class="title" href="/2023/01/26/go-foundation-pointer/" title="Go - Pointer">Go - Pointer</a><time datetime="2023-01-25T16:06:25.000Z" title="Created 2023-01-26 00:06:25">2023-01-26</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/career/"><span class="card-category-list-name">Career</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/"><span class="card-category-list-name">Cloud Computing</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/iaas/"><span class="card-category-list-name">IaaS</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/paas/"><span class="card-category-list-name">PaaS</span><span class="card-category-list-count">5</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/"><span class="card-category-list-name">Cloud Native</span><span class="card-category-list-count">115</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/"><span class="card-category-list-name">Cloud Native Foundation</span><span class="card-category-list-count">89</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/"><span class="card-category-list-name">Container</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">2</span></a></li></ul></li></ul></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/cloud-computing/" style="font-size: 1.24em; color: rgb(22, 100, 26)">Cloud Computing</a><a href="/tags/iaas/" style="font-size: 1.19em; color: rgb(26, 93, 163)">IaaS</a><a href="/tags/paas/" style="font-size: 1.19em; color: rgb(77, 164, 78)">PaaS</a><a href="/tags/cloud-native/" style="font-size: 1.45em; color: rgb(94, 71, 147)">Cloud Native</a><a href="/tags/container/" style="font-size: 1.28em; color: rgb(126, 72, 41)">Container</a><a href="/tags/docker/" style="font-size: 1.29em; color: rgb(27, 159, 42)">Docker</a><a href="/tags/cloud-native-foundation/" style="font-size: 1.32em; color: rgb(103, 45, 177)">Cloud Native Foundation</a><a href="/tags/go-core/" style="font-size: 1.17em; color: rgb(45, 166, 0)">Go Core</a><a href="/tags/go/" style="font-size: 1.43em; color: rgb(19, 138, 10)">Go</a><a href="/tags/go-engineering/" style="font-size: 1.31em; color: rgb(134, 192, 115)">Go Engineering</a><a href="/tags/rpc/" style="font-size: 1.16em; color: rgb(178, 159, 108)">RPC</a><a href="/tags/grpc/" style="font-size: 1.15em; color: rgb(19, 37, 29)">gRPC</a><a href="/tags/network/" style="font-size: 1.16em; color: rgb(184, 72, 51)">Network</a><a href="/tags/kubernetes/" style="font-size: 1.42em; color: rgb(2, 139, 116)">Kubernetes</a><a href="/tags/linux/" style="font-size: 1.29em; color: rgb(1, 8, 65)">Linux</a><a href="/tags/dockerfile/" style="font-size: 1.17em; color: rgb(162, 143, 133)">Dockerfile</a><a href="/tags/etcd/" style="font-size: 1.15em; color: rgb(54, 15, 176)">etcd</a><a href="/tags/raft/" style="font-size: 1.15em; color: rgb(75, 130, 53)">raft</a><a href="/tags/microservices/" style="font-size: 1.29em; color: rgb(74, 89, 11)">Microservices</a><a href="/tags/spring-cloud/" style="font-size: 1.22em; color: rgb(114, 91, 74)">Spring Cloud</a><a href="/tags/spring/" style="font-size: 1.25em; color: rgb(90, 192, 39)">Spring</a><a href="/tags/java/" style="font-size: 1.44em; color: rgb(89, 100, 67)">Java</a><a href="/tags/service-governance/" style="font-size: 1.17em; color: rgb(74, 177, 105)">Service Governance</a><a href="/tags/opa/" style="font-size: 1.22em; color: rgb(155, 93, 198)">OPA</a><a href="/tags/alibaba/" style="font-size: 1.23em; color: rgb(65, 140, 89)">Alibaba</a><a href="/tags/security/" style="font-size: 1.28em; color: rgb(85, 151, 165)">Security</a><a href="/tags/compliance/" style="font-size: 1.17em; color: rgb(59, 170, 69)">Compliance</a><a href="/tags/computer-basics/" style="font-size: 1.35em; color: rgb(29, 144, 58)">Computer Basics</a><a href="/tags/computer-organization/" style="font-size: 1.35em; color: rgb(44, 49, 117)">Computer Organization</a><a href="/tags/knowledge-map/" style="font-size: 1.15em; color: rgb(75, 24, 137)">Knowledge Map</a><a href="/tags/architecture/" style="font-size: 1.28em; color: rgb(36, 69, 43)">Architecture</a><a href="/tags/devops/" style="font-size: 1.15em; color: rgb(175, 84, 159)">DevOps</a><a href="/tags/tool/" style="font-size: 1.24em; color: rgb(26, 50, 188)">Tool</a><a href="/tags/git/" style="font-size: 1.24em; color: rgb(56, 7, 12)">Git</a><a href="/tags/cloud/" style="font-size: 1.34em; color: rgb(104, 183, 137)">Cloud</a><a href="/tags/native/" style="font-size: 1.34em; color: rgb(19, 186, 131)">Native</a><a href="/tags/infrastructure/" style="font-size: 1.27em; color: rgb(93, 35, 82)">Infrastructure</a><a href="/tags/authentication/" style="font-size: 1.17em; color: rgb(48, 133, 158)">Authentication</a><a href="/tags/jwt/" style="font-size: 1.15em; color: rgb(20, 171, 25)">JWT</a><a href="/tags/ldap/" style="font-size: 1.15em; color: rgb(112, 85, 75)">LDAP</a><a href="/tags/oauth-2-0/" style="font-size: 1.22em; color: rgb(68, 92, 188)">OAuth 2.0</a><a href="/tags/storage/" style="font-size: 1.39em; color: rgb(100, 106, 34)">Storage</a><a href="/tags/mysql/" style="font-size: 1.41em; color: rgb(72, 104, 72)">MySQL</a><a href="/tags/innodb/" style="font-size: 1.21em; color: rgb(82, 2, 158)">InnoDB</a><a href="/tags/java-concurrent/" style="font-size: 1.37em; color: rgb(52, 191, 99)">Java Concurrent</a><a href="/tags/actor/" style="font-size: 1.15em; color: rgb(31, 30, 108)">Actor</a><a href="/tags/akka/" style="font-size: 1.15em; color: rgb(130, 58, 150)">Akka</a><a href="/tags/coroutine/" style="font-size: 1.16em; color: rgb(158, 159, 20)">Coroutine</a><a href="/tags/disruptor/" style="font-size: 1.15em; color: rgb(107, 67, 47)">Disruptor</a><a href="/tags/csp/" style="font-size: 1.15em; color: rgb(88, 88, 84)">CSP</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(16, 63, 160)">Netty</a><a href="/tags/stm/" style="font-size: 1.15em; color: rgb(188, 168, 91)">STM</a><a href="/tags/mvcc/" style="font-size: 1.15em; color: rgb(124, 145, 132)">MVCC</a><a href="/tags/java-core/" style="font-size: 1.22em; color: rgb(198, 98, 199)">Java Core</a><a href="/tags/java-performance/" style="font-size: 1.33em; color: rgb(190, 130, 173)">Java Performance</a><a href="/tags/cas/" style="font-size: 1.15em; color: rgb(183, 154, 143)">CAS</a><a href="/tags/consistency/" style="font-size: 1.15em; color: rgb(147, 143, 81)">Consistency</a><a href="/tags/hashtable/" style="font-size: 1.15em; color: rgb(11, 164, 157)">HashTable</a><a href="/tags/concurrenthashmap/" style="font-size: 1.15em; color: rgb(173, 93, 62)">ConcurrentHashMap</a><a href="/tags/concurrentskiplistmap/" style="font-size: 1.15em; color: rgb(176, 124, 164)">ConcurrentSkipListMap</a><a href="/tags/design-pattern/" style="font-size: 1.18em; color: rgb(91, 48, 113)">Design Pattern</a><a href="/tags/hashmap/" style="font-size: 1.15em; color: rgb(83, 23, 21)">HashMap</a><a href="/tags/jvm/" style="font-size: 1.36em; color: rgb(183, 88, 25)">JVM</a><a href="/tags/gc/" style="font-size: 1.16em; color: rgb(130, 69, 56)">GC</a><a href="/tags/jit/" style="font-size: 1.15em; color: rgb(84, 113, 181)">JIT</a><a href="/tags/io/" style="font-size: 1.15em; color: rgb(132, 159, 139)">IO</a><a href="/tags/nio/" style="font-size: 1.16em; color: rgb(72, 103, 169)">NIO</a><a href="/tags/aio/" style="font-size: 1.16em; color: rgb(75, 139, 87)">AIO</a><a href="/tags/epoll/" style="font-size: 1.16em; color: rgb(160, 169, 95)">Epoll</a><a href="/tags/bio/" style="font-size: 1.15em; color: rgb(157, 175, 23)">BIO</a><a href="/tags/tomcat/" style="font-size: 1.15em; color: rgb(66, 6, 33)">Tomcat</a><a href="/tags/select/" style="font-size: 1.15em; color: rgb(64, 137, 170)">Select</a><a href="/tags/poll/" style="font-size: 1.15em; color: rgb(77, 146, 10)">Poll</a><a href="/tags/zero-copy/" style="font-size: 1.15em; color: rgb(194, 54, 156)">Zero Copy</a><a href="/tags/mmap/" style="font-size: 1.15em; color: rgb(87, 180, 43)">mmap</a><a href="/tags/reactor/" style="font-size: 1.15em; color: rgb(7, 153, 76)">Reactor</a><a href="/tags/synchronized/" style="font-size: 1.16em; color: rgb(169, 191, 32)">synchronized</a><a href="/tags/lock/" style="font-size: 1.15em; color: rgb(27, 12, 193)">Lock</a><a href="/tags/reentrantreadwritelock/" style="font-size: 1.15em; color: rgb(107, 120, 98)">ReentrantReadWriteLock</a><a href="/tags/stampedlock/" style="font-size: 1.15em; color: rgb(38, 101, 66)">StampedLock</a><a href="/tags/serialization/" style="font-size: 1.15em; color: rgb(167, 190, 186)">Serialization</a><a href="/tags/protobuf/" style="font-size: 1.15em; color: rgb(110, 175, 58)">ProtoBuf</a><a href="/tags/java-stream/" style="font-size: 1.15em; color: rgb(101, 110, 154)">Java Stream</a><a href="/tags/thread-pool/" style="font-size: 1.15em; color: rgb(32, 75, 175)">Thread Pool</a><a href="/tags/mark-word/" style="font-size: 1.15em; color: rgb(17, 142, 39)">Mark Word</a><a href="/tags/monitor/" style="font-size: 1.15em; color: rgb(102, 56, 184)">Monitor</a><a href="/tags/context-switch/" style="font-size: 1.15em; color: rgb(35, 184, 13)">Context Switch</a><a href="/tags/lambda/" style="font-size: 1.15em; color: rgb(80, 14, 35)">Lambda</a><a href="/tags/bytecode-manipulation/" style="font-size: 1.17em; color: rgb(84, 122, 74)">Bytecode Manipulation</a><a href="/tags/asm/" style="font-size: 1.15em; color: rgb(32, 29, 79)">ASM</a><a href="/tags/jol/" style="font-size: 1.17em; color: rgb(18, 24, 67)">JOL</a><a href="/tags/middleware/" style="font-size: 1.38em; color: rgb(186, 120, 29)">Middleware</a><a href="/tags/mq/" style="font-size: 1.38em; color: rgb(62, 104, 74)">MQ</a><a href="/tags/kafka/" style="font-size: 1.38em; color: rgb(166, 198, 40)">Kafka</a><a href="/tags/stream/" style="font-size: 1.38em; color: rgb(39, 122, 136)">Stream</a><a href="/tags/rebalance/" style="font-size: 1.17em; color: rgb(184, 102, 196)">Rebalance</a><a href="/tags/avro/" style="font-size: 1.18em; color: rgb(8, 198, 138)">Avro</a><a href="/tags/compression/" style="font-size: 1.15em; color: rgb(3, 87, 28)">Compression</a><a href="/tags/consumer-group/" style="font-size: 1.15em; color: rgb(17, 40, 81)">Consumer Group</a><a href="/tags/tcp/" style="font-size: 1.16em; color: rgb(170, 121, 98)">TCP</a><a href="/tags/idempotence/" style="font-size: 1.15em; color: rgb(169, 45, 140)">Idempotence</a><a href="/tags/producer/" style="font-size: 1.15em; color: rgb(81, 87, 188)">Producer</a><a href="/tags/load-balance/" style="font-size: 1.15em; color: rgb(23, 92, 59)">Load Balance</a><a href="/tags/distributed-architecture/" style="font-size: 1.15em; color: rgb(71, 200, 124)">Distributed Architecture</a><a href="/tags/distributed-design-pattern/" style="font-size: 1.17em; color: rgb(153, 29, 140)">Distributed Design Pattern</a><a href="/tags/career/" style="font-size: 1.15em; color: rgb(163, 130, 36)">Career</a><a href="/tags/linux-performance/" style="font-size: 1.17em; color: rgb(175, 64, 74)">Linux Performance</a><a href="/tags/linux-practice/" style="font-size: 1.26em; color: rgb(32, 43, 95)">Linux Practice</a><a href="/tags/ext4/" style="font-size: 1.15em; color: rgb(172, 195, 177)">ext4</a><a href="/tags/file-system/" style="font-size: 1.15em; color: rgb(61, 36, 185)">File System</a><a href="/tags/math/" style="font-size: 1.16em; color: rgb(63, 51, 62)">Math</a><a href="/tags/microservices-governance/" style="font-size: 1.23em; color: rgb(70, 80, 151)">Microservices Governance</a><a href="/tags/config/" style="font-size: 1.17em; color: rgb(159, 65, 0)">Config</a><a href="/tags/configuration-center/" style="font-size: 1.17em; color: rgb(6, 146, 163)">Configuration Center</a><a href="/tags/apollo/" style="font-size: 1.17em; color: rgb(200, 11, 8)">Apollo</a><a href="/tags/oauth2/" style="font-size: 1.21em; color: rgb(178, 115, 56)">Oauth2</a><a href="/tags/spring-security/" style="font-size: 1.19em; color: rgb(52, 157, 29)">Spring Security</a><a href="/tags/spring-security-oauth2/" style="font-size: 1.19em; color: rgb(154, 148, 196)">Spring Security OAuth2</a><a href="/tags/vim/" style="font-size: 1.21em; color: rgb(49, 158, 14)">Vim</a><a href="/tags/web/" style="font-size: 1.22em; color: rgb(190, 79, 151)">Web</a><a href="/tags/javascript/" style="font-size: 1.19em; color: rgb(15, 187, 170)">JavaScript</a><a href="/tags/performance-tuning/" style="font-size: 1.15em; color: rgb(15, 127, 7)">Performance Tuning</a><a href="/tags/zookeeper/" style="font-size: 1.16em; color: rgb(45, 172, 133)">Zookeeper</a><a href="/tags/distributed-lock/" style="font-size: 1.15em; color: rgb(6, 120, 196)">Distributed Lock</a><a href="/tags/zab/" style="font-size: 1.15em; color: rgb(38, 83, 165)">ZAB</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">January 2023</span><span class="card-archive-list-count">30</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">December 2022</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">November 2022</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">October 2022</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">September 2022</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">July 2022</span><span class="card-archive-list-count">18</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">May 2022</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">April 2022</span><span class="card-archive-list-count">9</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">488</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2015-06-30T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">856.9k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-12-12T17:22:03.109Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2023 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Stay hungry, stay foolish."])
  } else {
    document.getElementById("subtitle").innerHTML = 'Stay hungry, stay foolish.'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>