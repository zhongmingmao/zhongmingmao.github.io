<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Focus on Infrastructure">
<meta property="og:type" content="website">
<meta property="og:title" content="ByteCoding">
<meta property="og:url" content="https://blog.zhongmingmao.top/page/15/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="Focus on Infrastructure">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png">
<meta property="article:author" content="zhongmingmao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/page/15/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ByteCoding',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-10-04 21:56:47'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">440</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">123</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">64</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2022/10/16/13/53/early-morning-7525151_1280.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ByteCoding</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2021/07/07/cloud-native-k8s-container/" title="Kubernetes -- 容器"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-1.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes -- 容器"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/07/cloud-native-k8s-container/" title="Kubernetes -- 容器">Kubernetes -- 容器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-07-07T09:43:46.000Z" title="Created 2021-07-07 17:43:46">2021-07-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/alibaba/">Alibaba</a></span></div><div class="content">容器与镜像容器容器是一个资源视图隔离、资源可限制、独立文件系统的进程集合



镜像容器镜像：运行容器所需要的所有文件集合

构建镜像
运行容器
容器生命周期
Moby 容器引擎架构containerd-shim： 插件化、动态接管

容器 vs VM
参考资料
CNCF × Alibaba 云原生技术公开课

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/07/07/cloud-native-k8s-overview/" title="云原生 -- 概述"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云原生 -- 概述"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/07/cloud-native-k8s-overview/" title="云原生 -- 概述">云原生 -- 概述</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-07-07T08:04:35.000Z" title="Created 2021-07-07 16:04:35">2021-07-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/alibaba/">Alibaba</a></span></div><div class="content">定义最佳路径
云原生是一条使用户能低心智负担的、敏捷的、以可扩展、可复制的方式，最大化地利用云的能力，发挥云的价值的最佳路径

愿景
软件从诞生就生在云上、长在云上，全新的软件开发、发布和运维模式

技术范畴


理论基础


理论基础
目前实现



不可变基础设施
容器镜像


云应用编排理论
容器设计模式



意义


Key
Value



基础设施一致性和可靠性
容器镜像自包含可漂移


简单可预测的部署与运维
自描述、自运维流程自动化容易水平扩展可快速复制的管控系统和支撑组件


关键技术点
参考资料
CNCF × Alibaba 云原生技术公开课

</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/06/22/k8s-app-dev-view/" title="Kubernetes -- 应用开发视角"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-20.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes -- 应用开发视角"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/22/k8s-app-dev-view/" title="Kubernetes -- 应用开发视角">Kubernetes -- 应用开发视角</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-22T02:45:47.000Z" title="Created 2021-06-22 10:45:47">2021-06-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">云原生架构Cloud Native App
Applications adopting the principles of Microservices packaged as Containers orchestracted by Platforms running on top of Cloud infrastructure, developed using practices such as Continous Delivery and DevOps.

云演进史


Kubernetes目标 Kubernetes本质上是为了简化微服务的开发和部署，解决微服务的公共关注点

架构

架构模式：Master-Slave
Node可以是物理机也可以是虚拟机
Master（为保证HA，Master也是多节点部署，但真正做调度决策的只有一个Master节点，因此涉及到选主）
etcd（单独部署）
基于KV的分布式存储，底层采用Raft协议，保存Kubernetes的状态数据


API Server
对外提供操作和获取Kubernetes集群资源的API，唯一可以操作etcd的组件 – 被Google和RedHa ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/06/19/k8s-container-orchestration-declarative-api-basic/" title="声明式API -- 基本概念"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="声明式API -- 基本概念"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/19/k8s-container-orchestration-declarative-api-basic/" title="声明式API -- 基本概念">声明式API -- 基本概念</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-19T08:47:42.000Z" title="Created 2021-06-19 16:47:42">2021-06-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">命令式 vs 声明式命令式12# kubectl create -f nginx.yaml# kubectl replace -f nginx.yaml

声明式1# kubectl apply -f nginx.yaml


所谓声明式，即只需要提交一个定义好的API对象来声明所期待的状态即可
声明式API允许多个API写端，以PATCH的方式对API对象进行修改，而无需关心本地原始YAML文件的内容


声明式API最主要的能力：_PATCH API_


声明式API是Kubernetes编排能力赖以生存的核心所在

本质区别



kubectl replace
kubectl apply



执行过程
使用新API对象替换旧API对象
执行对旧API对象的PATCH操作类似：kubectl set image、kubectl edit


kube-apiserver
一次只能处理一个写请求，否则可能产生冲突
一次能处理多个写请求，具备Merge能力


Kubernetes编程范式
使用控制器模式，与Kubernetes里API对象的『增、删、改、查』进行协作，进而完成用户业务逻辑的编写



 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/06/19/cloud-native-java/" title="Graal VM:云原生时代的Java（转载）"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Graal VM:云原生时代的Java（转载）"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/19/cloud-native-java/" title="Graal VM:云原生时代的Java（转载）">Graal VM:云原生时代的Java（转载）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-18T17:32:22.000Z" title="Created 2021-06-19 01:32:22">2021-06-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/java/">Java</a></span></div><div class="content">
    
</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/06/18/k8s-container-orchestration-job/" title="容器编排 -- Job"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器编排 -- Job"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/18/k8s-container-orchestration-job/" title="容器编排 -- Job">容器编排 -- Job</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-18T09:43:45.000Z" title="Created 2021-06-18 17:43:45">2021-06-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">编排对象
在线业务：Deployment、StatefulSet、DaemonSet
离线业务：Job、CronJob

Jobjob.yaml
Job对象不需要定义spec.selector（借助UUID）

job.yaml12345678910111213141516apiVersion: batch/v1kind: Jobmetadata:  name: pispec:  template:    spec:      containers:        - name: pi          image: resouer/ubuntu-bc          command:            - sh            - &#x27;-c&#x27;            - &quot;echo &#x27;scale=10000; 4*a(1)&#x27; | bc -l&quot;      restartPolicy: Never  backoffLimit: 4



创建Job123456# kubectl apply -f job.yamljob.batch/pi cre ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/06/18/k8s-container-orchestration-daemonset/" title="容器编排 -- DaemonSet"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-11.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器编排 -- DaemonSet"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/18/k8s-container-orchestration-daemonset/" title="容器编排 -- DaemonSet">容器编排 -- DaemonSet</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-17T17:35:19.000Z" title="Created 2021-06-18 01:35:19">2021-06-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">Daemon Pod特征
运行在Kubernetes集群的每个Node上
每个Node有且仅有一个Daemon Pod
新Node加入Kubernetes集群，Daemon Pod会自动在新Node上被创建
旧Node被删除后，上面的Daemon Pod也会被回收

场景
网络插件的Agent组件
存储插件的Agent组件
监控组件 + 日志组件

工作原理
循环控制：遍历所有Node，根据Node上是否有被管理Pod的情况，来决定是否需要创建或者删除Pod
DaemonSet在创建每个Pod时，做了两件额外的事情
自动给这个Pod加上一个nodeAffinity，来保证该Pod只会在指定节点上启动
自动给这个Pod加上一个Toleration，从而忽略Node上的unschedulable污点





API Object
该DaemonSet管理的是一个fluentd-elasticsearch镜像的Pod
fluentd-elasticsearch：通过fluentd将Docker容器里的日志转发到ElasticSearch
DaemonSet与Deployment非常类似，只是DaemonSet没有 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/06/17/k8s-container-orchestration-statefulset-principle/" title="容器编排 -- StatefulSet（原理）"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器编排 -- StatefulSet（原理）"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/17/k8s-container-orchestration-statefulset-principle/" title="容器编排 -- StatefulSet（原理）">容器编排 -- StatefulSet（原理）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-17T00:17:08.000Z" title="Created 2021-06-17 08:17:08">2021-06-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">背景
Deployment的短板：Deployment认为一个应用的所有Pod，是完全一样的
有状态应用（Stateful Application）
实例之间有不对等的关系 – 拓扑
实例对外部数据有依赖关系 – 存储


StatefulSet
Kubernetes在Deployment的基础上，扩展出对有状态应用的初步支持
StatefulSet是Kubernetes在作业编排的集大成者



状态抽象
分类
拓扑状态：应用的多个实例之间是不完全对等的关系
存储状态：应用的多个实例分别绑定了不同的存储数据


核心功能：通过某种方式记录状态，然后在Pod被重新创建时，能够为新Pod恢复这些状态

设计思想
StatefulSet是一种特殊的Deployment，独特之处：为每个Pod编号（代表创建顺序、网络标识等）
编号 + Headless Service &#x3D;&#x3D;&gt; 拓扑状态
编号 + Headless Service + PV&#x2F;PVC &#x3D;&#x3D;&gt; 存储状态



拓扑状态
StatefulSet控制器使用Pod模板创建Pod时，对它们进行编号，并 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/06/16/k8s-container-orchestration-deployment/" title="容器编排 -- Deployment"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-23.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器编排 -- Deployment"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/16/k8s-container-orchestration-deployment/" title="容器编排 -- Deployment">容器编排 -- Deployment</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-15T17:13:31.000Z" title="Created 2021-06-16 01:13:31">2021-06-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">基本概念
Deployment实现了Pod的水平伸缩（horizontal scaling out&#x2F;in） – 滚动更新（rolling update）
滚动更新依赖于ReplicaSet
Deployment控制ReplicaSet（版本），ReplicaSet控制Pod（副本数）！！

ReplicaSet
ReplicaSet的定义是Deployment的一个子集
Deployment控制器实际操纵对象是ReplicaSet，而非Pod，Deployment所管理的Pod的ownerReference为ReplicaSet

12345678910111213141516171819apiVersion: apps/v1kind: ReplicaSetmetadata:  name: nginx-set  labels:    app: nginxspec:  replicas: 3  selector:    matchLabels:      app: nginx  template:    metadata:      labels:        app: nginx    spec: ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/06/15/k8s-container-orchestration-controller-model/" title="容器编排 -- 控制器模型"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/go-21.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器编排 -- 控制器模型"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/15/k8s-container-orchestration-controller-model/" title="容器编排 -- 控制器模型">容器编排 -- 控制器模型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-15T01:00:00.000Z" title="Created 2021-06-15 09:00:00">2021-06-15</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/cloud-native/">Cloud Native</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/cloud-native/kubernetes/">Kubernetes</a></span></div><div class="content">控制器
kube-controller-manager是一系列控制器的集合，每一种控制器都以独有的方式负责某种编排功能

1234567# cd kubernetes/pkg/controller# ls -d */apis/                   cronjob/                endpoint/               history/                nodelifecycle/          replication/            storageversiongc/       util/bootstrap/              daemon/                 endpointslice/          job/                    podautoscaler/          resourcequota/          testutil/               volume/certificates/           deployment/             endpoint ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/14/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/#content-inner">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/#content-inner">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/#content-inner">44</a><a class="extend next" rel="next" href="/page/16/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">440</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">123</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">64</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/12/13/cloud-native-foundation-k8s-manage-production-clusters/" title="Kubernetes - Manage Production Clusters"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/2bc58949d451b7e5f8f8759c44d962d01b2ed48d-1108x1108.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Manage Production Clusters"/></a><div class="content"><a class="title" href="/2022/12/13/cloud-native-foundation-k8s-manage-production-clusters/" title="Kubernetes - Manage Production Clusters">Kubernetes - Manage Production Clusters</a><time datetime="2022-12-12T16:06:25.000Z" title="Created 2022-12-13 00:06:25">2022-12-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/12/cloud-native-foundation-k8s-service-discovery/" title="Kubernetes - Service Discovery"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/kubernetes-service-discovery.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Service Discovery"/></a><div class="content"><a class="title" href="/2022/12/12/cloud-native-foundation-k8s-service-discovery/" title="Kubernetes - Service Discovery">Kubernetes - Service Discovery</a><time datetime="2022-12-11T16:06:25.000Z" title="Created 2022-12-12 00:06:25">2022-12-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/11/go-foundation-design-philosophy/" title="Go - Design Philosophy"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/go-1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go - Design Philosophy"/></a><div class="content"><a class="title" href="/2022/12/11/go-foundation-design-philosophy/" title="Go - Design Philosophy">Go - Design Philosophy</a><time datetime="2022-12-10T16:06:25.000Z" title="Created 2022-12-11 00:06:25">2022-12-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/10/cloud-native-foundation-k8s-pod-life-cycle/" title="Kubernetes - Pod Life Cycle"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/pod-life-cycle.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Pod Life Cycle"/></a><div class="content"><a class="title" href="/2022/12/10/cloud-native-foundation-k8s-pod-life-cycle/" title="Kubernetes - Pod Life Cycle">Kubernetes - Pod Life Cycle</a><time datetime="2022-12-09T16:06:25.000Z" title="Created 2022-12-10 00:06:25">2022-12-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/09/cloud-native-foundation-k8s-csi/" title="Kubernetes - CSI"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/k8s-csi.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - CSI"/></a><div class="content"><a class="title" href="/2022/12/09/cloud-native-foundation-k8s-csi/" title="Kubernetes - CSI">Kubernetes - CSI</a><time datetime="2022-12-08T16:06:25.000Z" title="Created 2022-12-09 00:06:25">2022-12-09</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/career/"><span class="card-category-list-name">Career</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/"><span class="card-category-list-name">Cloud Computing</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/iaas/"><span class="card-category-list-name">IaaS</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/paas/"><span class="card-category-list-name">PaaS</span><span class="card-category-list-count">5</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/"><span class="card-category-list-name">Cloud Native</span><span class="card-category-list-count">109</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/"><span class="card-category-list-name">Cloud Native Foundation</span><span class="card-category-list-count">83</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/"><span class="card-category-list-name">Container</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">2</span></a></li></ul></li></ul></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/cloud-computing/" style="font-size: 1.24em; color: rgb(27, 102, 84)">Cloud Computing</a><a href="/tags/paas/" style="font-size: 1.2em; color: rgb(157, 140, 159)">PaaS</a><a href="/tags/iaas/" style="font-size: 1.2em; color: rgb(87, 26, 47)">IaaS</a><a href="/tags/cloud-native/" style="font-size: 1.45em; color: rgb(20, 89, 112)">Cloud Native</a><a href="/tags/container/" style="font-size: 1.3em; color: rgb(29, 162, 27)">Container</a><a href="/tags/docker/" style="font-size: 1.31em; color: rgb(17, 25, 52)">Docker</a><a href="/tags/go-core/" style="font-size: 1.17em; color: rgb(119, 36, 99)">Go Core</a><a href="/tags/go/" style="font-size: 1.35em; color: rgb(186, 199, 112)">Go</a><a href="/tags/go-engineering/" style="font-size: 1.32em; color: rgb(36, 171, 118)">Go Engineering</a><a href="/tags/rpc/" style="font-size: 1.16em; color: rgb(140, 160, 24)">RPC</a><a href="/tags/grpc/" style="font-size: 1.15em; color: rgb(150, 172, 30)">gRPC</a><a href="/tags/network/" style="font-size: 1.16em; color: rgb(196, 93, 40)">Network</a><a href="/tags/cloud-native-foundation/" style="font-size: 1.28em; color: rgb(37, 101, 123)">Cloud Native Foundation</a><a href="/tags/kubernetes/" style="font-size: 1.43em; color: rgb(34, 67, 134)">Kubernetes</a><a href="/tags/linux/" style="font-size: 1.31em; color: rgb(123, 70, 137)">Linux</a><a href="/tags/dockerfile/" style="font-size: 1.17em; color: rgb(111, 161, 77)">Dockerfile</a><a href="/tags/microservices/" style="font-size: 1.31em; color: rgb(193, 108, 31)">Microservices</a><a href="/tags/spring-cloud/" style="font-size: 1.22em; color: rgb(148, 132, 93)">Spring Cloud</a><a href="/tags/spring/" style="font-size: 1.25em; color: rgb(50, 2, 2)">Spring</a><a href="/tags/java/" style="font-size: 1.44em; color: rgb(150, 111, 71)">Java</a><a href="/tags/service-governance/" style="font-size: 1.17em; color: rgb(107, 68, 99)">Service Governance</a><a href="/tags/alibaba/" style="font-size: 1.23em; color: rgb(93, 153, 43)">Alibaba</a><a href="/tags/security/" style="font-size: 1.3em; color: rgb(73, 157, 93)">Security</a><a href="/tags/compliance/" style="font-size: 1.17em; color: rgb(16, 68, 188)">Compliance</a><a href="/tags/opa/" style="font-size: 1.17em; color: rgb(38, 75, 62)">OPA</a><a href="/tags/computer-basics/" style="font-size: 1.36em; color: rgb(130, 56, 68)">Computer Basics</a><a href="/tags/computer-organization/" style="font-size: 1.36em; color: rgb(77, 195, 70)">Computer Organization</a><a href="/tags/knowledge-map/" style="font-size: 1.15em; color: rgb(43, 48, 49)">Knowledge Map</a><a href="/tags/architecture/" style="font-size: 1.3em; color: rgb(39, 45, 17)">Architecture</a><a href="/tags/devops/" style="font-size: 1.15em; color: rgb(73, 137, 4)">DevOps</a><a href="/tags/tool/" style="font-size: 1.24em; color: rgb(111, 152, 160)">Tool</a><a href="/tags/git/" style="font-size: 1.24em; color: rgb(77, 78, 112)">Git</a><a href="/tags/infrastructure/" style="font-size: 1.29em; color: rgb(22, 83, 74)">Infrastructure</a><a href="/tags/authentication/" style="font-size: 1.17em; color: rgb(74, 103, 152)">Authentication</a><a href="/tags/ldap/" style="font-size: 1.15em; color: rgb(31, 100, 132)">LDAP</a><a href="/tags/oauth-2-0/" style="font-size: 1.22em; color: rgb(29, 35, 174)">OAuth 2.0</a><a href="/tags/storage/" style="font-size: 1.4em; color: rgb(96, 189, 119)">Storage</a><a href="/tags/mysql/" style="font-size: 1.42em; color: rgb(62, 20, 198)">MySQL</a><a href="/tags/innodb/" style="font-size: 1.21em; color: rgb(54, 173, 171)">InnoDB</a><a href="/tags/java-concurrent/" style="font-size: 1.38em; color: rgb(92, 178, 28)">Java Concurrent</a><a href="/tags/actor/" style="font-size: 1.15em; color: rgb(171, 142, 97)">Actor</a><a href="/tags/akka/" style="font-size: 1.15em; color: rgb(139, 37, 111)">Akka</a><a href="/tags/coroutine/" style="font-size: 1.16em; color: rgb(114, 123, 134)">Coroutine</a><a href="/tags/csp/" style="font-size: 1.15em; color: rgb(111, 78, 173)">CSP</a><a href="/tags/disruptor/" style="font-size: 1.15em; color: rgb(55, 67, 136)">Disruptor</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(121, 120, 200)">Netty</a><a href="/tags/stm/" style="font-size: 1.15em; color: rgb(19, 74, 80)">STM</a><a href="/tags/mvcc/" style="font-size: 1.15em; color: rgb(166, 53, 115)">MVCC</a><a href="/tags/java-core/" style="font-size: 1.22em; color: rgb(42, 32, 61)">Java Core</a><a href="/tags/java-performance/" style="font-size: 1.33em; color: rgb(129, 195, 199)">Java Performance</a><a href="/tags/cas/" style="font-size: 1.15em; color: rgb(174, 131, 19)">CAS</a><a href="/tags/hashtable/" style="font-size: 1.15em; color: rgb(28, 82, 140)">HashTable</a><a href="/tags/concurrenthashmap/" style="font-size: 1.15em; color: rgb(26, 152, 120)">ConcurrentHashMap</a><a href="/tags/concurrentskiplistmap/" style="font-size: 1.15em; color: rgb(181, 182, 114)">ConcurrentSkipListMap</a><a href="/tags/design-pattern/" style="font-size: 1.18em; color: rgb(3, 56, 187)">Design Pattern</a><a href="/tags/consistency/" style="font-size: 1.15em; color: rgb(143, 162, 45)">Consistency</a><a href="/tags/jvm/" style="font-size: 1.37em; color: rgb(17, 128, 23)">JVM</a><a href="/tags/gc/" style="font-size: 1.16em; color: rgb(52, 31, 89)">GC</a><a href="/tags/hashmap/" style="font-size: 1.15em; color: rgb(56, 103, 53)">HashMap</a><a href="/tags/jit/" style="font-size: 1.15em; color: rgb(11, 132, 127)">JIT</a><a href="/tags/io/" style="font-size: 1.15em; color: rgb(155, 144, 24)">IO</a><a href="/tags/nio/" style="font-size: 1.16em; color: rgb(44, 6, 137)">NIO</a><a href="/tags/aio/" style="font-size: 1.16em; color: rgb(115, 189, 23)">AIO</a><a href="/tags/epoll/" style="font-size: 1.16em; color: rgb(76, 189, 73)">Epoll</a><a href="/tags/synchronized/" style="font-size: 1.16em; color: rgb(43, 141, 139)">synchronized</a><a href="/tags/lock/" style="font-size: 1.15em; color: rgb(178, 94, 41)">Lock</a><a href="/tags/reentrantreadwritelock/" style="font-size: 1.15em; color: rgb(145, 81, 101)">ReentrantReadWriteLock</a><a href="/tags/stampedlock/" style="font-size: 1.15em; color: rgb(98, 86, 46)">StampedLock</a><a href="/tags/serialization/" style="font-size: 1.15em; color: rgb(24, 200, 50)">Serialization</a><a href="/tags/protobuf/" style="font-size: 1.15em; color: rgb(40, 185, 111)">ProtoBuf</a><a href="/tags/java-stream/" style="font-size: 1.15em; color: rgb(173, 132, 171)">Java Stream</a><a href="/tags/mark-word/" style="font-size: 1.15em; color: rgb(73, 0, 176)">Mark Word</a><a href="/tags/monitor/" style="font-size: 1.15em; color: rgb(51, 52, 2)">Monitor</a><a href="/tags/context-switch/" style="font-size: 1.15em; color: rgb(97, 180, 83)">Context Switch</a><a href="/tags/thread-pool/" style="font-size: 1.15em; color: rgb(78, 148, 139)">Thread Pool</a><a href="/tags/lambda/" style="font-size: 1.15em; color: rgb(162, 137, 105)">Lambda</a><a href="/tags/bytecode-manipulation/" style="font-size: 1.17em; color: rgb(58, 58, 46)">Bytecode Manipulation</a><a href="/tags/asm/" style="font-size: 1.15em; color: rgb(127, 156, 150)">ASM</a><a href="/tags/jol/" style="font-size: 1.17em; color: rgb(33, 178, 129)">JOL</a><a href="/tags/middleware/" style="font-size: 1.39em; color: rgb(103, 145, 82)">Middleware</a><a href="/tags/mq/" style="font-size: 1.39em; color: rgb(188, 181, 160)">MQ</a><a href="/tags/kafka/" style="font-size: 1.39em; color: rgb(104, 108, 6)">Kafka</a><a href="/tags/stream/" style="font-size: 1.39em; color: rgb(150, 119, 40)">Stream</a><a href="/tags/avro/" style="font-size: 1.18em; color: rgb(148, 21, 22)">Avro</a><a href="/tags/rebalance/" style="font-size: 1.17em; color: rgb(72, 59, 157)">Rebalance</a><a href="/tags/compression/" style="font-size: 1.15em; color: rgb(139, 34, 151)">Compression</a><a href="/tags/consumer-group/" style="font-size: 1.15em; color: rgb(171, 82, 92)">Consumer Group</a><a href="/tags/tcp/" style="font-size: 1.16em; color: rgb(73, 155, 113)">TCP</a><a href="/tags/idempotence/" style="font-size: 1.15em; color: rgb(66, 61, 8)">Idempotence</a><a href="/tags/producer/" style="font-size: 1.15em; color: rgb(46, 51, 24)">Producer</a><a href="/tags/load-balance/" style="font-size: 1.15em; color: rgb(89, 14, 102)">Load Balance</a><a href="/tags/distributed-design-pattern/" style="font-size: 1.17em; color: rgb(88, 193, 41)">Distributed Design Pattern</a><a href="/tags/distributed-architecture/" style="font-size: 1.15em; color: rgb(26, 131, 157)">Distributed Architecture</a><a href="/tags/career/" style="font-size: 1.15em; color: rgb(47, 24, 167)">Career</a><a href="/tags/linux-performance/" style="font-size: 1.17em; color: rgb(62, 3, 51)">Linux Performance</a><a href="/tags/linux-practice/" style="font-size: 1.27em; color: rgb(34, 5, 193)">Linux Practice</a><a href="/tags/ext4/" style="font-size: 1.15em; color: rgb(72, 86, 166)">ext4</a><a href="/tags/file-system/" style="font-size: 1.15em; color: rgb(172, 172, 127)">File System</a><a href="/tags/microservices-governance/" style="font-size: 1.23em; color: rgb(15, 160, 68)">Microservices Governance</a><a href="/tags/config/" style="font-size: 1.17em; color: rgb(158, 41, 196)">Config</a><a href="/tags/configuration-center/" style="font-size: 1.17em; color: rgb(18, 29, 50)">Configuration Center</a><a href="/tags/apollo/" style="font-size: 1.17em; color: rgb(45, 47, 101)">Apollo</a><a href="/tags/math/" style="font-size: 1.16em; color: rgb(100, 111, 5)">Math</a><a href="/tags/oauth2/" style="font-size: 1.21em; color: rgb(185, 170, 36)">Oauth2</a><a href="/tags/spring-security/" style="font-size: 1.2em; color: rgb(97, 67, 184)">Spring Security</a><a href="/tags/spring-security-oauth2/" style="font-size: 1.2em; color: rgb(78, 65, 49)">Spring Security OAuth2</a><a href="/tags/vim/" style="font-size: 1.21em; color: rgb(73, 125, 87)">Vim</a><a href="/tags/web/" style="font-size: 1.22em; color: rgb(198, 46, 49)">Web</a><a href="/tags/javascript/" style="font-size: 1.2em; color: rgb(121, 10, 154)">JavaScript</a><a href="/tags/zookeeper/" style="font-size: 1.16em; color: rgb(41, 111, 90)">Zookeeper</a><a href="/tags/distributed-lock/" style="font-size: 1.15em; color: rgb(140, 166, 80)">Distributed Lock</a><a href="/tags/jwt/" style="font-size: 1.15em; color: rgb(82, 97, 43)">JWT</a><a href="/tags/bio/" style="font-size: 1.15em; color: rgb(56, 62, 112)">BIO</a><a href="/tags/tomcat/" style="font-size: 1.15em; color: rgb(40, 15, 194)">Tomcat</a><a href="/tags/select/" style="font-size: 1.15em; color: rgb(30, 179, 99)">Select</a><a href="/tags/poll/" style="font-size: 1.15em; color: rgb(166, 123, 181)">Poll</a><a href="/tags/zero-copy/" style="font-size: 1.15em; color: rgb(70, 15, 23)">Zero Copy</a><a href="/tags/mmap/" style="font-size: 1.15em; color: rgb(98, 115, 34)">mmap</a><a href="/tags/reactor/" style="font-size: 1.15em; color: rgb(83, 127, 24)">Reactor</a><a href="/tags/zab/" style="font-size: 1.15em; color: rgb(104, 138, 120)">ZAB</a><a href="/tags/etcd/" style="font-size: 1.15em; color: rgb(132, 76, 68)">etcd</a><a href="/tags/raft/" style="font-size: 1.15em; color: rgb(88, 93, 17)">raft</a><a href="/tags/performance-tuning/" style="font-size: 1.15em; color: rgb(30, 68, 118)">Performance Tuning</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">December 2022</span><span class="card-archive-list-count">13</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">November 2022</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">October 2022</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">September 2022</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">July 2022</span><span class="card-archive-list-count">18</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">May 2022</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">April 2022</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">March 2022</span><span class="card-archive-list-count">13</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">440</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2015-06-30T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">743.5k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-10-04T13:56:44.095Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2023 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Stay hungry, stay foolish."])
  } else {
    document.getElementById("subtitle").innerHTML = 'Stay hungry, stay foolish.'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>