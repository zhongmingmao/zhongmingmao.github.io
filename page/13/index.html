<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ByteCoding</title><meta name="author" content="zhongmingmao"><meta name="copyright" content="zhongmingmao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Focus on Infrastructure">
<meta property="og:type" content="website">
<meta property="og:title" content="ByteCoding">
<meta property="og:url" content="https://blog.zhongmingmao.top/page/13/index.html">
<meta property="og:site_name" content="ByteCoding">
<meta property="og:description" content="Focus on Infrastructure">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png">
<meta property="article:author" content="zhongmingmao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="shortcut icon" href="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png"><link rel="canonical" href="https://blog.zhongmingmao.top/page/13/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":512,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":256},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":32,"languages":{"author":"Author: zhongmingmao","link":"Link: ","source":"Source: ByteCoding","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ByteCoding',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-06-09 15:59:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ByteCoding" type="application/atom+xml">
</head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">514</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">149</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">69</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.pixabay.com/photo/2022/10/16/13/53/early-morning-7525151_1280.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="ByteCoding"><span class="site-name">ByteCoding</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ByteCoding</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/25/microservices-governance-config-apollo-ha-monitoring/" title="Apollo - HA + Monitoring"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://microservices-1253868755.cos.ap-guangzhou.myqcloud.com/apollo/apollo-logao.awebp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Apollo - HA + Monitoring"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/25/microservices-governance-config-apollo-ha-monitoring/" title="Apollo - HA + Monitoring">Apollo - HA + Monitoring</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-09-24T16:06:25.000Z" title="Created 2022-09-25 00:06:25">2022-09-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/microservices-governance/">Microservices Governance</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/config/">Config</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/config/apollo/">Apollo</a></span></div><div class="content">Architecture


Deployment
HA


Scene
Influence
Downgrade
Reason



某台 Config Service 下线
无影响

Config Service 无状态


所有 Config Service 下线
Client 无法获取最新配置
Client 重启可获取本地缓存配置



某台 Admin Service 下线
无影响

Admin Service 无状态


所有 Admin Service 下线
用户无法管理配置




某台 Portal 下线
无影响

Portal 无状态


所有 Portal 下线
用户无法管理配置




数据库宕机
用户无法管理配置
Config Service 开启缓存Client 不受影响



Monitoring
CAT + Prometheus


Reference
微服务架构实战 160 讲

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/09/24/microservices-governance-config-apollo-architecture/" title="Apollo - Architecture"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://microservices-1253868755.cos.ap-guangzhou.myqcloud.com/apollo/apollo-logao.awebp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Apollo - Architecture"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/24/microservices-governance-config-apollo-architecture/" title="Apollo - Architecture">Apollo - Architecture</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-09-23T16:06:25.000Z" title="Created 2022-09-24 00:06:25">2022-09-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/microservices-governance/">Microservices Governance</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/config/">Config</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/config/apollo/">Apollo</a></span></div><div class="content">ServerArchitecture
逻辑视图，Software Load Balancer 即 Nginx




Module


Module
Desc
Note



Config Service
服务对象：Client配置获取接口：推送 + 拉取



Admin Service
服务对象：Portal配置管理接口：修改 + 发布



Client
应用获取配置，实时更新通过 Meta Server 获取 Config Service 服务列表客户端软负载



Portal
配置管理界面通过 Meta Server 获取 Admin Service 服务列表客户端软负载



Eureka
服务注册与发现Config Service 和 Admin Service 向 Eureka 注册并保持心跳与 Config Service 一起部署



Meta Server
Eureka Proxy逻辑角色，与 Config Service 一起部署Client 通过域名访问 Meta Server 获取 Config Service 服务列表Portal 通过域名访问 Meta Server 获取  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/23/microservices-governance-config-apollo-core-concept/" title="Apollo - Core Concept"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://microservices-1253868755.cos.ap-guangzhou.myqcloud.com/apollo/apollo-logao.awebp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Apollo - Core Concept"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/23/microservices-governance-config-apollo-core-concept/" title="Apollo - Core Concept">Apollo - Core Concept</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-09-22T16:06:25.000Z" title="Created 2022-09-23 00:06:25">2022-09-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/microservices-governance/">Microservices Governance</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/config/">Config</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/config/apollo/">Apollo</a></span></div><div class="content">Application
应用的唯一标识


classpath:&#x2F;META-INF&#x2F;app.properties -&gt; appid

Environment
DEV &#x2F; UAT &#x2F; PRO


&#x2F;opt&#x2F;settings&#x2F;server.properties -&gt; env




Cluster - Instance Group - default
一个应用下不同实例的分组（是实例的逻辑分组，并非物理集群），不同的 Cluster，可以有不同的配置 –&gt; 灰度单元组


&#x2F;opt&#x2F;settings&#x2F;server.properties -&gt; idc


默认 Cluster：default


Namespace - Item Group - application
一个应用下不同配置的逻辑分组：数据库配置、服务框架配置等也可以关联公共的 Namespace – 可覆盖


默认 Namespace：application




Type
Note



Private
只能被所属应用获取 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/09/22/devops-feature-flag-driven-development/" title="DevOps - Feature Flag-Driven Development"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://devops-1253868755.cos.ap-guangzhou.myqcloud.com/feature-flag-driven-development.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DevOps - Feature Flag-Driven Development"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/22/devops-feature-flag-driven-development/" title="DevOps - Feature Flag-Driven Development">DevOps - Feature Flag-Driven Development</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-09-21T16:06:25.000Z" title="Created 2022-09-22 00:06:25">2022-09-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/devops/">DevOps</a></span></div><div class="content">Feature Flag-Driven Development
DevOps 最佳实践




Continuous Delivery
Feature flag-driven 比 Agile &amp; test-driven 的反馈周期更短，交付效率更高


Long Lived Branch
Merge Hell



TBD: Trunk based Development不能随意开分支



Branch by Abstraction 重构 – 抽象接口 + 配置中心



案例：Feature flag-driven Development + Trunk based Development – 依赖于配置中心



Re-planning – 业务功能回退方便，非常灵活


Comparison


优势
劣势



降低发布风险：通过开关，实现新功能和代码发布的分离
代码侵入，有技术债 - 个人不能接受


迭代速度快
需要配置中心支持


投入成本低：无需开发和维护复杂的发布系统
需要 DevOps 文化和流程配合


减少 Merge hell 问题



Reference
微服务架构实战 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/21/microservices-governance-security-architecture/" title="Microservices - Security Architecture"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://microservices-1253868755.cos.ap-guangzhou.myqcloud.com/oauth2/security-architecture.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Microservices - Security Architecture"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/21/microservices-governance-security-architecture/" title="Microservices - Security Architecture">Microservices - Security Architecture</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-09-20T16:06:25.000Z" title="Created 2022-09-21 00:06:25">2022-09-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/microservices-governance/">Microservices Governance</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/security/">Security</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/security/oauth2/">Oauth2</a></span></div><div class="content">Option 1
Access Token 为透明令牌，API 网关需要去授权服务器集中校验并兑换成 JWT（自校验），然后再传递到后续的微服务缺点：授权服务器压力比较大




Option 2
全链路无状态，API 网关与授权服务器约定一致的 secret，API 网关可以直接解密 JWT（对称&#x2F;非对称）缺点：缺少集中校验 Token 的环节，无法通过授权服务器及时吊销，只能等 Token 自然过期


Option 3
生产环境最为常用：原理与 Option 1 类似，只是增加了 Redis 缓存


Reference
微服务架构实战 160 讲

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/09/20/microservices-governance-security-oauth2-github/" title="Oauth2 - Github"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://microservices-1253868755.cos.ap-guangzhou.myqcloud.com/oauth2/oauth2-01.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Oauth2 - Github"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/20/microservices-governance-security-oauth2-github/" title="Oauth2 - Github">Oauth2 - Github</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-09-19T16:06:25.000Z" title="Created 2022-09-20 00:06:25">2022-09-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/microservices-governance/">Microservices Governance</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/security/">Security</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/security/oauth2/">Oauth2</a></span></div><div class="content">Module


模块
描述



spring-security-oauth2-core
OAuth2 授权框架 + OIDC 核心数据结构及接口


spring-security-oauth2-jose
支持 JOSE 协议组JWT: JSON Web TokenJWS: JSON Web SignatureJWE: JSON Web EncryptionJWK: JSON Web Key


spring-security-oauth2-client
支持 OAuth2 和 OIDC 的客户端




Register application
callback: &#x2F;login&#x2F;oauth2&#x2F;code&#x2F;github


Config
callback template: {baseUrl}&#x2F;login&#x2F;oauth2&#x2F;code&#x2F;{registrationId}

12345678910server:  port: 9000spring:  security:    oauth2:      client:        reg ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/19/kubernetes-dockerfile/" title="Kubernetes - Dockerfile"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kubernetes-1253868755.cos.ap-guangzhou.myqcloud.com/docker/docker-02.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Dockerfile"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/19/kubernetes-dockerfile/" title="Kubernetes - Dockerfile">Kubernetes - Dockerfile</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-09-18T16:06:25.000Z" title="Created 2022-09-19 00:06:25">2022-09-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kubernetes/">Kubernetes</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/kubernetes/docker/">Docker</a></span></div><div class="content">Image
镜像由多层 Layer 组成，Layer 是一组只读不可修改的文件，Layer 可以在镜像间共享Image &#x3D; Layer + Union FS




1234567891011121314$ docker inspect nginx:alpine...        &quot;RootFS&quot;: &#123;            &quot;Type&quot;: &quot;layers&quot;,            &quot;Layers&quot;: [                &quot;sha256:e5e13b0c77cbb769548077189c3da2f0a764ceca06af49d8d558e759f5c232bd&quot;,                &quot;sha256:07099189e7ec257e501d9625507b55e0ea32c330e38c90d8533b3fa2a7a97069&quot;,                &quot;sha256:fcf860bf48b4e20f24f44ba02115 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/09/18/kubernetes-containerization/" title="Kubernetes - Containerization"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kubernetes-1253868755.cos.ap-guangzhou.myqcloud.com/docker/docker-01.png.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Containerization"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/18/kubernetes-containerization/" title="Kubernetes - Containerization">Kubernetes - Containerization</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-09-17T16:06:25.000Z" title="Created 2022-09-18 00:06:25">2022-09-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kubernetes/">Kubernetes</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/kubernetes/docker/">Docker</a></span></div><div class="content">镜像
只读：依赖的文件系统、依赖库、环境变量、启动参数等



核心解决的问题：应用分发



应用容器化
应用不再直接与 OS 打交道，而是封装成镜像，再交给容器环境去运行


常用命令镜像


命令
作用



docker pull
从远端仓库拉取镜像


docker images
列出当前本地已有的镜像


docker rmi
删除不再使用的镜像


容器12$ docker run -h srv --rm alpine hostnamesrv

1234567891011121314151617181920$ docker run -d nginx:alpine6376e2649ef2d4a6073b977fcc4408f7a3f21b6f32775b42be85711b989dd6ce$ docker run -d --name redis_srv redis2a79d491ecb3108b07df7d369dfe8abc6ac314efc2054951ef7b77e0deba0584$ docker run -it --name ubuntu ubuntu sh# cat /etc/os-r ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/17/microservices-governance-security-oauth2-jwt/" title="Oauth2 - JWT"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://microservices-1253868755.cos.ap-guangzhou.myqcloud.com/oauth2/oauth2-jwt.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Oauth2 - JWT"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/17/microservices-governance-security-oauth2-jwt/" title="Oauth2 - JWT">Oauth2 - JWT</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-09-16T16:06:25.000Z" title="Created 2022-09-17 00:06:25">2022-09-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/microservices-governance/">Microservices Governance</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/security/">Security</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/microservices-governance/security/oauth2/">Oauth2</a></span></div><div class="content">Token Type


JWT
资源服务器自解释和自校验，无需再跟授权服务器交互

结构
验签


issue + audience
issue：令牌签发人audience：目标接收人


CodeAuthorization ServerMaven12345678910111213141516171819&lt;dependencies&gt;  &lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;  &lt;/dependency&gt;  &lt;dependency&gt;    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;  &lt;/dependency&gt;  &lt ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/09/16/kubernetes-docker-nature/" title="Kubernetes - Docker Nature"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kubernetes-1253868755.cos.ap-guangzhou.myqcloud.com/docker/docker-geek.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes - Docker Nature"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/16/kubernetes-docker-nature/" title="Kubernetes - Docker Nature">Kubernetes - Docker Nature</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-09-15T16:06:25.000Z" title="Created 2022-09-16 00:06:25">2022-09-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/kubernetes/">Kubernetes</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/kubernetes/docker/">Docker</a></span></div><div class="content">本质
容器，是一个特殊的隔离环境，能够让进程只看到这个环境内的有限信息，不能对外界环境施加影响隔离的原因：系统安全隔离的实现：namespace + cgroup + chroot(rootfs)



Container vs VM
容器并不是直接运行在 Docker 上，Docker 只是辅助建立隔离环境，让容器基于 Linux 运行



VM 虚拟化出来的是硬件，需要在上面再安装一个 Guest OS 才能运行应用程序，会消耗大量的系统资源


容器则直接利用了下层的计算机硬件和操作系统，非常轻量级，但多个容器共用 OS Kernel，隔离程度不如 VM





实现方式
优势
劣势



VM
虚拟化硬件
隔离程度非常高
资源消耗大，启动慢


Container
直接利用下层的硬件和操作系统
资源利用率高运行速度快
隔离程度较低


</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/12/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/#content-inner">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/#content-inner">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/52/#content-inner">52</a><a class="extend next" rel="next" href="/page/14/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://zhongmingmao-1253868755.cos.ap-guangzhou.myqcloud.com/z.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhongmingmao</div><div class="author-info__description">Focus on Infrastructure.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">514</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">149</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">69</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:zhongmingmao0625@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Things are always unexpected!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/05/02/cloud-native-foundation-go-engineering-design-pattern/" title="Go Engineering - Design Pattern"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-design-pattern.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Engineering - Design Pattern"/></a><div class="content"><a class="title" href="/2023/05/02/cloud-native-foundation-go-engineering-design-pattern/" title="Go Engineering - Design Pattern">Go Engineering - Design Pattern</a><time datetime="2023-05-01T16:06:25.000Z" title="Created 2023-05-02 00:06:25">2023-05-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/01/cloud-native-foundation-go-engineering-elegant-project/" title="Go Engineering - Elegant Project"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://go-engineering-1253868755.cos.ap-guangzhou.myqcloud.com/go-engineering-elegant-project.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Engineering - Elegant Project"/></a><div class="content"><a class="title" href="/2023/05/01/cloud-native-foundation-go-engineering-elegant-project/" title="Go Engineering - Elegant Project">Go Engineering - Elegant Project</a><time datetime="2023-04-30T16:06:25.000Z" title="Created 2023-05-01 00:06:25">2023-05-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/01/go-concurrency-mutex-basic/" title="Go Concurrency - Mutex Basic"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cnf-1253868755.cos.ap-guangzhou.myqcloud.com/k8s/go-mutex.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go Concurrency - Mutex Basic"/></a><div class="content"><a class="title" href="/2023/04/01/go-concurrency-mutex-basic/" title="Go Concurrency - Mutex Basic">Go Concurrency - Mutex Basic</a><time datetime="2023-03-31T16:06:25.000Z" title="Created 2023-04-01 00:06:25">2023-04-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/15/cloud-native-serverless-faas-workflow/" title="FaaS - Workflow"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://serverless-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/faas-workflow.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FaaS - Workflow"/></a><div class="content"><a class="title" href="/2023/02/15/cloud-native-serverless-faas-workflow/" title="FaaS - Workflow">FaaS - Workflow</a><time datetime="2023-02-14T16:06:25.000Z" title="Created 2023-02-15 00:06:25">2023-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/14/cloud-native-serverless-faas-web-ide/" title="FaaS - WebIDE"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://serverless-1253868755.cos.ap-guangzhou.myqcloud.com/foundation/webide.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FaaS - WebIDE"/></a><div class="content"><a class="title" href="/2023/02/14/cloud-native-serverless-faas-web-ide/" title="FaaS - WebIDE">FaaS - WebIDE</a><time datetime="2023-02-13T16:06:25.000Z" title="Created 2023-02-14 00:06:25">2023-02-14</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/career/"><span class="card-category-list-name">Career</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/"><span class="card-category-list-name">Cloud Computing</span><span class="card-category-list-count">10</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/iaas/"><span class="card-category-list-name">IaaS</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-computing/paas/"><span class="card-category-list-name">PaaS</span><span class="card-category-list-count">5</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/"><span class="card-category-list-name">Cloud Native</span><span class="card-category-list-count">137</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/api-gateway/"><span class="card-category-list-name">API Gateway</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/"><span class="card-category-list-name">Cloud Native Foundation</span><span class="card-category-list-count">98</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cloud-native/cloud-native-foundation/container/"><span class="card-category-list-name">Container</span><span class="card-category-list-count">2</span></a></li></ul></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/cloud-computing/" style="font-size: 1.23em; color: rgb(59, 116, 86)">Cloud Computing</a><a href="/tags/paas/" style="font-size: 1.19em; color: rgb(184, 23, 72)">PaaS</a><a href="/tags/iaas/" style="font-size: 1.19em; color: rgb(127, 45, 127)">IaaS</a><a href="/tags/cloud-native/" style="font-size: 1.45em; color: rgb(9, 74, 47)">Cloud Native</a><a href="/tags/kubernetes/" style="font-size: 1.43em; color: rgb(182, 134, 108)">Kubernetes</a><a href="/tags/devops/" style="font-size: 1.18em; color: rgb(13, 101, 146)">DevOps</a><a href="/tags/container/" style="font-size: 1.26em; color: rgb(166, 141, 41)">Container</a><a href="/tags/docker/" style="font-size: 1.28em; color: rgb(61, 161, 198)">Docker</a><a href="/tags/go-core/" style="font-size: 1.17em; color: rgb(29, 145, 171)">Go Core</a><a href="/tags/go/" style="font-size: 1.42em; color: rgb(8, 75, 3)">Go</a><a href="/tags/go-engineering/" style="font-size: 1.29em; color: rgb(122, 64, 96)">Go Engineering</a><a href="/tags/infrastructure/" style="font-size: 1.31em; color: rgb(155, 135, 191)">Infrastructure</a><a href="/tags/architecture/" style="font-size: 1.32em; color: rgb(11, 16, 74)">Architecture</a><a href="/tags/iac/" style="font-size: 1.15em; color: rgb(119, 36, 45)">IaC</a><a href="/tags/terraform/" style="font-size: 1.15em; color: rgb(5, 3, 39)">Terraform</a><a href="/tags/crossplane/" style="font-size: 1.15em; color: rgb(171, 44, 113)">Crossplane</a><a href="/tags/pulumi/" style="font-size: 1.15em; color: rgb(68, 66, 197)">Pulumi</a><a href="/tags/argo-cd/" style="font-size: 1.15em; color: rgb(27, 126, 115)">Argo CD</a><a href="/tags/vpc/" style="font-size: 1.15em; color: rgb(138, 67, 14)">VPC</a><a href="/tags/cloud-native-foundation/" style="font-size: 1.33em; color: rgb(69, 93, 197)">Cloud Native Foundation</a><a href="/tags/helm/" style="font-size: 1.15em; color: rgb(4, 148, 193)">Helm</a><a href="/tags/runc/" style="font-size: 1.15em; color: rgb(81, 34, 17)">runc</a><a href="/tags/kustomize/" style="font-size: 1.15em; color: rgb(41, 152, 137)">Kustomize</a><a href="/tags/oci/" style="font-size: 1.15em; color: rgb(4, 158, 35)">OCI</a><a href="/tags/buildkit/" style="font-size: 1.15em; color: rgb(150, 120, 184)">BuildKit</a><a href="/tags/crane/" style="font-size: 1.15em; color: rgb(103, 178, 141)">crane</a><a href="/tags/oci-image/" style="font-size: 1.15em; color: rgb(116, 115, 151)">OCI Image</a><a href="/tags/oci-runtime/" style="font-size: 1.15em; color: rgb(15, 120, 101)">OCI Runtime</a><a href="/tags/linux-namespace/" style="font-size: 1.15em; color: rgb(92, 41, 174)">Linux Namespace</a><a href="/tags/linux-cgroup/" style="font-size: 1.15em; color: rgb(45, 127, 125)">Linux CGroup</a><a href="/tags/k8s-manifest/" style="font-size: 1.15em; color: rgb(150, 82, 66)">K8S Manifest</a><a href="/tags/rpc/" style="font-size: 1.16em; color: rgb(14, 138, 190)">RPC</a><a href="/tags/grpc/" style="font-size: 1.15em; color: rgb(72, 146, 80)">gRPC</a><a href="/tags/network/" style="font-size: 1.16em; color: rgb(81, 179, 24)">Network</a><a href="/tags/linux/" style="font-size: 1.27em; color: rgb(169, 12, 34)">Linux</a><a href="/tags/dockerfile/" style="font-size: 1.17em; color: rgb(92, 144, 122)">Dockerfile</a><a href="/tags/service-mesh/" style="font-size: 1.18em; color: rgb(193, 75, 4)">Service Mesh</a><a href="/tags/istio/" style="font-size: 1.17em; color: rgb(156, 7, 48)">Istio</a><a href="/tags/etcd/" style="font-size: 1.15em; color: rgb(109, 130, 102)">etcd</a><a href="/tags/raft/" style="font-size: 1.15em; color: rgb(169, 20, 166)">raft</a><a href="/tags/microservices/" style="font-size: 1.27em; color: rgb(179, 53, 93)">Microservices</a><a href="/tags/spring-cloud/" style="font-size: 1.21em; color: rgb(71, 39, 14)">Spring Cloud</a><a href="/tags/spring/" style="font-size: 1.24em; color: rgb(67, 57, 86)">Spring</a><a href="/tags/java/" style="font-size: 1.44em; color: rgb(149, 39, 192)">Java</a><a href="/tags/service-governance/" style="font-size: 1.17em; color: rgb(20, 12, 189)">Service Governance</a><a href="/tags/opa/" style="font-size: 1.21em; color: rgb(58, 88, 87)">OPA</a><a href="/tags/alibaba/" style="font-size: 1.22em; color: rgb(198, 12, 24)">Alibaba</a><a href="/tags/security/" style="font-size: 1.26em; color: rgb(19, 185, 28)">Security</a><a href="/tags/compliance/" style="font-size: 1.17em; color: rgb(8, 142, 111)">Compliance</a><a href="/tags/api-gateway/" style="font-size: 1.15em; color: rgb(115, 197, 130)">API Gateway</a><a href="/tags/apisix/" style="font-size: 1.15em; color: rgb(147, 155, 147)">APISIX</a><a href="/tags/serverless/" style="font-size: 1.22em; color: rgb(77, 80, 104)">Serverless</a><a href="/tags/faas/" style="font-size: 1.22em; color: rgb(125, 180, 56)">FaaS</a><a href="/tags/computer-basics/" style="font-size: 1.35em; color: rgb(67, 27, 87)">Computer Basics</a><a href="/tags/computer-organization/" style="font-size: 1.35em; color: rgb(40, 109, 120)">Computer Organization</a><a href="/tags/knowledge-map/" style="font-size: 1.15em; color: rgb(113, 189, 69)">Knowledge Map</a><a href="/tags/tool/" style="font-size: 1.23em; color: rgb(30, 156, 64)">Tool</a><a href="/tags/git/" style="font-size: 1.23em; color: rgb(19, 157, 68)">Git</a><a href="/tags/concurrency/" style="font-size: 1.15em; color: rgb(59, 110, 171)">Concurrency</a><a href="/tags/cloud/" style="font-size: 1.36em; color: rgb(11, 42, 0)">Cloud</a><a href="/tags/native/" style="font-size: 1.36em; color: rgb(101, 157, 113)">Native</a><a href="/tags/authentication/" style="font-size: 1.17em; color: rgb(104, 102, 117)">Authentication</a><a href="/tags/jwt/" style="font-size: 1.15em; color: rgb(148, 51, 6)">JWT</a><a href="/tags/ldap/" style="font-size: 1.15em; color: rgb(132, 154, 120)">LDAP</a><a href="/tags/oauth-2-0/" style="font-size: 1.21em; color: rgb(100, 16, 54)">OAuth 2.0</a><a href="/tags/storage/" style="font-size: 1.4em; color: rgb(113, 118, 100)">Storage</a><a href="/tags/mysql/" style="font-size: 1.41em; color: rgb(30, 59, 41)">MySQL</a><a href="/tags/innodb/" style="font-size: 1.2em; color: rgb(181, 183, 77)">InnoDB</a><a href="/tags/java-concurrent/" style="font-size: 1.38em; color: rgb(125, 139, 182)">Java Concurrent</a><a href="/tags/actor/" style="font-size: 1.15em; color: rgb(103, 173, 140)">Actor</a><a href="/tags/akka/" style="font-size: 1.15em; color: rgb(135, 151, 16)">Akka</a><a href="/tags/coroutine/" style="font-size: 1.16em; color: rgb(60, 170, 88)">Coroutine</a><a href="/tags/csp/" style="font-size: 1.15em; color: rgb(100, 189, 32)">CSP</a><a href="/tags/disruptor/" style="font-size: 1.15em; color: rgb(200, 135, 142)">Disruptor</a><a href="/tags/netty/" style="font-size: 1.15em; color: rgb(21, 62, 92)">Netty</a><a href="/tags/stm/" style="font-size: 1.15em; color: rgb(16, 172, 7)">STM</a><a href="/tags/mvcc/" style="font-size: 1.15em; color: rgb(103, 189, 119)">MVCC</a><a href="/tags/java-core/" style="font-size: 1.21em; color: rgb(47, 125, 71)">Java Core</a><a href="/tags/java-performance/" style="font-size: 1.34em; color: rgb(11, 136, 101)">Java Performance</a><a href="/tags/cas/" style="font-size: 1.15em; color: rgb(164, 32, 155)">CAS</a><a href="/tags/hashtable/" style="font-size: 1.15em; color: rgb(23, 169, 159)">HashTable</a><a href="/tags/concurrenthashmap/" style="font-size: 1.15em; color: rgb(180, 10, 30)">ConcurrentHashMap</a><a href="/tags/concurrentskiplistmap/" style="font-size: 1.15em; color: rgb(45, 4, 24)">ConcurrentSkipListMap</a><a href="/tags/jvm/" style="font-size: 1.37em; color: rgb(136, 71, 77)">JVM</a><a href="/tags/gc/" style="font-size: 1.16em; color: rgb(90, 120, 30)">GC</a><a href="/tags/design-pattern/" style="font-size: 1.18em; color: rgb(103, 189, 175)">Design Pattern</a><a href="/tags/consistency/" style="font-size: 1.15em; color: rgb(45, 187, 113)">Consistency</a><a href="/tags/hashmap/" style="font-size: 1.15em; color: rgb(185, 37, 136)">HashMap</a><a href="/tags/jit/" style="font-size: 1.15em; color: rgb(175, 8, 180)">JIT</a><a href="/tags/synchronized/" style="font-size: 1.16em; color: rgb(50, 37, 189)">synchronized</a><a href="/tags/lock/" style="font-size: 1.15em; color: rgb(155, 180, 115)">Lock</a><a href="/tags/reentrantreadwritelock/" style="font-size: 1.15em; color: rgb(188, 121, 53)">ReentrantReadWriteLock</a><a href="/tags/stampedlock/" style="font-size: 1.15em; color: rgb(37, 118, 29)">StampedLock</a><a href="/tags/io/" style="font-size: 1.15em; color: rgb(47, 37, 50)">IO</a><a href="/tags/nio/" style="font-size: 1.16em; color: rgb(157, 130, 113)">NIO</a><a href="/tags/aio/" style="font-size: 1.16em; color: rgb(172, 136, 164)">AIO</a><a href="/tags/epoll/" style="font-size: 1.16em; color: rgb(197, 128, 130)">Epoll</a><a href="/tags/bio/" style="font-size: 1.15em; color: rgb(59, 189, 130)">BIO</a><a href="/tags/tomcat/" style="font-size: 1.15em; color: rgb(149, 74, 174)">Tomcat</a><a href="/tags/select/" style="font-size: 1.15em; color: rgb(182, 164, 198)">Select</a><a href="/tags/poll/" style="font-size: 1.15em; color: rgb(188, 70, 171)">Poll</a><a href="/tags/zero-copy/" style="font-size: 1.15em; color: rgb(193, 19, 194)">Zero Copy</a><a href="/tags/mmap/" style="font-size: 1.15em; color: rgb(154, 133, 83)">mmap</a><a href="/tags/reactor/" style="font-size: 1.15em; color: rgb(148, 11, 25)">Reactor</a><a href="/tags/serialization/" style="font-size: 1.15em; color: rgb(124, 38, 62)">Serialization</a><a href="/tags/protobuf/" style="font-size: 1.15em; color: rgb(128, 108, 93)">ProtoBuf</a><a href="/tags/java-stream/" style="font-size: 1.15em; color: rgb(164, 85, 197)">Java Stream</a><a href="/tags/mark-word/" style="font-size: 1.15em; color: rgb(125, 118, 148)">Mark Word</a><a href="/tags/monitor/" style="font-size: 1.15em; color: rgb(177, 69, 199)">Monitor</a><a href="/tags/context-switch/" style="font-size: 1.15em; color: rgb(14, 132, 151)">Context Switch</a><a href="/tags/thread-pool/" style="font-size: 1.15em; color: rgb(93, 121, 134)">Thread Pool</a><a href="/tags/lambda/" style="font-size: 1.15em; color: rgb(103, 59, 149)">Lambda</a><a href="/tags/bytecode-manipulation/" style="font-size: 1.17em; color: rgb(174, 2, 16)">Bytecode Manipulation</a><a href="/tags/asm/" style="font-size: 1.15em; color: rgb(53, 21, 118)">ASM</a><a href="/tags/jol/" style="font-size: 1.17em; color: rgb(149, 189, 134)">JOL</a><a href="/tags/middleware/" style="font-size: 1.39em; color: rgb(165, 123, 1)">Middleware</a><a href="/tags/mq/" style="font-size: 1.39em; color: rgb(169, 179, 13)">MQ</a><a href="/tags/kafka/" style="font-size: 1.39em; color: rgb(174, 85, 8)">Kafka</a><a href="/tags/stream/" style="font-size: 1.39em; color: rgb(131, 80, 7)">Stream</a><a href="/tags/rebalance/" style="font-size: 1.17em; color: rgb(87, 1, 88)">Rebalance</a><a href="/tags/avro/" style="font-size: 1.18em; color: rgb(185, 58, 149)">Avro</a><a href="/tags/compression/" style="font-size: 1.15em; color: rgb(178, 179, 166)">Compression</a><a href="/tags/consumer-group/" style="font-size: 1.15em; color: rgb(73, 67, 149)">Consumer Group</a><a href="/tags/tcp/" style="font-size: 1.16em; color: rgb(55, 62, 126)">TCP</a><a href="/tags/producer/" style="font-size: 1.15em; color: rgb(90, 41, 0)">Producer</a><a href="/tags/load-balance/" style="font-size: 1.15em; color: rgb(41, 40, 189)">Load Balance</a><a href="/tags/idempotence/" style="font-size: 1.15em; color: rgb(161, 60, 16)">Idempotence</a><a href="/tags/distributed-design-pattern/" style="font-size: 1.17em; color: rgb(51, 159, 87)">Distributed Design Pattern</a><a href="/tags/distributed-architecture/" style="font-size: 1.15em; color: rgb(102, 126, 50)">Distributed Architecture</a><a href="/tags/career/" style="font-size: 1.15em; color: rgb(174, 174, 122)">Career</a><a href="/tags/linux-performance/" style="font-size: 1.17em; color: rgb(86, 137, 18)">Linux Performance</a><a href="/tags/linux-practice/" style="font-size: 1.25em; color: rgb(42, 188, 5)">Linux Practice</a><a href="/tags/ext4/" style="font-size: 1.15em; color: rgb(180, 177, 162)">ext4</a><a href="/tags/file-system/" style="font-size: 1.15em; color: rgb(77, 47, 95)">File System</a><a href="/tags/math/" style="font-size: 1.16em; color: rgb(181, 184, 84)">Math</a><a href="/tags/microservices-governance/" style="font-size: 1.22em; color: rgb(100, 67, 73)">Microservices Governance</a><a href="/tags/config/" style="font-size: 1.17em; color: rgb(80, 128, 98)">Config</a><a href="/tags/configuration-center/" style="font-size: 1.17em; color: rgb(177, 63, 161)">Configuration Center</a><a href="/tags/apollo/" style="font-size: 1.17em; color: rgb(25, 82, 116)">Apollo</a><a href="/tags/oauth2/" style="font-size: 1.2em; color: rgb(16, 76, 63)">Oauth2</a><a href="/tags/spring-security/" style="font-size: 1.19em; color: rgb(81, 3, 0)">Spring Security</a><a href="/tags/spring-security-oauth2/" style="font-size: 1.19em; color: rgb(125, 76, 128)">Spring Security OAuth2</a><a href="/tags/vim/" style="font-size: 1.2em; color: rgb(187, 180, 34)">Vim</a><a href="/tags/performance-tuning/" style="font-size: 1.15em; color: rgb(24, 197, 182)">Performance Tuning</a><a href="/tags/web/" style="font-size: 1.21em; color: rgb(173, 171, 55)">Web</a><a href="/tags/javascript/" style="font-size: 1.19em; color: rgb(181, 59, 17)">JavaScript</a><a href="/tags/zookeeper/" style="font-size: 1.16em; color: rgb(166, 73, 165)">Zookeeper</a><a href="/tags/zab/" style="font-size: 1.15em; color: rgb(165, 189, 10)">ZAB</a><a href="/tags/distributed-lock/" style="font-size: 1.15em; color: rgb(176, 178, 76)">Distributed Lock</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">May 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">April 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">February 2023</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">January 2023</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">December 2022</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">November 2022</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">October 2022</span><span class="card-archive-list-count">31</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">September 2022</span><span class="card-archive-list-count">15</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">514</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2015-06-30T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">953k</div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-06-09T07:59:40.542Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.pixabay.com/photo/2018/08/27/15/17/fishing-3635221_1280.png')"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2024 By zhongmingmao</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Life is like a box of chocolates. You can't know what you'll eat until you open it.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Stay hungry, stay foolish."])
  } else {
    document.getElementById("subtitle").innerHTML = 'Stay hungry, stay foolish.'
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>