---
title: Observability - DeepFlow
mathjax: true
date: 2025-01-02 00:06:25
cover: https://observability-1253868755.cos.ap-guangzhou.myqcloud.com/opentelemetry.png
categories:
  - Cloud Native
  - Observability
tags:
  - Cloud Native
  - Observability
  - DeepFlow
  - eBPF
---

# 简介

## 概述

1. DeepFlow 是云杉网络 (opens new window)开发的一款可观测性产品，旨在为复杂的**云基础设施**及**云原生应用**提供**深度可观测性**
2. DeepFlow 基于 **eBPF** 实现了**应用性能指标**、**分布式追踪**、**持续性能剖析**等**观测信号**的零侵扰（**Zero Code**）采集
   - 并结合智能标签（**SmartEncoding**）技术实现了**所有观测信号**的全栈（Full Stack）**关联**和高效**存取**
3. 使用 DeepFlow，可以让云原生应用**自动**具有深度可观测性
   - 从而消除开发者**不断插桩**的沉重负担，并为 **DevOps/SRE** 团队提供从**代码**到**基础设施**的**监控**及**诊断**能力

<!-- more -->

## 特性

> 即刻实现**云原生**及 **AI 应用**的深度可观测性 - 零侵扰 + 全栈 + eBPF/Wasm

1. 任意 **Service** 的**全景图**
   - 利用 **eBPF** 零侵扰绘制生产环境的全景图，包括**任意语言**开发的服务、**未知代码**的第三方服务、所有的**云原生基础设施服务**
   - 内置**标准协议**解析能力，并提供 **Wasm** 插件机制扩展解析任意**私有协议**
   - 零侵扰计算**每一次调用**在**应用程序**和**基础设施**中的**全栈黄金指标**，快速**定界**性能瓶颈
   - 基于领先的 **AutoMetrics** 机制，利用 **eBPF** 和 **Wasm** 技术零侵扰绘制生产环境全景图，不遗漏任何服务
2. 任意 **Request** 的**分布式追踪**
   - 基于 **eBPF** 的零侵扰分布式追踪能力
     - 支持**任意语言**的应用程序，并完整覆盖**网关**、**服务网格**、**数据库**、**消息队列**、**DNS**、**网卡**等各类基础设施，不留下任何**追踪盲点**
   - 全栈，**自动采集**每个 **Span** 关联的**网络性能指标**和**文件读写事件**
   - 分布式追踪进入**零插桩**的新时代
   - 基于领先的 **AutoTracing** 机制，利用 **eBPF** 和 **Wasm** 技术零侵扰实现分布式追踪，不留下任何追踪盲点
3. 任意 **Function** 的**持续性能剖析**
   - 以低于 **1%** 的开销零侵扰采集生产环境进程的**性能剖析数据**
   - 绘制**函数粒度**的 **OnCPU**、**OffCPU**、GPU、**Memory**、**Network** 火焰图
   - 快速定位**业务函数**、**框架函数**、**运行时函数**、**动态链接库函数**、**内核函数**、CUDA 函数的**全栈性能瓶颈**，并**自动关联**至**分布式追踪数据**
   - 基于领先的 **AutoProfiling** 机制，利用 **eBPF** 技术以低于 **1%** 的开销零侵扰采集生产环境进程的性能剖析数据
   - 即使在 **2.6+** 内核版本下，仍然可提供**网络性能剖析**能力，洞察代码性能瓶颈
4. **无缝集成**流行的**可观测性技术栈**
   - 可作为 **Prometheus**、**OpenTelemetry**、**SkyWalking**、**Pyroscope** 的**存储后端**，亦可提供 **SQL**、**PromQL**、**OTLP** 等**数据接口**作为流行技术栈的**数据源**
   - 自动为**所有观测信号**注入**统一标签**，包括**云资源**、**K8s 容器资源**、**K8s Label/Annotation**、**CMDB 中的业务属性**等，消除**数据孤岛**。
5. 存储性能 **10x ClickHouse**
   - 基于 **SmartEncoding** 机制，向**所有观测信号**注入**标准化**的、**预编码**的**元标签**，相比 ClickHouse 的 **String** 或 **LowCard** 方案均可将**存储开销**降低 10x
   - **自定义标签**与**观测数据**进行**分离存储**，从此可安心注入近乎**无限维度和基数的标签**，且可获得像 **BigTable** 一样的轻松查询体验
6. **内核开源**

## 痛点

