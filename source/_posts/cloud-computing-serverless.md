---
title: Cloud Computing - Serverless
mathjax: false
date: 2022-10-21 00:06:25
cover: https://cloud-computing-1253868755.cos.ap-guangzhou.myqcloud.com/serverless.png
categories:
  - Cloud Computing
  - PaaS
tags:
  - Cloud Computing
  - PaaS
---

# Serverless vs Container

> Serverless 是云计算中`资源抽象`的极致体现：用户专注于`业务逻辑`，而无需关注基础设施

1. Container
   - 给予了用户很大的`定制`空间，按需对应用进行拆分和封装
2. Serverless
   - `完全屏蔽`了计算资源，引导用户不再关注基础设施，只需遵循标准的方式编写业务代码即可
   - `更细`的拆分粒度
     - FaaS：将每一个具有`独立功能`的函数，作为一个`单独的服务`进行部署和运行

<!-- more -->

# 计费机制

1. 底层没有`固化`的资源，一般会按照`调用次数`和`调用时长`来计费，可以精确到`毫秒`
2. 从`成本`上，非常适合那些`偶尔触发`、`短时间运行`的工作负载

# 事件模型

> 事件模型是 Serverless 的`核心编程模型`和`运行逻辑`，非常适合基于`事件驱动`的开发场景

1. 上游：`触发器`
   - Serverless 一般都会提供多种触发器：`API` 触发器、`OSS` 触发器、`MQ` 触发器、`定时`触发器等
2. 下游
   - 在`函数内`访问其他`云服务`（如 RDS、MQ 等`外部存储`）
   - `Serverless Computing` 本身是`无状态`的，所有`持久化`需求都需要借助`外部存储`来实现
3. 架构范式
   - `FaaS` + `MQ`：关注`数据流`，是数据的`传递`和`流向`
     - 当 MQ 中有`新消息`进入，`MQ 触发器`会触发`云函数`，并将消息作为`事件参数`传递给云函数
     - 云函数进行及时处理，处理结果还能再进入另一个 MQ，进而触发另一个云函数
     - 最终形成一个`流式数据`的处理`管道`，实现数据的`实时`处理和分发
   - `Workflow`：关注`控制流`，定义事件发生的`先后次序`和`条件依赖`
     - 按照`业务逻辑`的控制处理流程，以`工作流`的方式，进行云函数等`事件处理单元`的`组合`和`编排`
     - 高层调度框架：用`配置文件`或者`图形化`的方式，来设置一个`复杂`的事件处理步骤和逻辑
     - 工作流服务每次的运行都会自动维护一个`状态机`，用来记录和跟踪状态

# 限制

1. 客观限制：`冷启动`的延时、`内存`的限制、云函数的`运行时长`和`并发上限`
2. 应用的`可迁移性` : 厂商`绑定`
