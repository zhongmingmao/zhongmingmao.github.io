---
title: AI Agent - MCP Overview
mathjax: true
date: 2025-01-19 00:06:25
cover: https://ai-agent-1253868755.cos.ap-guangzhou.myqcloud.com/mcp.jpg
categories:
  - AI Agent
  - MCP
  - A2A
tags:
  - MCP
  - A2A
---

# 提示工程 + RAG

1. LLM 可以开箱即用，通过**提示工程**和它直接对话并解决问题
2. 随着 LLM 的能力越来越强，尤其是其**推理模型**的出现，LLM 的回答越来越准确
3. 但 LLM 并非**全知全能**，**预训练**的数据有**截止时间** - RAG
4. RAG 是一种 LLM 应用开发范式
   - 将 LLM 与**外部数据源**相结合来提高**准确性**和**相关性**
   - 先通过**向量**之间的**相似度**，用**检索系统**从**外部数据源**搜索数据，以识别与用户查询相关的信息
   - LLM 随后利用检索到信息生成更精确，更及时的响应

<!-- more -->

> RAG 过程 - 通过 RAG 增加 LLM 的知识，大大提高了 LLM 回答的准确性和相关性

| Key  | Value                                                        |
| ---- | ------------------------------------------------------------ |
| 检索 | 通过**向量数据库**或者其它**检索系统**，找出与**用户查询**相关的信息 |
| 增强 | 将检索到的信息作为**上下文**提供给 **LLM**                   |
| 生成 | LLM 基于这些额外信息生成回答                                 |

![image-20250916224705473](https://ai-agent-1253868755.cos.ap-guangzhou.myqcloud.com/image-20250916224705473.png)

# Agent + Tool Call

1. RAG 解决的是让 LLM 使用**内部知识**，同时**减少幻觉**的问题，但 RAG 本身并没有增强 LLM 的**行动能力** - Agent
2. Agent 本质上是赋予 LLM **使用工具**并**采取行动**的开发范式

> Agent 的工作流程

| Key        | Value                          |
| ---------- | ------------------------------ |
| 规划       | LLM 理解用户需求，规划解决方案 |
| 工具选择   | 决定使用哪些工具来完成任务     |
| 工具调用   | 调用选定的工具并处理返回结果   |
| 反思和调整 | 评估进展，必要时调整计划       |
| 输出结果   | 向用户呈现最终结果             |

![image-20250916224606942](https://ai-agent-1253868755.cos.ap-guangzhou.myqcloud.com/image-20250916224606942.png)

1. **工具调用**的能力让 LLM 不再局限于**生成文本**，而是可以执行实际操作，极大扩展了 AI 应用的范围和价值
2. OpenAI 的 **Function Calling** 和 Anthropic 的 **Tool Use** 都允许开发者为 LLM **定义可调用的工具**，LLM 可以**自主决定何时使用**这些工具

# LLM 应用开发范式

![image-20250916225337398](https://ai-agent-1253868755.cos.ap-guangzhou.myqcloud.com/image-20250916225337398.png)

1. 要让 LLM 拥有各种**工具调用**的能力，绝非易事
   - 即使是使用 **LangChain**，要为 LLM 配置一个**工具**，也要在程序中**手动**向 LLM **注册**工具的名称以及各种参数
2. 在有了 **MCP** 协议后，无论是 **RAG**，还是 **Agent + Tool Calls**，这两个 LLM 应用开发的关键范式，都将得益于 MCP 提供的**工具发现**和**主动调用**能力

# MCP + RAG + Agent

> MCP 是一个**开放标准**，用于将 **AI** 连接到**数据库**和**工具**，相当于为 **LLM** 构建的 **API 层**

![image-20250916231224149](https://ai-agent-1253868755.cos.ap-guangzhou.myqcloud.com/image-20250916231224149.png)

1. MCP 为 LLM 提供了连接到不同**数据源**和**工具**的**标准方式**
2. 所有的**工具**或者**服务提供商**都会按照 **MCP 协议**制定的**标准**定义一个**共享接口**
   - 无需每个开发团队都分别与他们构建**一次性集成**，而 **MCP 客户端**中的 **LLM** 可以**无缝**地接入该接口
3. 对于 **RAG** 来说
   - MCP 通过统一的 **SessionMessage 协议**和**工具发现机制**，使 RAG 能够无缝接入**多源数据检索**
   - 只需**一次集成**即可**动态检索**并**注入上下文**，大幅提高 RAG 的准确性和**可维护性**
4. 对于 **Agent** 来说
   - MCP 为 Agent 提供了**标准化**的**工具调用接口**和**结果回传格式**
   - 让 LLM 可以**自主选择**、**分步调度各类工具**执行**复杂任务**，无需**手动注册**或**编码集成**
   - 这将显著提升 Agent 应用的**开发效率**和**扩展能力**





